(()=>{var s={525:(t,e)=>{"use strict";function s(t,e,s,a,n,i,o,r,l,c,d,u,p,h){void 0===e&&(e=!0),void 0===s&&(s=null),void 0===n&&(n=!1),void 0===u&&(u=""),void 0===p&&(p=null),void 0===h&&(h=null),this.id=t,this.is_new=e,this.parent_id=s,this.created_by=a,this.deprecated=n,this.spatial_type=i,this.spatial_payload=o,this.classification_payloads=r,this.line_size=l,this.containing_box=c,this.frame=d,this.text_payload=u,this.annotation_meta=p,this.human_deprecated=h}e.a=void 0,s.prototype.ensure_compatible_classification_payloads=function(t){for(var e=[],s=null,a=1,n=0;n<this.classification_payloads.length;n++){var i=this.classification_payloads[n].class_id;if(!t.includes(i))throw alert("Found class id ".concat(i,' in "resume_from" data but not in "allowed_classes"')),"Found class id ".concat(i,' in "resume_from" data but not in "allowed_classes"');if(e.push(i),"confidence"in this.classification_payloads[n])this.classification_payloads[n].confidence=this.classification_payloads[n].confidence,a-=this.classification_payloads[n].confidence;else{if(null!==s)throw"More than one classification payload was supplied without confidence for a single annotation.";s=n}}if(null!==s){if(a<0)throw"Supplied total confidence was greater than 100%";this.classification_payloads[s].confidence=a}for(n=0;n<t.length;n++)e.includes(t[n])||this.classification_payloads.push({class_id:t[n],confidence:0})},s.from_json=function(t){var e=new s;return Object.assign(e,t),"new"in t&&(e.is_new=t.new),e},e.a=s},65:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filter_low=e.mark_deprecated=e.get_annotation_confidence=void 0,e.get_annotation_confidence=function(t){var e,s=-1;for(e in t.classification_payloads)t.classification_payloads[e].confidence>s&&(s=t.classification_payloads[e].confidence);return s},e.mark_deprecated=function(t,e){t.deprecated=e},e.filter_low=function(t,e){return t<e}},478:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=void 0;var a,n=s(213),i=s(65),s=((s=a=a||{})[s.ModeSelect=0]="ModeSelect",s[s.ZoomPan=1]="ZoomPan",s[s.AnnotationResize=2]="AnnotationResize",s[s.AnnotationID=3]="AnnotationID",s[s.RecolorActive=4]="RecolorActive",s[s.ClassCounter=5]="ClassCounter",s[s.KeypointSlider=6]="KeypointSlider",s[s.SubmitButtons=7]="SubmitButtons",o.prototype.modify_config=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var s=0;s<t.length;s++)for(var a in t[s])this[a]=t[s][a]},o.annotation_gradient_default=!1,o);function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.toolbox_map=new Map([[a.ModeSelect,n.ModeSelectionToolboxItem],[a.ZoomPan,n.ZoomPanToolboxItem],[a.AnnotationResize,n.AnnotationResizeItem],[a.AnnotationID,n.AnnotationIDToolboxItem],[a.RecolorActive,n.RecolorActiveItem],[a.ClassCounter,n.ClassCounterToolboxItem],[a.KeypointSlider,n.KeypointSliderItem],[a.SubmitButtons,n.SubmitButtons]]),this.default_toolbox_item_order=[a.ModeSelect,a.ZoomPan,a.AnnotationResize,a.AnnotationID,a.RecolorActive,a.ClassCounter,[a.KeypointSlider,{name:"Filter Low Confidence",filter_function:i.filter_low,confidence_function:i.get_annotation_confidence,mark_deprecated:i.mark_deprecated,default_value:.05,keybinds:{increment:"2",decrement:"1"}}],a.SubmitButtons],this.default_keybinds={annotation_size_small:"s",annotation_size_large:"l",annotation_size_plus:"=",annotation_size_minus:"-",annotation_vanish:"v"},this.change_zoom_keybind="r",this.create_point_annotation_keybind="c",this.default_annotation_size=6,this.delete_annotation_keybind="d",this.filter_annotations_on_load=!1,this.switch_subtask_keybind="z",this.toggle_annotation_mode_keybind="u",this.modify_config.apply(this,t)}e.Configuration=s},548:(t,e)=>{"use strict";function c(t){var e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return void 0!==e[t.toLowerCase()]?e[t.toLowerCase()]:t}e.ws=void 0,e.ws=function(t,e,s,a){var n,i,o,r,l;return 0==$("#gradient-toggle").prop("checked")||null==t.classification_payloads||a<(s=s(t))?e:(t=c(e),e=Math.round((1-.85)*parseInt(t.slice(1,3),16)+216.75),o=Math.round((1-.85)*parseInt(t.slice(3,5),16)+216.75),l=Math.round((1-.85)*parseInt(t.slice(5,7),16)+216.75),i=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),e=Math.round((1-s/a)*e+s/a*i),i=Math.round((1-s/a)*o+s/a*r),o=Math.round((1-s/a)*l+s/a*n),r=e.toString(16),l=i.toString(16),s=o.toString(16),1==r.length&&(r="0"+e.toString(16)),1==l.length&&(l="0"+i.toString(16)),1==s.length&&(s="0"+o.toString(16)),7==(a="#".concat(r,l,s)).length?a:t)}},848:(t,e)=>{"use strict";function p(){}e.Z=void 0,p.l2_norm=function(t,e){for(var s=t.length,a=0,n=0;n<s;n++)a+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(a)},p.interpolate_poly_segment=function(t,e,s){var a=t[e%t.length],e=t[(e+1)%t.length];return[a[0]*(1-s)+e[0]*s,a[1]*(1-s)+e[1]*s]},p.get_line_equation_through_points=function(t,e){var s=e[1]-t[1],a=t[0]-e[0];return 0==s&&0==a?null:{a:s,b:a,c:t[1]*(e[0]-t[0])-t[0]*(e[1]-t[1])}},p.get_nearest_point_on_segment=function(t,e,s,a,n){var i,o,r,l,c,d;return null==s||(i=s.a,r=((o=s.b)*(o*t-i*e)-i*(s=s.c))/(i*i+o*o),l=(i*(i*e-o*t)-o*s)/(i*i+o*o),n[c=0]!=a[0]&&(c=(r-a[0])/(n[0]-a[0])),d=0,n[1]!=a[1]&&(d=(l-a[1])/(n[1]-a[1])),c<0||1<c||d<0||1<d)?null:(c=Math.abs(i*t+o*e+s)/Math.sqrt(i*i+o*o),d=Math.sqrt((n[0]-a[0])*(n[0]-a[0])+(n[1]-a[1])*(n[1]-a[1])),{dst:c,prop:Math.sqrt((r-a[0])*(r-a[0])+(l-a[1])*(l-a[1]))/d})},p.get_nearest_point_on_polygon=function(t,e,s,a,n){void 0===a&&(a=1/0);var i=s,o={access:null,distance:null,point:null};if(n=void 0===n?!1:n)for(d=0;d<i.length-1;d++){var r=i[d],l=i[d+1],c=p.get_line_equation_through_points(r,l),c=p.get_nearest_point_on_segment(t,e,c,r,l);null!=c&&c.dst<a&&(null==o.distance||c.dst<o.distance)&&(o.access=""+(d+c.prop),o.distance=c.dst,o.point=p.interpolate_poly_segment(i,d,c.prop))}else for(var d=0;d<i.length;d++){var u=i[d],u=Math.sqrt(Math.pow(u[0]-t,2)+Math.pow(u[1]-e,2));(null==o.distance||u<o.distance)&&(o.access=d,o.distance=u,o.point=i[d])}return o},p.get_nearest_point_on_bounding_box=function(t,e,s,a){void 0===a&&(a=1/0);for(var n={access:null,distance:null,point:null},i=0;i<2;i++)for(var o=0;o<2;o++){var r=[s[i][0],s[o][1]],l=Math.sqrt(Math.pow(r[0]-t,2)+Math.pow(r[1]-e,2));l<a&&(null==n.distance||l<n.distance)&&(n.access="".concat(i).concat(o),n.distance=l,n.point=r)}return n},p.get_nearest_point_on_bbox3=function(t,e,s,a,n){void 0===n&&(n=1/0);for(var i={access:null,distance:null,point:null},o=0;o<2;o++)for(var r=0;r<2;r++){var l=[a[o][0],a[r][1]],c=Math.sqrt(Math.pow(l[0]-t,2)+Math.pow(l[1]-e,2));c<n&&(null==i.distance||c<i.distance)&&(i.access="".concat(o).concat(r),i.distance=c,i.point=l)}var d,u=0,p=a[0][2],h=1,f=a[1][2];return f<p&&(d=u,u=h,h=d,d=p,p=f,f=d),s==p?i.access+=""+u:s==f&&(i.access+=""+h),i},p.get_nearest_point_on_tbar=function(t,e,s,a){void 0===a&&(a=1/0);for(var n={access:null,distance:null,point:null},i=0;i<2;i++){var o=[s[i][0],s[i][1]],r=Math.sqrt(Math.pow(o[0]-t,2)+Math.pow(o[1]-e,2));r<a&&(null==n.distance||r<n.distance)&&(n.access="".concat(i).concat(i),n.distance=r,n.point=o)}return n},e.Z=p},918:(t,e,s)=>{"use strict";e.k=void 0;var n=s(213),i=s(345),o=s(769);function C(){}C.add_style_to_document=function(t){var e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");e.appendChild(s),s.appendChild(document.createTextNode((0,o.get_init_style)(t.config.container_id)))},C.get_md_button=function(t,e,s,a,n){var i,o="",r=' href="#"',l=(a==t&&(o=" sel",r=""),"");for(i in n)n[i].allowed_modes.includes(t)&&(l+=" md-en4--"+i);return'<div class="mode-opt">\n            <a'.concat(r,' id="md-btn--').concat(t,'" class="md-btn').concat(o).concat(l,' invert-this-svg" amdname="').concat(e,'">\n                ').concat(s,"\n            </a>\n        </div>")},C.get_images_html=function(t){for(var e,s="",a=0;a<t.config.image_data.frames.length;a++)e=0!=a?"none":"block",s+='\n                <img id="'.concat(t.config.image_id_pfx,"__").concat(a,'" src="').concat(t.config.image_data.frames[a],'" class="imwrap_cls ').concat(t.config.imgsz_class,' image_frame" style="z-index: 50; display: ').concat(e,';" />\n            ');return s},C.get_frame_annotation_dialogs=function(t){var e="",s=0;for(a in t.subtasks)(t.subtasks[a].allowed_modes.includes("whole-image")||t.subtasks[a].allowed_modes.includes("global"))&&(s+=1);var a,n=0;for(a in t.subtasks)if((t.subtasks[a].allowed_modes.includes("whole-image")||t.subtasks[a].allowed_modes.includes("global"))&&(e+='\n                <div id="fad_st__'.concat(a,'" class="frame_annotation_dialog fad_st__').concat(a," fad_ind__").concat(s-n-1,'">\n                    <div class="hide_overflow_container">\n                        <div class="row_container">\n                            <div class="fad_row name">\n                                <div class="fad_row_inner">\n                                    <div class="fad_st_name">').concat(t.subtasks[a].display_name,'</div>\n                                </div>\n                            </div>\n                            <div class="fad_row add">\n                                <div class="fad_row_inner">\n                                    <div class="fad_st_add">\n                                        <a class="add-glob-button" href="#">+</a>\n                                    </div>\n                                </div>\n                            </div><div class="fad_annotation_rows"></div>\n                        </div>\n                    </div>\n                </div>\n            '),4<(n+=1)))throw new Error("At most 4 subtasks can have allow 'whole-image' or 'global' annotations.");return e},C.prep_window_html=function(e,t){void 0===t&&(t=null);var s=C.get_images_html(e),a=C.get_frame_annotation_dialogs(e),t=new n.Toolbox([],n.Toolbox.create_toolbox(e,t)),a=t.setup_toolbox_html(e,a,s,i.ULABEL_VERSION),s=($("#"+e.config.container_id).html(a),Object.keys(e.subtasks)[0]),a=e.config.toolbox_id,s=e.subtasks[s].state.annotation_mode,s=[C.get_md_button("bbox","Bounding Box",o.BBOX_SVG,s,e.subtasks),C.get_md_button("point","Point",o.POINT_SVG,s,e.subtasks),C.get_md_button("polygon","Polygon",o.POLYGON_SVG,s,e.subtasks),C.get_md_button("tbar","T-Bar",o.TBAR_SVG,s,e.subtasks),C.get_md_button("polyline","Polyline",o.POLYLINE_SVG,s,e.subtasks),C.get_md_button("contour","Contour",o.CONTOUR_SVG,s,e.subtasks),C.get_md_button("bbox3","Bounding Cube",o.BBOX3_SVG,s,e.subtasks),C.get_md_button("whole-image","Whole Frame",o.WHOLE_IMAGE_SVG,s,e.subtasks),C.get_md_button("global","Global",o.GLOBAL_SVG,s,e.subtasks)];$("#"+a+" .toolbox_inner_cls .mode-selection").append(s.join("\x3c!-- --\x3e")),e.show_annotation_mode(null),$("#"+e.config.toolbox_id+" .toolbox_inner_cls").height()>$("#"+e.config.container_id).height()&&$("#"+e.config.toolbox_id).css("overflow-y","scroll"),e.toolbox=t;!function(t){if(0!=t.length)for(var e in t)if(t[e]instanceof n.ZoomPanToolboxItem)return!0;return!1}(e.toolbox.items)||(!function(t){if(null!=t){if("width"in t&&"height"in t&&"left"in t&&"top"in t)return!0;e.raise_error("initial_crop missing necessary properties. Ignoring.")}return!1}(e.config.initial_crop)?document.getElementById("recenter-whole-image-button").style.display="none":document.getElementById("recenter-button").innerHTML="Initial Crop")},C.get_idd_string=function(t,e,s,a,n,i,o,r){for(var l='\n        <div id="'.concat(t,'" class="id_dialog" style="width: ').concat(e,"px; height: ").concat(e,'px;">\n            <a class="id-dialog-clickable-indicator" href="#"></a>\n            <svg width="').concat(e,'" height="').concat(e,'">\n        '),c=0;c<n.length;c++){var d=1/n.length,u=c/n.length,p=1/n.length,h=1-p,f=i+(o-i)/2,_=i+d*(o-i)/2,b=o-i,d=d*(o-i),g=2*Math.PI*f*p,m=2*Math.PI*f*h,k=2*Math.PI*f*u,p=2*Math.PI*_*p,h=2*Math.PI*_*h,u=2*Math.PI*_*u,v=n[c],y=r[c].color;l+='\n            <circle\n                r="'.concat(f,'" cx="').concat(s,'" cy="').concat(s,'" \n                stroke="').concat(y,'" \n                fill-opacity="0"\n                stroke-opacity="').concat(a,'"\n                stroke-width="').concat(b,'"; \n                stroke-dasharray="').concat(g," ").concat(m,'" \n                stroke-dashoffset="').concat(k,'" />\n            <circle\n                id="').concat(t,"__circ_").concat(v,'"\n                r="').concat(_,'" cx="').concat(s,'" cy="').concat(s,'"\n                fill-opacity="0"\n                stroke="').concat(y,'" \n                stroke-opacity="1.0"\n                stroke-width="').concat(d,'" \n                stroke-dasharray="').concat(p," ").concat(h,'" \n                stroke-dashoffset="').concat(u,'" />\n            ')}return l+='\n            </svg>\n            <div class="centcirc"></div>\n        </div>'},C.build_id_dialogs=function(t){var e,s='<div class="toolbox-id-app-payload">',a=t.config.outer_diameter,n=t.config.inner_prop*a/2,i=2*n,o=.5*a,r=o-n,l=o-n,c=t.config.toolbox_id,d=a/2;for(e in t.subtasks){for(var u=t.subtasks[e].state.idd_id,p=t.subtasks[e].state.idd_id_front,h=$("#dialogs__"+e),f=$("#front_dialogs__"+e),_=C.get_idd_string(u,a,d,.4,t.subtasks[e].class_ids,n,o,t.subtasks[e].class_defs),p=C.get_idd_string(p,a,d,.4,t.subtasks[e].class_ids,n,o,t.subtasks[e].class_defs),b='<div id="tb-id-app--'.concat(e,'" class="tb-id-app">'),g=t.subtasks[e].class_ids,m=0;m<g.length;m++){var k=g[m],v=t.subtasks[e].class_defs[m].color,y=t.subtasks[e].class_defs[m].name,w="",x=' href="#"';if(0==m&&(w=" sel",x=""),t.config.allow_soft_id)throw new Error("Only hard id is currently supported");b+="\n                        <a".concat(x,' id="').concat(c,"_sel_").concat(k,'" class="tbid-opt').concat(w,'">\n                            <div class="colprev ').concat(c,"_colprev_").concat(k,'" style="background-color: ').concat(v,'"></div> <span class="tb-cls-nam">').concat(y,"</span>\n                        </a>\n                    ")}b+="\n            </div>",f.append(p),h.append(_),s+=b,t.subtasks[e].state.visible_dialogs[u]={left:0,top:0,pin:"center"}}$("#"+t.config.toolbox_id+" div.id-toolbox-app").html(s),$("#"+t.config.container_id+" a.id-dialog-clickable-indicator").css({height:"".concat(a,"px"),width:"".concat(a,"px"),"border-radius":"".concat(o,"px")}),$("#"+t.config.container_id+" div.centcirc").css({position:"absolute",top:"".concat(r,"px"),left:"".concat(l,"px"),width:"".concat(i,"px"),height:"".concat(i,"px"),"background-color":"black","border-radius":"".concat(n,"px")})},C.build_edit_suggestion=function(t){for(var e in t.subtasks){var s="edit_suggestion__".concat(e),a="global_edit_suggestion__".concat(e),n=$("#dialogs__"+e),i=(n.append('\n                <a href="#" id="'.concat(s,'" class="edit_suggestion editable"></a>\n            ')),$("#"+s).css({height:t.config.edit_handle_size+"px",width:t.config.edit_handle_size+"px","border-radius":t.config.edit_handle_size/2+"px"}),""),o="";t.subtasks[e].single_class_mode||(i='--\x3e<a href="#" class="reid_suggestion global_sub_suggestion gedit-target"></a>\x3c!--',o=" mcm"),n.append('\n                <div id="'.concat(a,'" class="global_edit_suggestion glob_editable gedit-target').concat(o,'">\n                    <a href="#" class="move_suggestion global_sub_suggestion movable gedit-target">\n                        <img class="movable gedit-target" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAdVBMVEX///8jHyAAAAD7+/sfGxwcFxhta2s3NDUEAABxcHBqaWnr6+seGRoSCw0yLzC0s7O6ubl4dncLAAN9fHz19fUsKCkWERInIyTW1dV5eHjBwMCko6ODgoJAPj7o5+jw7/BYVleLiopHRUXKysqtrK1PTE0/PD0MlkEbAAAF+ElEQVR4nO2d63aiMBRGIYJTWhyrKPZia2sv7/+IQ7QWYhLITcmXyf41yzWLOXs+GsDmHJLkqsz32X5+3X/yuhSkTEuyGLuMyzElKYVMxy7kUhRHwUaxGLuUyzA9CYaaYtEKhpkiIxii4pQVDO9ELc4FQ0uRSzC0FAUJhpXi7Y1QMJwUC5lgKClO5YJhpNgrGEKKwlU0pBQHEqTcQCv2LDIdReATVXqZOFO8HbtQU5QSRE5RMUHcFJUTRE1RYRVlFOFWVE1BPEVtQbRLv8Yig5miQYIHRZjlxijBgyLIRWMxdLMthzyOXbwKH+aCjeLH2OUrsJ1ZGM62Y5evwKK2MKwRTtNPq7P0c+zyFZisc2PBfD0Zu3wV7kpeUfSzyX+WZ3djF68Gr0jul5zO8v78dM5LEMFGMWUVyVMi+L1F8sR+mKcwgo1i1lUk98lEYDhJmBRhTtEj3RSbBCWGXUWoBCltik2CUsNWESxByinFg6DU8KQIlyDlrmwuB/lRUG7YKDb/EzOcVbTLakHI18Pxz3LD5OGLkMVqvDId0WMYCNEQn2iITzTEJxriEw3xiYb4REN8oiE+0RCfaIhPNMQnGuITDfGJhvhEQ3yiIT7RMABEe6LCojjfpzcD2pmvxC5flllLuSx3Y5d04KMqnh39uEy2L39aXrauDvtcVBZ7wxdkVpO1z5t5XteknpmP9Lk9LA95/uqyJqe85oetZcSwT+PU+VLWvqZ4V5fHEs0aitrOlzzzM8XOLlYTxW7vkp9bI5nN1vqKbHNWvvFP8Wyrta7iefeZf/s/2Y3W2op8e12+8eMKfWK34VoedAZQiPoH841Pe0BXqaBtRb0LVTwwZ+lT01UlbB9TTVE2rGN52aK1kJSolqJk5JFfjzvSGhVSlI5bqd8uXrc6b7LusWFFaYIpebhG6Yo8yMscUOwRvL9O7YpwbWGKijCCpopAgmaKUIImivI+euLn6N+5vGDhUz9YghS9FOWCMz8TpMylvf98inLB5naNqFPZ3p/vHjX+Nb67WJqixSwLlllp9zXhpLYZydCFTdGZYBP4u5XhticWTbqKfaeoLuWLleF36a6UVtFhgmma/bUy/Js5rOU0DMapoFeGPylWTgX9MkxJ1XdjYIZfhvRu5cvxIT0zLN8Sx0f0zTDNkr3D5flwRL8Msy+7kUCiQ/plSIcWBb+W/gfXwyR5DPaepjod1mWK5beVodP70qo9bpjPFlX3wO6eD3O758OVu+fDij2yq2f8wvYZf1U4esbnpvfJU8T8nqbi/3ZY37UJ5y+G9H2pIEEKWIq6CVKgFHsEJQlSgBTNBIEUTQVD+B3wgGCPIsjv8QcF0fdiKAhi7KeRzERXE0TeE6UoKNnXlvq/r01ZEHVvotZJ5v/+Uk5RJ0GK/3uEd+zccF1BhH3eTIr6ggh79Tspmggi9Fv8pqi3yLT43zOz29TmCVIeD31P/go2it+078niC8yL9a59v7vqIJ0v3v146OH7D326RXIB30Nq3FLnKfzN/M3YJbkl/F7uaIhPNMQnGuITDfGJhvhEQ3yiIT7REJ9oiE80xCca4hMN8YmG+ERDfKIhPtEQn2iISfDv5Q7+3eqnAapHRanhT9+Ef/tXB2kHqB4UZYa/jSF+bvDsoTsClzxJDTudL2ApsiNwmxTFhkxrD1SKZ0OMaYqidyM8sR8CpciMof5Jke/YXXLNWTnKisoLNpcD7hPRZyAn6mQt67oaJl8j3OhYDUuho0i8Z1FbGNbSDl6PeLcZijCzmzlxHeTtnQp41agqxWKkj3lbwXW5lfQ/DnJj+K6R6yPqX1QR1Bj9PzZGimavUhkL6WR3OepvNvAD7RSxEqRoKuIJJkmho4i0yLRoXDRwLhMsyiliJkhRTBE1QYpSirgJUhRWVMRVtMvgpR/tQs8zkCL2KXqkVxE/QUrPcqPzIjGfkV40wkiQIkkxlAQpwhTDSZAiGMwUUoIUbkUNK0HKWYqhJUhhFEMUZG7gwjtFj/ymGGaClJ8UQ02QsiBZmpm/KByB+T7bX3ko8T9Zz1H5wFZx8QAAAABJRU5ErkJggg==">\n                    </a>\x3c!--\n                    ').concat(i,'\n                    --\x3e<a href="#" class="delete_suggestion global_sub_suggestion gedit-target">\n                        <span class="bigx gedit-target">&#215;</span>\n                    </a>\n                </div>\n            ')),t.subtasks[e].state.visible_dialogs[s]={left:0,top:0,pin:"center"},t.subtasks[e].state.visible_dialogs[a]={left:0,top:0,pin:"center"}}},C.build_confidence_dialog=function(t){for(var e in t.subtasks){var s="annotation_confidence__".concat(e),a="global_annotation_confidence__".concat(e),n=$("#dialogs__"+e),i=$("#global_edit_suggestion__"+e),n=(n.append('\n                <p id="'.concat(s,'" class="annotation-confidence editable"></p>\n            ')),$("#"+s).css({height:t.config.edit_handle_size+"px",width:t.config.edit_handle_size+"px"}),"");t.subtasks[e].single_class_mode||(n=" mcm"),i.append('\n                <div id="'.concat(a,'" class="annotation-confidence gedit-target').concat(n,'">\n                    <p class="annotation-confidence-title" style="margin: 0.25em; margin-top: 1em; padding-top: 0.3em; opacity: 1;">Annotation Confidence:</p>\n                    <p class="annotation-confidence-value" style="margin: 0.25em; opacity: 1;">\n                    ').concat(t.subtasks[t.state.current_subtask].active_annotation,"\n                    </p>\n                </div>\n            ")),$("#"+a).css({"background-color":"black",color:"white",opacity:"0.6",height:"3em",width:"14.5em","margin-top":"-9.5em","border-radius":"1em","font-size":"1.2em","margin-left":"-1.4em"})}},e.k=C},701:(t,e)=>{"use strict";function a(t,e,s,a,n,i,o,r){void 0===r&&(r=.4),this.display_name=t,this.classes=e,this.allowed_modes=s,this.resume_from=a,this.task_meta=n,this.annotation_meta=i,this.read_only=o,this.inactive_opacity=r,this.class_ids=[],this.actions={stream:[],undone_stack:[]}}e.W=void 0,a.from_json=function(t,e){var s=new a(e.display_name,e.classes,e.allowed_modes,e.resume_from,e.task_meta,e.annotation_meta);return s.read_only="read_only"in e&&!0===e.read_only,"inactive_opacity"in e&&"number"==typeof e.inactive_opacity&&(s.inactive_opacity=Math.min(Math.max(e.inactive_opacity,0),1)),s},e.W=a},213:function(t,e,s){"use strict";var a,n=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function s(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),i=this&&this.__awaiter||function(t,o,r,l){return new(r=r||Promise)(function(s,e){function a(t){try{i(l.next(t))}catch(t){e(t)}}function n(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?s(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(a,n)}i((l=l.apply(t,o||[])).next())})},c=this&&this.__generator||function(a,n){var i,o,r,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(s){return function(t){var e=[s,t];if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(r=2&e[0]?o.return:e[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,e[1])).done)return r;switch(o=0,(e=r?[2&e[0],r.value]:e)[0]){case 0:case 1:r=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,o=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(r=0<(r=l.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3]))l.label=e[1];else if(6===e[0]&&l.label<r[1])l.label=r[1],r=e;else{if(!(r&&l.label<r[2])){r[2]&&l.ops.pop(),l.trys.pop();continue}l.label=r[2],l.ops.push(e)}}e=n.call(a,l)}catch(t){e=[6,t],o=0}finally{i=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},o=(Object.defineProperty(e,"__esModule",{value:!0}),e.SubmitButtons=e.KeypointSliderItem=e.RecolorActiveItem=e.AnnotationResizeItem=e.ClassCounterToolboxItem=e.AnnotationIDToolboxItem=e.ZoomPanToolboxItem=e.ModeSelectionToolboxItem=e.ToolboxItem=e.ToolboxTab=e.Toolbox=void 0,s(138)),r=s(478);function l(t,e){void 0===e&&(e=[]),this.tabs=t=void 0===t?[]:t,this.items=e}String.prototype.replaceLowerConcat=function(t,e,s){return"string"==typeof(s=void 0===s?null:s)?this.replaceAll(t,e).toLowerCase().concat(s):this.replaceAll(t,e).toLowerCase()},l.create_toolbox=function(t,e){if(0===(e=null==e?t.config.default_toolbox_item_order:e).length)throw new Error("No Toolbox Items Given");for(var s=[],a=0;a<e.length;a++){var n=void 0,i=void 0,i=("number"==typeof e[a]?i=e[a]:(i=e[a][0],n=e[a][1]),t.config.toolbox_map.get(i));s.push(null==n?new i(t):new i(t,n))}return s},l.prototype.setup_toolbox_html=function(t,e,s,a){var n,i='\n        <div class="full_ulabel_container_">\n            '.concat(e,'\n            <div id="').concat(t.config.annbox_id,'" class="annbox_cls">\n                <div id="').concat(t.config.imwrap_id,'" class="imwrap_cls ').concat(t.config.imgsz_class,'">\n                    ').concat(s,'\n                </div>\n            </div>\n            <div id="').concat(t.config.toolbox_id,'" class="toolbox_cls">\n                <div class="toolbox-name-header">\n                    <h1 class="toolname"><a class="repo-anchor" href="https://github.com/SenteraLLC/ulabel">ULabel</a> <span class="version-number">v').concat(a,'</span></h1>\x3c!--\n                    --\x3e<div class="night-button-cont">\n                        <a href="#" class="night-button">\n                            <div class="night-button-track">\n                                <div class="night-status"></div>\n                            </div>\n                        </a>\n                    </div>\n                </div>\n                <div class="toolbox_inner_cls">\n        ');for(n in this.items)i+=this.items[n].get_html()+"<div class=toolbox-divider></div>";return i+='\n                </div>\n                <div class="toolbox-tabs">\n                    '.concat(this.get_toolbox_tabs(t),"\n                </div> \n            </div>\n        </div>")},l.prototype.get_toolbox_tabs=function(t){var e,s="";for(e in t.subtasks){var a=e==t.state.current_subtask,n=t.subtasks[e],n=new d([],n,e,a);s+=n.html,this.tabs.push(n)}return s},l.prototype.redraw_update_items=function(t){for(var e=0,s=this.items;e<s.length;e++)s[e].redraw_update(t)},e.Toolbox=l;var d=function(t,e,s,a){void 0===a&&(a=!1),this.toolboxitems=t=void 0===t?[]:t,this.subtask=e,this.subtask_key=s,this.selected=a;var t="",a=' href="#"',n=100*e.inactive_opacity;this.selected&&(this.subtask.read_only&&(a=""),t=" sel",n=100),console.log(e.display_name),console.log(e),this.html='\n        <div class="tb-st-tab'.concat(t,'">\n            <a').concat(a,' id="tb-st-switch--').concat(s,'" class="tb-st-switch">').concat(this.subtask.display_name,'</a>\x3c!--\n            --\x3e<span class="tb-st-range">\n                <input id="tb-st-range--').concat(s,'" type="range" min=0 max=100 value=').concat(n," />\n            </span>\n        </div>\n        ")},s=(e.ToolboxTab=d,u.prototype.redraw_update=function(t){},u.prototype.frame_update=function(t){},u);function u(){}e.ToolboxItem=s;n(f,p=s),f.prototype.get_html=function(){return'\n        <div class="mode-selection">\n            <p class="current_mode_container">\n                <span class="cmlbl">Mode:</span>\n                <span class="current_mode"></span>\n            </p>\n        </div>\n        '};var p,h=f;function f(r){var t=p.call(this)||this;return t.ulabel=r,$(document).on("click","a.md-btn",function(t){var e,t=$(t.currentTarget),s=r.state.current_subtask;t.hasClass("sel")||r.subtasks[s].state.is_in_progress||(e=t.attr("id").split("--")[1],r.subtasks[s].state.annotation_mode=e,$("a.md-btn.sel").attr("href","#"),$("a.md-btn.sel").removeClass("sel"),t.addClass("sel"),t.removeAttr("href"),r.show_annotation_mode(t))}),$(document).on("keypress",function(t){var e=r.state.current_subtask;if(!r.subtasks[e].state.is_in_progress&&t.key==r.config.toggle_annotation_mode_keybind){var s=[];for(n in Array.from(document.getElementsByClassName("md-btn"))){var a=document.getElementsByClassName("md-btn")[n];"none"!=a.style.display&&s.push(a)}var n,i=Array.from(document.getElementsByClassName("md-btn sel"))[0],o=void 0;for(n in s)s[n]===i&&(o=Number(n)+1)==s.length&&(o=0);s[o].click()}}),t}e.ModeSelectionToolboxItem=h;n(b,_=s),b.prototype.set_frame_range=function(t){1==t.config.image_data.frames.length?this.frame_range="":this.frame_range='\n            <div class="full-tb htbmain set-frame">\n                <p class="shortcut-tip">scroll to switch frames</p>\n                <div class="zpcont">\n                    <div class="lblpyldcont">\n                        <span class="pzlbl htblbl">Frame</span> &nbsp;\n                        <input class="frame_input" type="range" min=0 max='.concat(t.config.image_data.frames.length-1," value=0 />\n                    </div>\n                </div>\n            </div>\n            ")},b.prototype.get_html=function(){return'\n        <div class="zoom-pan">\n            <div class="half-tb htbmain set-zoom">\n                <p class="shortcut-tip">ctrl+scroll or shift+drag</p>\n                <div class="zpcont">\n                    <div class="lblpyldcont">\n                        <span class="pzlbl htblbl">Zoom</span>\n                        <span class="zinout htbpyld">\n                            <a href="#" class="zbutt zout">-</a>\n                            <a href="#" class="zbutt zin">+</a>\n                        </span>\n                    </div>\n                </div>\n            </div>\x3c!--\n            --\x3e<div class="half-tb htbmain set-pan">\n                <p class="shortcut-tip">scrollclick+drag or ctrl+drag</p>\n                <div class="zpcont">\n                    <div class="lblpyldcont">\n                        <span class="pzlbl htblbl">Pan</span>\n                        <span class="panudlr htbpyld">\n                            <a href="#" class="pbutt left"></a>\n                            <a href="#" class="pbutt right"></a>\n                            <a href="#" class="pbutt up"></a>\n                            <a href="#" class="pbutt down"></a>\n                            <span class="spokes"></span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="recenter-cont" style="text-align: center;">\n                <a href="#" id="recenter-button">Re-Center</a>\n                <a href="#" id="recenter-whole-image-button">Whole Image</a>\n            </div>\n            '.concat(this.frame_range,"\n        </div>\n        ")};var _,h=b;function b(e){var t=_.call(this)||this;return t.ulabel=e,t.set_frame_range(e),$(document).on("click","#recenter-button",function(){e.show_initial_crop()}),$(document).on("click","#recenter-whole-image-button",function(){e.show_whole_image()}),$(document).on("keypress",function(t){t.key==e.config.change_zoom_keybind.toLowerCase()&&document.getElementById("recenter-button").click(),t.key==e.config.change_zoom_keybind.toUpperCase()&&document.getElementById("recenter-whole-image-button").click()}),t}e.ZoomPanToolboxItem=h;n(m,g=s),m.prototype.set_instructions=function(t){this.instructions="",null!=t.config.instructions_url&&(this.instructions='\n                <a href="'.concat(t.config.instructions_url,'" target="_blank" rel="noopener noreferrer">Instructions</a>\n            '))},m.prototype.get_html=function(){return'\n        <div class="classification">\n            <p class="tb-header">Annotation ID</p>\n            <div class="id-toolbox-app"></div>\n        </div>\n        <div class="toolbox-refs">\n            '.concat(this.instructions,"\n        </div>\n        ")};var g,h=m;function m(t){var e=g.call(this)||this;return e.ulabel=t,e.set_instructions(t),e}e.AnnotationIDToolboxItem=h;n(v,k=s),v.prototype.update_toolbox_counter=function(t,e){if(null!=t){for(var s,a=t.class_ids,n={},i=0;i<a.length;i++)n[a[i]]=0;var o,r,l=t.annotations.access,c=t.annotations.ordering;for(i=0;i<c.length;i++)if(0==(o=l[c[i]]).deprecated)for(s=0;s<o.classification_payloads.length;s++)if(0<(r=o.classification_payloads[s]).confidence){n[r.class_id]+=1;break}var d,u,p="";for(i=0;i<a.length;i++)(d=t.class_defs[i].name).includes("OVERWRITE")||(u=n[t.class_defs[i].id],p+="".concat(d,": ").concat(u,"<br>"));this.inner_HTML='<p class="tb-header">Annotation Count</p>'+"<p>".concat(p,"</p>")}},v.prototype.get_html=function(){return'\n        <div class="toolbox-class-counter">'+this.inner_HTML+"</div>"},v.prototype.redraw_update=function(t){this.update_toolbox_counter(t.subtasks[t.state.current_subtask],t.config.toolbox_id),$("#"+t.config.toolbox_id+" div.toolbox-class-counter").html(this.inner_HTML)};var k,h=v;function v(){for(var t=0;t<arguments.length;t++)t,0;var e=k.call(this)||this;return e.inner_HTML='<p class="tb-header">Annotation Count</p>',e}e.ClassCounterToolboxItem=h;n(w,y=s),w.prototype.update_annotation_size=function(t,e){var s=t.display_name.replaceLowerConcat(" ","-","-cached-size");if(null!=t){var a=t.display_name.replaceLowerConcat(" ","-","-vanished");if(!this[a]||"v"===e){if("number"==typeof e&&this.loop_through_annotations(t,e,"="),"v"==e)return this[a]?(this.loop_through_annotations(t,this[s],"="),this[a]=!this[a],void $("#annotation-resize-v").attr("style","background-color: rgba(100, 148, 237, 0.8)")):this[a]?void 0:(this.loop_through_annotations(t,.01,"="),this[a]=!this[a],void $("#annotation-resize-v").attr("style","background-color: #1c2d4d"));switch(e){case"s":this.loop_through_annotations(t,1.5,"="),this[s]=1.5;break;case"l":this.loop_through_annotations(t,5,"="),this[s]=5;break;case"dec":this.loop_through_annotations(t,.5,"-");break;case"inc":this.loop_through_annotations(t,.5,"+");break;default:return}}}},w.prototype.loop_through_annotations=function(t,e,s){var a=t.display_name.replaceLowerConcat(" ","-","-cached-size");if("="==s){for(var n in t.annotations.access)t.annotations.access[n].line_size=e;return.01==e?void 0:void this.set_size_cookie(e,t)}if("+"==s)for(var n in t.annotations.access)t.annotations.access[n].line_size+=e,this[a]=t.annotations.access[n].line_size;else{if("-"!=s)throw Error("Invalid Operation given to loop_through_annotations");for(var n in t.annotations.access)t.annotations.access[n].line_size-e<=.01?t.annotations.access[n].line_size=.01:t.annotations.access[n].line_size-=e,this[a]=t.annotations.access[n].line_size}this.set_size_cookie(t.annotations.access[t.annotations.ordering[0]].line_size,t)},w.prototype.update_all_subtask_annotation_size=function(t,e){for(var s in t.subtasks)this.update_annotation_size(t.subtasks[s],e)},w.prototype.set_size_cookie=function(t,e){var s=new Date,e=(s.setTime(s.getTime()+864e9),e.display_name.replaceLowerConcat(" ","_"));document.cookie=e+"_size="+t+";"+s.toUTCString()+";path=/"},w.prototype.read_size_cookie=function(t){for(var e=t.display_name.replaceLowerConcat(" ","_")+"_size=",s=document.cookie.split(";"),a=0;a<s.length;a++){for(var n=s[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},w.prototype.get_html=function(){return'\n        <div class="annotation-resize">\n            <p class="tb-header">Change Annotation Size</p>\n            <div class="annotation-resize-button-holder">\n                <span class="annotation-vanish">\n                    <a href="#" class="butt-ann button" id="annotation-resize-v">Vanish</a>\n                </span>\n                <span class="annotation-size">\n                    <a href="#" class="butt-ann button" id="annotation-resize-s">Small</a>\n                    <a href="#" class="butt-ann button" id="annotation-resize-l">Large</a>\n                </span>\n                <span class="annotation-inc increment">\n                    <a href="#" class="butt-ann button inc" id="annotation-resize-inc">+</a>\n                    <a href="#" class="butt-ann button dec" id="annotation-resize-dec">-</a>\n                </span>\n            </div>\n        </div>\n        '};var y,h=w;function w(a){var t,n=y.call(this)||this,e=(n.cached_size=1.5,n.inner_HTML='<p class="tb-header">Annotation Count</p>',n.keybind_configuration=a.config.default_keybinds,a.state.current_subtask);a.subtasks[e];for(t in a.subtasks){var s=a.subtasks[t].display_name.replaceLowerConcat(" ","-","-cached-size"),i=n.read_size_cookie(a.subtasks[t]);null!=i&&"NaN"!=i?(n.update_annotation_size(a.subtasks[t],Number(i)),n[s]=Number(i)):null!=a.config.default_annotation_size?(n.update_annotation_size(a.subtasks[t],a.config.default_annotation_size),n[s]=a.config.default_annotation_size):(n.update_annotation_size(a.subtasks[t],5),n[s]=5)}return $(document).on("click","a.butt-ann",function(t){var t=$(t.currentTarget),e=a.state.current_subtask,e=a.subtasks[e],t=t.attr("id").slice(18);n.update_annotation_size(e,t),a.redraw_all_annotations(null,null,!1)}),$(document).on("keypress",function(t){var e=a.state.current_subtask,s=a.subtasks[e];switch(t.key){case n.keybind_configuration.annotation_vanish.toUpperCase():n.update_all_subtask_annotation_size(a,"v");break;case n.keybind_configuration.annotation_vanish:n.update_annotation_size(s,"v");break;case n.keybind_configuration.annotation_size_small:n.update_annotation_size(s,"s");break;case n.keybind_configuration.annotation_size_large:n.update_annotation_size(s,"l");break;case n.keybind_configuration.annotation_size_minus:n.update_annotation_size(s,"dec");break;case n.keybind_configuration.annotation_size_plus:n.update_annotation_size(s,"inc")}a.redraw_all_annotations(null,null,!1)}),n}e.AnnotationResizeItem=h;n(C,x=s),C.prototype.update_annotation_color=function(t,e,s){var a=null!==(s=void 0===s?null:s)?!1:!0;"cya"==(e="red"==(e="yel"==e?"#FFFF00":e)?"#FF0000":e)&&(e="#00FFFF"),null==s&&t.state.id_payload.forEach(function(t){1==t.confidence&&(s=t.class_id)}),null==s&&(s=t.classes[0].id),t.classes.forEach(function(t){t.id===s&&(t.color=e)}),$(".toolbox_colprev_"+s).attr("style","background-color: "+e),a&&this.set_color_cookie(s,e)},C.prototype.limit_redraw=function(t,e){void 0===e&&(e=100),Date.now()-this.most_recent_draw>e&&(this.most_recent_draw=Date.now(),t.redraw_all_annotations(null,null,!1))},C.prototype.set_color_cookie=function(t,e){var s=new Date;s.setTime(s.getTime()+864e9),document.cookie="color"+t+"="+e+";"+s.toUTCString()+";path=/"},C.prototype.read_color_cookie=function(t){for(var e="color"+t+"=",s=document.cookie.split(";"),a=0;a<s.length;a++){for(var n=s[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},C.prototype.set_gradient_cookie=function(t){var e=new Date;e.setTime(e.getTime()+864e9),document.cookie="gradient="+t+";"+e.toUTCString()+";path=/"},C.prototype.read_gradient_cookie=function(){for(var t="gradient=",e=document.cookie.split(";"),s=0;s<e.length;s++){for(var a=e[s];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return"true"==a.substring(t.length,a.length)}return null},C.prototype.get_html=function(){var t=this.read_gradient_cookie(),e="";return null==t&&(t=r.Configuration.annotation_gradient_default),'\n        <div class="recolor-active">\n            <p class="tb-header">Recolor Annotations</p>\n            <div class="recolor-tbi-gradient">\n                <div>\n                    <label for="gradient-toggle" id="gradient-toggle-label">Toggle Gradients</label>\n                    <input type="checkbox" id="gradient-toggle" name="gradient-checkbox" value="gradient" '.concat(e=1==t?"checked":e,'>\n                </div>\n                <div>\n                    <label for="gradient-slider" id="gradient-slider-label">Gradient Max</label>\n                    <input type="range" id="gradient-slider" value="100">\n                    <div class="gradient-slider-value-display">100%</div>\n                </div>\n            </div>\n            <div class="annotation-recolor-button-holder">\n                <div class="color-btn-container">\n                    <input type="button" class="color-change-btn" id="color-change-yel">\n                    <input type="button" class="color-change-btn" id="color-change-red">\n                    <input type="button" class="color-change-btn" id="color-change-cya">\n                </div>\n                <div class="color-picker-border">\n                    <div class="color-picker-container" id="color-picker-container">\n                        <input type="color" class="color-change-picker" id="color-change-pick">\n                    </div>\n                </div>\n            </div>\n        </div>\n        ')};var x,h=C;function C(s){for(var a=x.call(this)||this,t=(a.most_recent_draw=Date.now(),a.inner_HTML='<p class="tb-header">Recolor Annotations</p>',s.state.current_subtask),e=s.subtasks[t],n=0;n<e.classes.length;n++){var i=a.read_color_cookie(e.classes[n].id);null!==i&&a.update_annotation_color(e,i,e.classes[n].id)}return o.ULabel.process_classes(s,s.state.current_subtask,e),$(document).on("click","input.color-change-btn",function(t){var t=$(t.currentTarget),e=s.state.current_subtask,e=s.subtasks[e],t=t.attr("id").slice(13,16);a.update_annotation_color(e,t),o.ULabel.process_classes(s,s.state.current_subtask,e),s.redraw_all_annotations(null,null,!1)}),$(document).on("input","input.color-change-picker",function(t){var e=s.state.current_subtask,e=s.subtasks[e],t=t.currentTarget.value;a.update_annotation_color(e,t),document.getElementById("color-picker-container").style.backgroundColor=t,o.ULabel.process_classes(s,s.state.current_subtask,e),a.limit_redraw(s)}),$(document).on("input","#gradient-toggle",function(t){s.redraw_all_annotations(null,null,!1),a.set_gradient_cookie($("#gradient-toggle").prop("checked"))}),$(document).on("input","#gradient-slider",function(t){$("div.gradient-slider-value-display").text(t.currentTarget.value+"%"),s.redraw_all_annotations(null,null,!1)}),a}e.RecolorActiveItem=h;n(z,T=s),z.prototype.deprecate_annotations=function(t,e,s){void 0===s&&(s=!0);var a,n=t.state.current_subtask,i=t.subtasks[n];for(a in i.annotations.ordering){var o,r=i.annotations.access[i.annotations.ordering[a]];0==r.deprecated&&(r.human_deprecated=!1),r.human_deprecated||(o=this.get_confidence(r),o=this.filter_function(o,e),this.mark_deprecated(r,o))}$("#"+this.slider_bar_id).val(Math.round(100*e)),$("#"+this.slider_bar_id+"-label").text(Math.round(100*e)+"%"),s&&t.redraw_all_annotations(null,null,!1)},z.prototype.check_for_human_deprecated=function(t){for(var e in t.annotations.ordering){var e=t.annotations.access[t.annotations.ordering[e]].parent_id;null==e||null!=(e=t.annotations.access[e])&&e.deprecated&&(e.human_deprecated=!0)}},z.prototype.get_html=function(){var t=this.name.replaceLowerConcat(" ","-");return'\n        <div class="keypoint-slider">\n            <p class="tb-header">'.concat(this.name,'</p>\n            <div class="keypoint-slider-holder">\n                <input \n                    type="range" \n                    id="').concat(t,'" \n                    class="keypoint-slider" value="').concat(100*this.default_value,'"\n                />\n                <label \n                    for="').concat(t,'" \n                    id="').concat(t,'-label"\n                    class="keypoint-slider-label">\n                    ').concat(Math.round(100*this.default_value),'%\n                </label>\n                <span class="increment" >\n                    <a href="#" class="button inc keypoint-slider-increment ').concat(t,'-button" >+</a>\n                    <a href="#" class="button dec keypoint-slider-increment ').concat(t,'-button" >-</a>\n                </span>\n            </div>\n        </div>')};var T,h=z;function z(s,e){var a=T.call(this)||this;if(a.default_value=0,a.inner_HTML='<p class="tb-header">Keypoint Slider</p>',a.name=e.name,a.filter_function=e.filter_function,a.get_confidence=e.confidence_function,a.mark_deprecated=e.mark_deprecated,a.slider_bar_id=a.name.replaceLowerConcat(" ","-"),s.config.hasOwnProperty(a.name.replaceLowerConcat(" ","_","_default_value"))&&(e.default_value=s.config[a.name.replaceLowerConcat(" ","_","_default_value")]),e.hasOwnProperty("default_value")){if(!(0<=e.default_value&&e.default_value<=1))throw Error("Invalid defalut keypoint slider value given");a.default_value=e.default_value}var t=s.state.current_subtask,t=s.subtasks[t];return a.check_for_human_deprecated(t),s.config.filter_annotations_on_load&&a.deprecate_annotations(s,a.default_value,!1),$(document).on("input","#"+a.name.replaceLowerConcat(" ","-"),function(t){t=t.currentTarget.value/100;a.deprecate_annotations(s,t)}),$(document).on("click","a."+a.name.replaceLowerConcat(" ","-")+"-button",function(t){var t=t.currentTarget.outerText,e=document.getElementById(a.name.replaceLowerConcat(" ","-"));if("+"==t)e.value=(e.valueAsNumber+1).toString();else{if("-"!=t)throw Error("Unknown Keypoint Slider Button Pressed");e.value=(e.valueAsNumber-1).toString()}$("#"+e.id+"-label").text(Math.round(e.valueAsNumber)+"%"),a.deprecate_annotations(s,e.valueAsNumber/100),s.redraw_all_annotations(null,null,!1)}),$(document).on("keypress",function(t){t.key==e.keybinds.increment&&document.getElementsByClassName(a.name.replaceLowerConcat(" ","-")+"-button inc")[0].click(),t.key==e.keybinds.decrement&&document.getElementsByClassName(a.name.replaceLowerConcat(" ","-")+"-button dec")[0].click()}),a}e.KeypointSliderItem=h;n(L,S=s),L.prototype.get_html=function(){var t,e="";for(t in this.submit_buttons){var s=void 0,s=void 0!==this.submit_buttons[t].color?this.submit_buttons[t].color:"rgba(255, 166, 0, 0.739)";e+='\n            <button \n            id="'.concat(this.submit_buttons[t].name.replaceLowerConcat(" ","-"),'" \n            class="submit-button" \n            style="\n                display: block;\n                height: 1.2em;\n                width: 6em;\n                font-size: 1.5em;\n                color: white;\n                background-color: ').concat(s,"; \n                margin-left: auto;\n                margin-right: auto;\n                margin-top: 0.5em;\n                margin-bottom: 0.5em;\n                padding: 1em;\n                border: 1px solid ").concat(s,';\n                border-radius: 0.5em;\n                cursor: pointer;\n            ">\n                ').concat(this.submit_buttons[t].name,"\n            </button>\n            ")}return e};var S,h=L;function L(l){var t,e=S.call(this)||this,s=(e.submit_buttons=l.config.submit_buttons,"function"==typeof e.submit_buttons&&(e.submit_buttons=[{name:"Submit",hook:e.submit_buttons}]),this);for(t in e.submit_buttons)!function(r){$(document).on("click","#"+s.submit_buttons[r].name.replaceLowerConcat(" ","-"),function(t){return i(e,void 0,void 0,function(){var e,s,a,n,i,o;return c(this,function(t){switch(t.label){case 0:for(o in e=document.getElementById(this.submit_buttons[r].name.replaceLowerConcat(" ","-")),s=Array.from(document.getElementsByClassName("submit-button")))s[o].disabled=!0,s[o].style.filter="opacity(0.7)";for(i in e.innerText="",(a=document.createElement("div")).className="lds-dual-ring",e.appendChild(a),n={task_meta:l.config.task_meta,annotations:{}},l.subtasks)for(n.annotations[i]=[],o=0;o<l.subtasks[i].annotations.ordering.length;o++)n.annotations[i].push(l.subtasks[i].annotations.access[l.subtasks[i].annotations.ordering[o]]);return[4,this.submit_buttons[r].hook(n)];case 1:for(o in t.sent(),e.innerText=this.submit_buttons[r].name,s)s[o].disabled=!1,s[o].style.filter="opacity(1)";return[2]}})})})}(t);return e}e.SubmitButtons=h},755:function(Qe,ts){var es;
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
!function(t,e){"use strict";"object"==typeof Qe.exports?Qe.exports=t.document?e(t,!0):function(t){if(t.document)return e(t);throw new Error("jQuery requires a window with a document")}:e(t)}("undefined"!=typeof window?window:this,function(y,I){"use strict";function m(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item}function _(t){return null!=t&&t===t.window}var e=[],j=Object.getPrototypeOf,r=e.slice,R=e.flat?function(t){return e.flat.call(t)}:function(t){return e.concat.apply([],t)},q=e.push,P=e.indexOf,B={},H=B.toString,W=B.hasOwnProperty,J=W.toString,X=J.call(Object),b={},w=y.document,Y={type:!0,src:!0,nonce:!0,noModule:!0};function F(t,e,s){var a,n,i=(s=s||w).createElement("script");if(i.text=t,e)for(a in Y)(n=e[a]||e.getAttribute&&e.getAttribute(a))&&i.setAttribute(a,n);s.head.appendChild(i).parentNode.removeChild(i)}function f(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?B[H.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)};function U(t){var e=!!t&&"length"in t&&t.length,s=f(t);return!m(t)&&!_(t)&&("array"===s||0===e||"number"==typeof e&&0<e&&e-1 in t)}x.fn=x.prototype={jquery:"3.6.0",constructor:x,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=x.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return x.each(this,t)},map:function(s){return this.pushStack(x.map(this,function(t,e){return s.call(t,e,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:q,sort:e.sort,splice:e.splice},x.extend=x.fn.extend=function(){var t,e,s,a,n,i=arguments[0]||{},o=1,r=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[o]||{},o++),"object"==typeof i||m(i)||(i={}),o===r&&(i=this,o--);o<r;o++)if(null!=(t=arguments[o]))for(e in t)s=t[e],"__proto__"!==e&&i!==s&&(l&&s&&(x.isPlainObject(s)||(a=Array.isArray(s)))?(n=i[e],n=a&&!Array.isArray(n)?[]:a||x.isPlainObject(n)?n:{},a=!1,i[e]=x.extend(l,n,s)):void 0!==s&&(i[e]=s));return i},x.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==H.call(t))&&(!(t=j(t))||"function"==typeof(t=W.call(t,"constructor")&&t.constructor)&&J.call(t)===X)},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e,s){F(t,{nonce:e&&e.nonce},s)},each:function(t,e){var s,a=0;if(U(t))for(s=t.length;a<s&&!1!==e.call(t[a],a,t[a]);a++);else for(a in t)if(!1===e.call(t[a],a,t[a]))break;return t},makeArray:function(t,e){e=e||[];return null!=t&&(U(Object(t))?x.merge(e,"string"==typeof t?[t]:t):q.call(e,t)),e},inArray:function(t,e,s){return null==e?-1:P.call(e,t,s)},merge:function(t,e){for(var s=+e.length,a=0,n=t.length;a<s;a++)t[n++]=e[a];return t.length=n,t},grep:function(t,e,s){for(var a=[],n=0,i=t.length,o=!s;n<i;n++)!e(t[n],n)!=o&&a.push(t[n]);return a},map:function(t,e,s){var a,n,i=0,o=[];if(U(t))for(a=t.length;i<a;i++)null!=(n=e(t[i],i,s))&&o.push(n);else for(i in t)null!=(n=e(t[i],i,s))&&o.push(n);return R(o)},guid:1,support:b}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=e[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){B["[object "+e+"]"]=e.toLowerCase()});function a(t,e,s){for(var a=[],n=void 0!==s;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&x(t).is(s))break;a.push(t)}return a}function V(t,e){for(var s=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&s.push(t);return s}var t=
/*!
 * Sizzle CSS Selector Engine v2.3.6
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2021-02-16
 */
function(I){function u(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function j(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function R(){w()}var t,p,v,i,q,h,P,B,y,l,c,w,x,s,C,f,a,n,_,T="sizzle"+ +new Date,d=I.document,z=0,H=0,W=D(),J=D(),X=D(),b=D(),Y=function(t,e){return t===e&&(c=!0),0},F={}.hasOwnProperty,e=[],U=e.pop,V=e.push,S=e.push,G=e.slice,m=function(t,e){for(var s=0,a=t.length;s<a;s++)if(t[s]===e)return s;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",o="[\\x20\\t\\r\\n\\f]",r="(?:\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Z="\\["+o+"*("+r+")(?:"+o+"*([*^$|!~]?=)"+o+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+r+"))|)"+o+"*\\]",Q=":("+r+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Z+")*)|.*)\\)|)",tt=new RegExp(o+"+","g"),g=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g"),et=new RegExp("^"+o+"*,"+o+"*"),st=new RegExp("^"+o+"*([>+~]|"+o+")"+o+"*"),at=new RegExp(o+"|>"),nt=new RegExp(Q),it=new RegExp("^"+r+"$"),k={ID:new RegExp("^#("+r+")"),CLASS:new RegExp("^\\.("+r+")"),TAG:new RegExp("^("+r+"|[*])"),ATTR:new RegExp("^"+Z),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+o+"*(even|odd|(([+-]|)(\\d*)n|)"+o+"*(?:([+-]|)"+o+"*(\\d+)|))"+o+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+o+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+o+"*((?:-\\d)?\\d*)"+o+"*\\)|)(?=[^-]|$)","i")},ot=/HTML$/i,rt=/^(?:input|select|textarea|button)$/i,lt=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,ct=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dt=/[+~]/,L=new RegExp("\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\([^\\r\\n\\f])","g"),ut=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,pt=mt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{S.apply(e=G.call(d.childNodes),d.childNodes),e[d.childNodes.length].nodeType}catch(t){S={apply:e.length?function(t,e){V.apply(t,G.call(e))}:function(t,e){for(var s=t.length,a=0;t[s++]=e[a++];);t.length=s-1}}}function A(e,t,s,a){var n,i,o,r,l,c,d=t&&t.ownerDocument,u=t?t.nodeType:9;if(s=s||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return s;if(!a&&(w(t),t=t||x,C)){if(11!==u&&(r=ct.exec(e)))if(n=r[1]){if(9===u){if(!(c=t.getElementById(n)))return s;if(c.id===n)return s.push(c),s}else if(d&&(c=d.getElementById(n))&&_(t,c)&&c.id===n)return s.push(c),s}else{if(r[2])return S.apply(s,t.getElementsByTagName(e)),s;if((n=r[3])&&p.getElementsByClassName&&t.getElementsByClassName)return S.apply(s,t.getElementsByClassName(n)),s}if(p.qsa&&!b[e+" "]&&(!f||!f.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(c=e,d=t,1===u&&(at.test(e)||st.test(e))){for((d=dt.test(e)&&bt(t.parentNode)||t)===t&&p.scope||((o=t.getAttribute("id"))?o=o.replace(ut,j):t.setAttribute("id",o=T)),i=(l=h(e)).length;i--;)l[i]=(o?"#"+o:":scope")+" "+M(l[i]);c=l.join(",")}try{return S.apply(s,d.querySelectorAll(c)),s}catch(t){b(e,!0)}finally{o===T&&t.removeAttribute("id")}}}return B(e.replace(g,"$1"),t,s,a)}function D(){var s=[];function a(t,e){return s.push(t+" ")>v.cacheLength&&delete a[s.shift()],a[t+" "]=e}return a}function E(t){return t[T]=!0,t}function N(t){var e=x.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function ht(t,e){for(var s=t.split("|"),a=s.length;a--;)v.attrHandle[s[a]]=e}function ft(t,e){var s=e&&t,a=s&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(a)return a;if(s)for(;s=s.nextSibling;)if(s===e)return-1;return t?1:-1}function _t(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&pt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function O(o){return E(function(i){return i=+i,E(function(t,e){for(var s,a=o([],t.length,i),n=a.length;n--;)t[s=a[n]]&&(t[s]=!(e[s]=t[s]))})})}function bt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=A.support={},q=A.isXML=function(t){var e=t&&t.namespaceURI,t=t&&(t.ownerDocument||t).documentElement;return!ot.test(e||t&&t.nodeName||"HTML")},w=A.setDocument=function(t){var t=t?t.ownerDocument||t:d;return t!=x&&9===t.nodeType&&t.documentElement&&(s=(x=t).documentElement,C=!q(x),d!=x&&(t=x.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",R,!1):t.attachEvent&&t.attachEvent("onunload",R)),p.scope=N(function(t){return s.appendChild(t).appendChild(x.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),p.attributes=N(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=N(function(t){return t.appendChild(x.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=$.test(x.getElementsByClassName),p.getById=N(function(t){return s.appendChild(t).id=T,!x.getElementsByName||!x.getElementsByName(T).length}),p.getById?(v.filter.ID=function(t){var e=t.replace(L,u);return function(t){return t.getAttribute("id")===e}},v.find.ID=function(t,e){if(void 0!==e.getElementById&&C)return(e=e.getElementById(t))?[e]:[]}):(v.filter.ID=function(t){var e=t.replace(L,u);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},v.find.ID=function(t,e){if(void 0!==e.getElementById&&C){var s,a,n,i=e.getElementById(t);if(i){if((s=i.getAttributeNode("id"))&&s.value===t)return[i];for(n=e.getElementsByName(t),a=0;i=n[a++];)if((s=i.getAttributeNode("id"))&&s.value===t)return[i]}return[]}}),v.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var s,a=[],n=0,i=e.getElementsByTagName(t);if("*"!==t)return i;for(;s=i[n++];)1===s.nodeType&&a.push(s);return a},v.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&C)return e.getElementsByClassName(t)},a=[],f=[],(p.qsa=$.test(x.querySelectorAll))&&(N(function(t){var e;s.appendChild(t).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+o+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||f.push("\\["+o+"*(?:value|"+K+")"),t.querySelectorAll("[id~="+T+"-]").length||f.push("~="),(e=x.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+o+"*name"+o+"*="+o+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||f.push(":checked"),t.querySelectorAll("a#"+T+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),N(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=x.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&f.push("name"+o+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),s.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),f.push(",.*:")})),(p.matchesSelector=$.test(n=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&N(function(t){p.disconnectedMatch=n.call(t,"*"),n.call(t,"[s!='']:x"),a.push("!=",Q)}),f=f.length&&new RegExp(f.join("|")),a=a.length&&new RegExp(a.join("|")),t=$.test(s.compareDocumentPosition),_=t||$.test(s.contains)?function(t,e){var s=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(s.contains?s.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=t?function(t,e){var s;return t===e?(c=!0,0):(s=!t.compareDocumentPosition-!e.compareDocumentPosition)||(1&(s=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===s?t==x||t.ownerDocument==d&&_(d,t)?-1:e==x||e.ownerDocument==d&&_(d,e)?1:l?m(l,t)-m(l,e):0:4&s?-1:1)}:function(t,e){if(t===e)return c=!0,0;var s,a=0,n=t.parentNode,i=e.parentNode,o=[t],r=[e];if(!n||!i)return t==x?-1:e==x?1:n?-1:i?1:l?m(l,t)-m(l,e):0;if(n===i)return ft(t,e);for(s=t;s=s.parentNode;)o.unshift(s);for(s=e;s=s.parentNode;)r.unshift(s);for(;o[a]===r[a];)a++;return a?ft(o[a],r[a]):o[a]==d?-1:r[a]==d?1:0}),x},A.matches=function(t,e){return A(t,null,null,e)},A.matchesSelector=function(t,e){if(w(t),p.matchesSelector&&C&&!b[e+" "]&&(!a||!a.test(e))&&(!f||!f.test(e)))try{var s=n.call(t,e);if(s||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return s}catch(t){b(e,!0)}return 0<A(e,x,null,[t]).length},A.contains=function(t,e){return(t.ownerDocument||t)!=x&&w(t),_(t,e)},A.attr=function(t,e){(t.ownerDocument||t)!=x&&w(t);var s=v.attrHandle[e.toLowerCase()],s=s&&F.call(v.attrHandle,e.toLowerCase())?s(t,e,!C):void 0;return void 0!==s?s:p.attributes||!C?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},A.escape=function(t){return(t+"").replace(ut,j)},A.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},A.uniqueSort=function(t){var e,s=[],a=0,n=0;if(c=!p.detectDuplicates,l=!p.sortStable&&t.slice(0),t.sort(Y),c){for(;e=t[n++];)e===t[n]&&(a=s.push(n));for(;a--;)t.splice(s[a],1)}return l=null,t},i=A.getText=function(t){var e,s="",a=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)s+=i(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[a++];)s+=i(e);return s},(v=A.selectors={cacheLength:50,createPseudo:E,match:k,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(L,u),t[3]=(t[3]||t[4]||t[5]||"").replace(L,u),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||A.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&A.error(t[0]),t},PSEUDO:function(t){var e,s=!t[6]&&t[2];return k.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":s&&nt.test(s)&&(e=h(s,!0))&&(e=s.indexOf(")",s.length-e)-s.length)&&(t[0]=t[0].slice(0,e),t[2]=s.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(L,u).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+o+")"+t+"("+o+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,s,a){return function(t){t=A.attr(t,e);return null==t?"!="===s:!s||(t+="","="===s?t===a:"!="===s?t!==a:"^="===s?a&&0===t.indexOf(a):"*="===s?a&&-1<t.indexOf(a):"$="===s?a&&t.slice(-a.length)===a:"~="===s?-1<(" "+t.replace(tt," ")+" ").indexOf(a):"|="===s&&(t===a||t.slice(0,a.length+1)===a+"-"))}},CHILD:function(f,t,e,_,b){var g="nth"!==f.slice(0,3),m="last"!==f.slice(-4),k="of-type"===t;return 1===_&&0===b?function(t){return!!t.parentNode}:function(t,e,s){var a,n,i,o,r,l,c=g!=m?"nextSibling":"previousSibling",d=t.parentNode,u=k&&t.nodeName.toLowerCase(),p=!s&&!k,h=!1;if(d){if(g){for(;c;){for(o=t;o=o[c];)if(k?o.nodeName.toLowerCase()===u:1===o.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[m?d.firstChild:d.lastChild],m&&p){for(h=(r=(a=(n=(i=(o=d)[T]||(o[T]={}))[o.uniqueID]||(i[o.uniqueID]={}))[f]||[])[0]===z&&a[1])&&a[2],o=r&&d.childNodes[r];o=++r&&o&&o[c]||(h=r=0)||l.pop();)if(1===o.nodeType&&++h&&o===t){n[f]=[z,r,h];break}}else if(!1===(h=p?r=(a=(n=(i=(o=t)[T]||(o[T]={}))[o.uniqueID]||(i[o.uniqueID]={}))[f]||[])[0]===z&&a[1]:h))for(;(o=++r&&o&&o[c]||(h=r=0)||l.pop())&&((k?o.nodeName.toLowerCase()!==u:1!==o.nodeType)||!++h||(p&&((n=(i=o[T]||(o[T]={}))[o.uniqueID]||(i[o.uniqueID]={}))[f]=[z,h]),o!==t)););return(h-=b)===_||h%_==0&&0<=h/_}}},PSEUDO:function(t,i){var e,o=v.pseudos[t]||v.setFilters[t.toLowerCase()]||A.error("unsupported pseudo: "+t);return o[T]?o(i):1<o.length?(e=[t,t,"",i],v.setFilters.hasOwnProperty(t.toLowerCase())?E(function(t,e){for(var s,a=o(t,i),n=a.length;n--;)t[s=m(t,a[n])]=!(e[s]=a[n])}):function(t){return o(t,0,e)}):o}},pseudos:{not:E(function(t){var a=[],n=[],r=P(t.replace(g,"$1"));return r[T]?E(function(t,e,s,a){for(var n,i=r(t,null,a,[]),o=t.length;o--;)(n=i[o])&&(t[o]=!(e[o]=n))}):function(t,e,s){return a[0]=t,r(a,null,s,n),a[0]=null,!n.pop()}}),has:E(function(e){return function(t){return 0<A(e,t).length}}),contains:E(function(e){return e=e.replace(L,u),function(t){return-1<(t.textContent||i(t)).indexOf(e)}}),lang:E(function(s){return it.test(s||"")||A.error("unsupported lang: "+s),s=s.replace(L,u).toLowerCase(),function(t){var e;do{if(e=C?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===s||0===e.indexOf(s+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=I.location&&I.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===s},focus:function(t){return t===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:_t(!1),disabled:_t(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!v.pseudos.empty(t)},header:function(t){return lt.test(t.nodeName)},input:function(t){return rt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:O(function(){return[0]}),last:O(function(t,e){return[e-1]}),eq:O(function(t,e,s){return[s<0?s+e:s]}),even:O(function(t,e){for(var s=0;s<e;s+=2)t.push(s);return t}),odd:O(function(t,e){for(var s=1;s<e;s+=2)t.push(s);return t}),lt:O(function(t,e,s){for(var a=s<0?s+e:e<s?e:s;0<=--a;)t.push(a);return t}),gt:O(function(t,e,s){for(var a=s<0?s+e:s;++a<e;)t.push(a);return t})}}).pseudos.nth=v.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})v.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})v.pseudos[t]=function(s){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===s}}(t);function gt(){}function M(t){for(var e=0,s=t.length,a="";e<s;e++)a+=t[e].value;return a}function mt(o,t,e){var r=t.dir,l=t.next,c=l||r,d=e&&"parentNode"===c,u=H++;return t.first?function(t,e,s){for(;t=t[r];)if(1===t.nodeType||d)return o(t,e,s);return!1}:function(t,e,s){var a,n,i=[z,u];if(s){for(;t=t[r];)if((1===t.nodeType||d)&&o(t,e,s))return!0}else for(;t=t[r];)if(1===t.nodeType||d)if(n=(n=t[T]||(t[T]={}))[t.uniqueID]||(n[t.uniqueID]={}),l&&l===t.nodeName.toLowerCase())t=t[r]||t;else{if((a=n[c])&&a[0]===z&&a[1]===u)return i[2]=a[2];if((n[c]=i)[2]=o(t,e,s))return!0}return!1}}function kt(n){return 1<n.length?function(t,e,s){for(var a=n.length;a--;)if(!n[a](t,e,s))return!1;return!0}:n[0]}function vt(t,e,s,a,n){for(var i,o=[],r=0,l=t.length,c=null!=e;r<l;r++)!(i=t[r])||s&&!s(i,a,n)||(o.push(i),c&&e.push(r));return o}function yt(h,f,_,b,g,t){return b&&!b[T]&&(b=yt(b)),g&&!g[T]&&(g=yt(g,t)),E(function(t,e,s,a){var n,i,o,r=[],l=[],c=e.length,d=t||function(t,e,s){for(var a=0,n=e.length;a<n;a++)A(t,e[a],s);return s}(f||"*",s.nodeType?[s]:s,[]),u=!h||!t&&f?d:vt(d,r,h,s,a),p=_?g||(t?h:c||b)?[]:e:u;if(_&&_(u,p,s,a),b)for(n=vt(p,l),b(n,[],s,a),i=n.length;i--;)(o=n[i])&&(p[l[i]]=!(u[l[i]]=o));if(t){if(g||h){if(g){for(n=[],i=p.length;i--;)(o=p[i])&&n.push(u[i]=o);g(null,p=[],n,a)}for(i=p.length;i--;)(o=p[i])&&-1<(n=g?m(t,o):r[i])&&(t[n]=!(e[n]=o))}}else p=vt(p===e?p.splice(c,p.length):p),g?g(null,e,p,a):S.apply(e,p)})}function wt(b,g){function t(t,e,s,a,n){var i,o,r,l=0,c="0",d=t&&[],u=[],p=y,h=t||k&&v.find.TAG("*",n),f=z+=null==p?1:Math.random()||.1,_=h.length;for(n&&(y=e==x||e||n);c!==_&&null!=(i=h[c]);c++){if(k&&i){for(o=0,e||i.ownerDocument==x||(w(i),s=!C);r=b[o++];)if(r(i,e||x,s)){a.push(i);break}n&&(z=f)}m&&((i=!r&&i)&&l--,t&&d.push(i))}if(l+=c,m&&c!==l){for(o=0;r=g[o++];)r(d,u,e,s);if(t){if(0<l)for(;c--;)d[c]||u[c]||(u[c]=U.call(a));u=vt(u)}S.apply(a,u),n&&!t&&0<u.length&&1<l+g.length&&A.uniqueSort(a)}return n&&(z=f,y=p),d}var m=0<g.length,k=0<b.length;return m?E(t):t}return gt.prototype=v.filters=v.pseudos,v.setFilters=new gt,h=A.tokenize=function(t,e){var s,a,n,i,o,r,l,c=J[t+" "];if(c)return e?0:c.slice(0);for(o=t,r=[],l=v.preFilter;o;){for(i in s&&!(a=et.exec(o))||(a&&(o=o.slice(a[0].length)||o),r.push(n=[])),s=!1,(a=st.exec(o))&&(s=a.shift(),n.push({value:s,type:a[0].replace(g," ")}),o=o.slice(s.length)),v.filter)!(a=k[i].exec(o))||l[i]&&!(a=l[i](a))||(s=a.shift(),n.push({value:s,type:i,matches:a}),o=o.slice(s.length));if(!s)break}return e?o.length:o?A.error(t):J(t,r).slice(0)},P=A.compile=function(t,e){var s,a=[],n=[],i=X[t+" "];if(!i){for(s=(e=e||h(t)).length;s--;)((i=function t(e){for(var a,s,n,i=e.length,o=v.relative[e[0].type],r=o||v.relative[" "],l=o?1:0,c=mt(function(t){return t===a},r,!0),d=mt(function(t){return-1<m(a,t)},r,!0),u=[function(t,e,s){return t=!o&&(s||e!==y)||((a=e).nodeType?c:d)(t,e,s),a=null,t}];l<i;l++)if(s=v.relative[e[l].type])u=[mt(kt(u),s)];else{if((s=v.filter[e[l].type].apply(null,e[l].matches))[T]){for(n=++l;n<i&&!v.relative[e[n].type];n++);return yt(1<l&&kt(u),1<l&&M(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(g,"$1"),s,l<n&&t(e.slice(l,n)),n<i&&t(e=e.slice(n)),n<i&&M(e))}u.push(s)}return kt(u)}(e[s]))[T]?a:n).push(i);(i=X(t,wt(n,a))).selector=t}return i},B=A.select=function(t,e,s,a){var n,i,o,r,l,c="function"==typeof t&&t,d=!a&&h(t=c.selector||t);if(s=s||[],1===d.length){if(2<(i=d[0]=d[0].slice(0)).length&&"ID"===(o=i[0]).type&&9===e.nodeType&&C&&v.relative[i[1].type]){if(!(e=(v.find.ID(o.matches[0].replace(L,u),e)||[])[0]))return s;c&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(n=k.needsContext.test(t)?0:i.length;n--&&(o=i[n],!v.relative[r=o.type]);)if((l=v.find[r])&&(a=l(o.matches[0].replace(L,u),dt.test(i[0].type)&&bt(e.parentNode)||e))){if(i.splice(n,1),t=a.length&&M(i))break;return S.apply(s,a),s}}return(c||P(t,d))(a,e,!C,s,!e||dt.test(t)&&bt(e.parentNode)||e),s},p.sortStable=T.split("").sort(Y).join("")===T,p.detectDuplicates=!!c,w(),p.sortDetached=N(function(t){return 1&t.compareDocumentPosition(x.createElement("fieldset"))}),N(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,s){if(!s)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&N(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,s){if(!s&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),N(function(t){return null==t.getAttribute("disabled")})||ht(K,function(t,e,s){if(!s)return!0===t[e]?e.toLowerCase():(s=t.getAttributeNode(e))&&s.specified?s.value:null}),A}(y),G=(x.find=t,x.expr=t.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=t.uniqueSort,x.text=t.getText,x.isXMLDoc=t.isXML,x.contains=t.contains,x.escapeSelector=t.escape,x.expr.match.needsContext);function l(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var K=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Z(t,s,a){return m(s)?x.grep(t,function(t,e){return!!s.call(t,e,t)!==a}):s.nodeType?x.grep(t,function(t){return t===s!==a}):"string"!=typeof s?x.grep(t,function(t){return-1<P.call(s,t)!==a}):x.filter(s,t,a)}x.filter=function(t,e,s){var a=e[0];return s&&(t=":not("+t+")"),1===e.length&&1===a.nodeType?x.find.matchesSelector(a,t)?[a]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,s,a=this.length,n=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<a;e++)if(x.contains(n[e],this))return!0}));for(s=this.pushStack([]),e=0;e<a;e++)x.find(t,n[e],s);return 1<a?x.uniqueSort(s):s},filter:function(t){return this.pushStack(Z(this,t||[],!1))},not:function(t){return this.pushStack(Z(this,t||[],!0))},is:function(t){return!!Z(this,"string"==typeof t&&G.test(t)?x(t):t||[],!1).length}});var Q,tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,et=((x.fn.init=function(t,e,s){if(t){if(s=s||Q,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==s.ready?s.ready(t):t(x):x.makeArray(t,this);if(!(a="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:tt.exec(t))||!a[1]&&e)return(!e||e.jquery?e||s:this.constructor(e)).find(t);if(a[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(a[1],e&&e.nodeType?e.ownerDocument||e:w,!0)),K.test(a[1])&&x.isPlainObject(e))for(var a in e)m(this[a])?this[a](e[a]):this.attr(a,e[a])}else(s=w.getElementById(a[2]))&&(this[0]=s,this.length=1)}return this}).prototype=x.fn,Q=x(w),/^(?:parents|prev(?:Until|All))/),st={children:!0,contents:!0,next:!0,prev:!0};function at(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),s=e.length;return this.filter(function(){for(var t=0;t<s;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var s,a=0,n=this.length,i=[],o="string"!=typeof t&&x(t);if(!G.test(t))for(;a<n;a++)for(s=this[a];s&&s!==e;s=s.parentNode)if(s.nodeType<11&&(o?-1<o.index(s):1===s.nodeType&&x.find.matchesSelector(s,t))){i.push(s);break}return this.pushStack(1<i.length?x.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?P.call(x(t),this[0]):P.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return a(t,"parentNode")},parentsUntil:function(t,e,s){return a(t,"parentNode",s)},next:function(t){return at(t,"nextSibling")},prev:function(t){return at(t,"previousSibling")},nextAll:function(t){return a(t,"nextSibling")},prevAll:function(t){return a(t,"previousSibling")},nextUntil:function(t,e,s){return a(t,"nextSibling",s)},prevUntil:function(t,e,s){return a(t,"previousSibling",s)},siblings:function(t){return V((t.parentNode||{}).firstChild,t)},children:function(t){return V(t.firstChild)},contents:function(t){return null!=t.contentDocument&&j(t.contentDocument)?t.contentDocument:(l(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(a,n){x.fn[a]=function(t,e){var s=x.map(this,n,t);return(e="Until"!==a.slice(-5)?t:e)&&"string"==typeof e&&(s=x.filter(e,s)),1<this.length&&(st[a]||x.uniqueSort(s),et.test(a)&&s.reverse()),this.pushStack(s)}});var C=/[^\x20\t\r\n\f]+/g;function d(t){return t}function nt(t){throw t}function it(t,e,s,a){var n;try{t&&m(n=t.promise)?n.call(t).done(e).fail(s):t&&m(n=t.then)?n.call(t,e,s):e.apply(void 0,[t].slice(a))}catch(t){s.apply(void 0,[t])}}x.Callbacks=function(a){var t,s;a="string"==typeof a?(t=a,s={},x.each(t.match(C)||[],function(t,e){s[e]=!0}),s):x.extend({},a);function n(){for(r=r||a.once,o=i=!0;c.length;d=-1)for(e=c.shift();++d<l.length;)!1===l[d].apply(e[0],e[1])&&a.stopOnFalse&&(d=l.length,e=!1);a.memory||(e=!1),i=!1,r&&(l=e?[]:"")}var i,e,o,r,l=[],c=[],d=-1,u={add:function(){return l&&(e&&!i&&(d=l.length-1,c.push(e)),function s(t){x.each(t,function(t,e){m(e)?a.unique&&u.has(e)||l.push(e):e&&e.length&&"string"!==f(e)&&s(e)})}(arguments),e&&!i&&n()),this},remove:function(){return x.each(arguments,function(t,e){for(var s;-1<(s=x.inArray(e,l,s));)l.splice(s,1),s<=d&&d--}),this},has:function(t){return t?-1<x.inArray(t,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return r=c=[],l=e="",this},disabled:function(){return!l},lock:function(){return r=c=[],e||i||(l=e=""),this},locked:function(){return!!r},fireWith:function(t,e){return r||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),i||n()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},x.extend({Deferred:function(t){var i=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var n=arguments;return x.Deferred(function(a){x.each(i,function(t,e){var s=m(n[e[4]])&&n[e[4]];r[e[1]](function(){var t=s&&s.apply(this,arguments);t&&m(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,s?[t]:arguments)})}),n=null}).promise()},then:function(e,s,a){var l=0;function c(n,i,o,r){return function(){function t(){var t,e;if(!(n<l)){if((t=o.apply(s,a))===i.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,m(e)?r?e.call(t,c(l,i,d,r),c(l,i,nt,r)):(l++,e.call(t,c(l,i,d,r),c(l,i,nt,r),c(l,i,d,i.notifyWith))):(o!==d&&(s=void 0,a=[t]),(r||i.resolveWith)(s,a))}}var s=this,a=arguments,e=r?t:function(){try{t()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,e.stackTrace),l<=n+1&&(o!==nt&&(s=void 0,a=[t]),i.rejectWith(s,a))}};n?e():(x.Deferred.getStackHook&&(e.stackTrace=x.Deferred.getStackHook()),y.setTimeout(e))}}return x.Deferred(function(t){i[0][3].add(c(0,t,m(a)?a:d,t.notifyWith)),i[1][3].add(c(0,t,m(e)?e:d)),i[2][3].add(c(0,t,m(s)?s:nt))}).promise()},promise:function(t){return null!=t?x.extend(t,o):o}},r={};return x.each(i,function(t,e){var s=e[2],a=e[5];o[e[1]]=s.add,a&&s.add(function(){n=a},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),s.add(e[3].fire),r[e[0]]=function(){return r[e[0]+"With"](this===r?void 0:this,arguments),this},r[e[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(t){function e(e){return function(t){n[e]=this,i[e]=1<arguments.length?r.call(arguments):t,--s||o.resolveWith(n,i)}}var s=arguments.length,a=s,n=Array(a),i=r.call(arguments),o=x.Deferred();if(s<=1&&(it(t,o.done(e(a)).resolve,o.reject,!s),"pending"===o.state()||m(i[a]&&i[a].then)))return o.then();for(;a--;)it(i[a],e(a),o.reject);return o.promise()}});var ot=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,rt=(x.Deferred.exceptionHook=function(t,e){y.console&&y.console.warn&&t&&ot.test(t.name)&&y.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},x.readyException=function(t){y.setTimeout(function(){throw t})},x.Deferred());function lt(){w.removeEventListener("DOMContentLoaded",lt),y.removeEventListener("load",lt),x.ready()}x.fn.ready=function(t){return rt.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0)!==t&&0<--x.readyWait||rt.resolveWith(w,[x])}}),x.ready.then=rt.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?y.setTimeout(x.ready):(w.addEventListener("DOMContentLoaded",lt),y.addEventListener("load",lt));function u(t,e,s,a,n,i,o){var r=0,l=t.length,c=null==s;if("object"===f(s))for(r in n=!0,s)u(t,e,r,s[r],!0,i,o);else if(void 0!==a&&(n=!0,m(a)||(o=!0),e=c?o?(e.call(t,a),null):(c=e,function(t,e,s){return c.call(x(t),s)}):e))for(;r<l;r++)e(t[r],s,o?a:a.call(t[r],r,e(t[r],s)));return n?t:c?e.call(t):l?e(t[0],s):i}var ct=/^-ms-/,dt=/-([a-z])/g;function ut(t,e){return e.toUpperCase()}function k(t){return t.replace(ct,"ms-").replace(dt,ut)}function g(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function pt(){this.expando=x.expando+pt.uid++}pt.uid=1,pt.prototype={cache:function(t){var e=t[this.expando];return e||(e={},g(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,s){var a,n=this.cache(t);if("string"==typeof e)n[k(e)]=s;else for(a in e)n[k(a)]=e[a];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][k(e)]},access:function(t,e,s){return void 0===e||e&&"string"==typeof e&&void 0===s?this.get(t,e):(this.set(t,e,s),void 0!==s?s:e)},remove:function(t,e){var s,a=t[this.expando];if(void 0!==a){if(void 0!==e){s=(e=Array.isArray(e)?e.map(k):(e=k(e))in a?[e]:e.match(C)||[]).length;for(;s--;)delete a[e[s]]}void 0!==e&&!x.isEmptyObject(a)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var v=new pt,c=new pt,ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ft=/[A-Z]/g;function _t(t,e,s){var a,n;if(void 0===s&&1===t.nodeType)if(a="data-"+e.replace(ft,"-$&").toLowerCase(),"string"==typeof(s=t.getAttribute(a))){try{s="true"===(n=s)||"false"!==n&&("null"===n?null:n===+n+""?+n:ht.test(n)?JSON.parse(n):n)}catch(t){}c.set(t,e,s)}else s=void 0;return s}x.extend({hasData:function(t){return c.hasData(t)||v.hasData(t)},data:function(t,e,s){return c.access(t,e,s)},removeData:function(t,e){c.remove(t,e)},_data:function(t,e,s){return v.access(t,e,s)},_removeData:function(t,e){v.remove(t,e)}}),x.fn.extend({data:function(s,t){var e,a,n,i=this[0],o=i&&i.attributes;if(void 0!==s)return"object"==typeof s?this.each(function(){c.set(this,s)}):u(this,function(t){var e;if(i&&void 0===t)return void 0!==(e=c.get(i,s))||void 0!==(e=_t(i,s))?e:void 0;this.each(function(){c.set(this,s,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(n=c.get(i),1===i.nodeType&&!v.get(i,"hasDataAttrs"))){for(e=o.length;e--;)o[e]&&0===(a=o[e].name).indexOf("data-")&&(a=k(a.slice(5)),_t(i,a,n[a]));v.set(i,"hasDataAttrs",!0)}return n},removeData:function(t){return this.each(function(){c.remove(this,t)})}}),x.extend({queue:function(t,e,s){var a;if(t)return a=v.get(t,e=(e||"fx")+"queue"),s&&(!a||Array.isArray(s)?a=v.access(t,e,x.makeArray(s)):a.push(s)),a||[]},dequeue:function(t,e){e=e||"fx";var s=x.queue(t,e),a=s.length,n=s.shift(),i=x._queueHooks(t,e);"inprogress"===n&&(n=s.shift(),a--),n&&("fx"===e&&s.unshift("inprogress"),delete i.stop,n.call(t,function(){x.dequeue(t,e)},i)),!a&&i&&i.empty.fire()},_queueHooks:function(t,e){var s=e+"queueHooks";return v.get(t,s)||v.access(t,s,{empty:x.Callbacks("once memory").add(function(){v.remove(t,[e+"queue",s])})})}}),x.fn.extend({queue:function(e,s){var t=2;return"string"!=typeof e&&(s=e,e="fx",t--),arguments.length<t?x.queue(this[0],e):void 0===s?this:this.each(function(){var t=x.queue(this,e,s);x._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&x.dequeue(this,e)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function s(){--n||i.resolveWith(o,[o])}var a,n=1,i=x.Deferred(),o=this,r=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)(a=v.get(o[r],t+"queueHooks"))&&a.empty&&(n++,a.empty.add(s));return s(),i.promise(e)}});function bt(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&z(t)&&"none"===x.css(t,"display")}var t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,gt=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),p=["Top","Right","Bottom","Left"],T=w.documentElement,z=function(t){return x.contains(t.ownerDocument,t)},mt={composed:!0};T.getRootNode&&(z=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(mt)===t.ownerDocument});function kt(t,e,s,a){var n,i,o=20,r=a?function(){return a.cur()}:function(){return x.css(t,e,"")},l=r(),c=s&&s[3]||(x.cssNumber[e]?"":"px"),d=t.nodeType&&(x.cssNumber[e]||"px"!==c&&+l)&&gt.exec(x.css(t,e));if(d&&d[3]!==c){for(c=c||d[3],d=+(l/=2)||1;o--;)x.style(t,e,d+c),(1-i)*(1-(i=r()/l||.5))<=0&&(o=0),d/=i;x.style(t,e,(d*=2)+c),s=s||[]}return s&&(d=+d||+l||0,n=s[1]?d+(s[1]+1)*s[2]:+s[2],a&&(a.unit=c,a.start=d,a.end=n)),n}var vt={};function S(t,e){for(var s,a,n,i,o,r=[],l=0,c=t.length;l<c;l++)(a=t[l]).style&&(s=a.style.display,e?("none"===s&&(r[l]=v.get(a,"display")||null,r[l]||(a.style.display="")),""===a.style.display&&bt(a)&&(r[l]=(o=i=void 0,i=(n=a).ownerDocument,n=n.nodeName,(o=vt[n])||(i=i.body.appendChild(i.createElement(n)),o=x.css(i,"display"),i.parentNode.removeChild(i),vt[n]=o="none"===o?"block":o),o))):"none"!==s&&(r[l]="none",v.set(a,"display",s)));for(l=0;l<c;l++)null!=r[l]&&(t[l].style.display=r[l]);return t}x.fn.extend({show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){bt(this)?x(this).show():x(this).hide()})}});var yt=/^(?:checkbox|radio)$/i,wt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,xt=/^$|^module$|\/(?:java|ecma)script/i,$=(E=w.createDocumentFragment().appendChild(w.createElement("div")),(o=w.createElement("input")).setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),E.appendChild(o),b.checkClone=E.cloneNode(!0).cloneNode(!0).lastChild.checked,E.innerHTML="<textarea>x</textarea>",b.noCloneChecked=!!E.cloneNode(!0).lastChild.defaultValue,E.innerHTML="<option></option>",b.option=!!E.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function L(t,e){var s=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&l(t,e)?x.merge([t],s):s}function Ct(t,e){for(var s=0,a=t.length;s<a;s++)v.set(t[s],"globalEval",!e||v.get(e[s],"globalEval"))}$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td,b.option||($.optgroup=$.option=[1,"<select multiple='multiple'>","</select>"]);var Tt=/<|&#?\w+;/;function zt(t,e,s,a,n){for(var i,o,r,l,c,d=e.createDocumentFragment(),u=[],p=0,h=t.length;p<h;p++)if((i=t[p])||0===i)if("object"===f(i))x.merge(u,i.nodeType?[i]:i);else if(Tt.test(i)){for(o=o||d.appendChild(e.createElement("div")),r=(wt.exec(i)||["",""])[1].toLowerCase(),r=$[r]||$._default,o.innerHTML=r[1]+x.htmlPrefilter(i)+r[2],c=r[0];c--;)o=o.lastChild;x.merge(u,o.childNodes),(o=d.firstChild).textContent=""}else u.push(e.createTextNode(i));for(d.textContent="",p=0;i=u[p++];)if(a&&-1<x.inArray(i,a))n&&n.push(i);else if(l=z(i),o=L(d.appendChild(i),"script"),l&&Ct(o),s)for(c=0;i=o[c++];)xt.test(i.type||"")&&s.push(i);return d}var St=/^([^.]*)(?:\.(.+)|)/;function s(){return!0}function h(){return!1}function $t(t,e){return t===function(){try{return w.activeElement}catch(t){}}()==("focus"===e)}function Lt(t,e,s,a,n,i){var o,r;if("object"==typeof e){for(r in"string"!=typeof s&&(a=a||s,s=void 0),e)Lt(t,r,s,a,e[r],i);return t}if(null==a&&null==n?(n=s,a=s=void 0):null==n&&("string"==typeof s?(n=a,a=void 0):(n=a,a=s,s=void 0)),!1===n)n=h;else if(!n)return t;return 1===i&&(o=n,(n=function(t){return x().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=x.guid++)),t.each(function(){x.event.add(this,e,n,a,s)})}function At(t,n,i){i?(v.set(t,n,!1),x.event.add(t,n,{namespace:!1,handler:function(t){var e,s,a=v.get(this,n);if(1&t.isTrigger&&this[n]){if(a.length)(x.event.special[n]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),v.set(this,n,a),e=i(this,n),this[n](),a!==(s=v.get(this,n))||e?v.set(this,n,!1):s={},a!==s)return t.stopImmediatePropagation(),t.preventDefault(),s&&s.value}else a.length&&(v.set(this,n,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===v.get(t,n)&&x.event.add(t,n,s)}x.event={global:{},add:function(e,t,s,a,n){var i,o,r,l,c,d,u,p,h,f=v.get(e);if(g(e))for(s.handler&&(s=(i=s).handler,n=i.selector),n&&x.find.matchesSelector(T,n),s.guid||(s.guid=x.guid++),(r=f.events)||(r=f.events=Object.create(null)),(o=f.handle)||(o=f.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(C)||[""]).length;l--;)u=h=(p=St.exec(t[l])||[])[1],p=(p[2]||"").split(".").sort(),u&&(c=x.event.special[u]||{},u=(n?c.delegateType:c.bindType)||u,c=x.event.special[u]||{},h=x.extend({type:u,origType:h,data:a,handler:s,guid:s.guid,selector:n,needsContext:n&&x.expr.match.needsContext.test(n),namespace:p.join(".")},i),(d=r[u])||((d=r[u]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,a,p,o)||e.addEventListener&&e.addEventListener(u,o)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=s.guid)),n?d.splice(d.delegateCount++,0,h):d.push(h),x.event.global[u]=!0)},remove:function(t,e,s,a,n){var i,o,r,l,c,d,u,p,h,f,_,b=v.hasData(t)&&v.get(t);if(b&&(l=b.events)){for(c=(e=(e||"").match(C)||[""]).length;c--;)if(h=_=(r=St.exec(e[c])||[])[1],f=(r[2]||"").split(".").sort(),h){for(u=x.event.special[h]||{},p=l[h=(a?u.delegateType:u.bindType)||h]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=p.length;i--;)d=p[i],!n&&_!==d.origType||s&&s.guid!==d.guid||r&&!r.test(d.namespace)||a&&a!==d.selector&&("**"!==a||!d.selector)||(p.splice(i,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(t,d));o&&!p.length&&(u.teardown&&!1!==u.teardown.call(t,f,b.handle)||x.removeEvent(t,h,b.handle),delete l[h])}else for(h in l)x.event.remove(t,h+e[c],s,a,!0);x.isEmptyObject(l)&&v.remove(t,"handle events")}},dispatch:function(t){var e,s,a,n,i,o=new Array(arguments.length),r=x.event.fix(t),t=(v.get(this,"events")||Object.create(null))[r.type]||[],l=x.event.special[r.type]||{};for(o[0]=r,e=1;e<arguments.length;e++)o[e]=arguments[e];if(r.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,r)){for(i=x.event.handlers.call(this,r,t),e=0;(a=i[e++])&&!r.isPropagationStopped();)for(r.currentTarget=a.elem,s=0;(n=a.handlers[s++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!1!==n.namespace&&!r.rnamespace.test(n.namespace)||(r.handleObj=n,r.data=n.data,void 0!==(n=((x.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,o))&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,r),r.result}},handlers:function(t,e){var s,a,n,i,o,r=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(i=[],o={},s=0;s<l;s++)void 0===o[n=(a=e[s]).selector+" "]&&(o[n]=a.needsContext?-1<x(n,this).index(c):x.find(n,this,null,[c]).length),o[n]&&i.push(a);i.length&&r.push({elem:c,handlers:i})}return c=this,l<e.length&&r.push({elem:c,handlers:e.slice(l)}),r},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return yt.test(t.type)&&t.click&&l(t,"input")&&At(t,"click",s),!1},trigger:function(t){t=this||t;return yt.test(t.type)&&t.click&&l(t,"input")&&At(t,"click"),!0},_default:function(t){t=t.target;return yt.test(t.type)&&t.click&&l(t,"input")&&v.get(t,"click")||l(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,s){t.removeEventListener&&t.removeEventListener(e,s)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?s:h,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=s,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(t,e){x.event.special[t]={setup:function(){return At(this,t,$t),!1},trigger:function(){return At(this,t),!0},_default:function(){return!0},delegateType:e}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){x.event.special[t]={delegateType:n,bindType:n,handle:function(t){var e,s=t.relatedTarget,a=t.handleObj;return s&&(s===this||x.contains(this,s))||(t.type=a.origType,e=a.handler.apply(this,arguments),t.type=n),e}}}),x.fn.extend({on:function(t,e,s,a){return Lt(this,t,e,s,a)},one:function(t,e,s,a){return Lt(this,t,e,s,a,1)},off:function(t,e,s){var a,n;if(t&&t.preventDefault&&t.handleObj)a=t.handleObj,x(t.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler);else{if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(s=e,e=void 0),!1===s&&(s=h),this.each(function(){x.event.remove(this,t,s,e)});for(n in t)this.off(n,e,t[n])}return this}});var Dt=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return l(t,"table")&&l(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Mt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function It(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var s,a,n,i;if(1===e.nodeType){if(v.hasData(t)&&(i=v.get(t).events))for(n in v.remove(e,"handle events"),i)for(s=0,a=i[n].length;s<a;s++)x.event.add(e,n,i[n][s]);c.hasData(t)&&(t=c.access(t),t=x.extend({},t),c.set(e,t))}}function A(s,a,n,i){a=R(a);var t,e,o,r,l,c,d=0,u=s.length,p=u-1,h=a[0],f=m(h);if(f||1<u&&"string"==typeof h&&!b.checkClone&&Et.test(h))return s.each(function(t){var e=s.eq(t);f&&(a[0]=h.call(this,t,e.html())),A(e,a,n,i)});if(u&&(e=(t=zt(a,s[0].ownerDocument,!1,s,i)).firstChild,1===t.childNodes.length&&(t=e),e||i)){for(r=(o=x.map(L(t,"script"),Mt)).length;d<u;d++)l=t,d!==p&&(l=x.clone(l,!0,!0),r&&x.merge(o,L(l,"script"))),n.call(s[d],l,d);if(r)for(c=o[o.length-1].ownerDocument,x.map(o,It),d=0;d<r;d++)l=o[d],xt.test(l.type||"")&&!v.access(l,"globalEval")&&x.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&!l.noModule&&x._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):F(l.textContent.replace(Nt,""),l,c))}return s}function Rt(t,e,s){for(var a,n=e?x.filter(e,t):t,i=0;null!=(a=n[i]);i++)s||1!==a.nodeType||x.cleanData(L(a)),a.parentNode&&(s&&z(a)&&Ct(L(a,"script")),a.parentNode.removeChild(a));return t}x.extend({htmlPrefilter:function(t){return t},clone:function(t,e,s){var a,n,i,o,r,l,c,d=t.cloneNode(!0),u=z(t);if(!(b.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(o=L(d),a=0,n=(i=L(t)).length;a<n;a++)r=i[a],l=o[a],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&yt.test(r.type)?l.checked=r.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=r.defaultValue);if(e)if(s)for(i=i||L(t),o=o||L(d),a=0,n=i.length;a<n;a++)jt(i[a],o[a]);else jt(t,d);return 0<(o=L(d,"script")).length&&Ct(o,!u&&L(t,"script")),d},cleanData:function(t){for(var e,s,a,n=x.event.special,i=0;void 0!==(s=t[i]);i++)if(g(s)){if(e=s[v.expando]){if(e.events)for(a in e.events)n[a]?x.event.remove(s,a):x.removeEvent(s,a,e.handle);s[v.expando]=void 0}s[c.expando]&&(s[c.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Rt(this,t,!0)},remove:function(t){return Rt(this,t)},text:function(t){return u(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return A(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return A(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Ot(this,t)).insertBefore(t,e.firstChild)})},before:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return A(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(L(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return u(this,function(t){var e=this[0]||{},s=0,a=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!$[(wt.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;s<a;s++)1===(e=this[s]||{}).nodeType&&(x.cleanData(L(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var s=[];return A(this,arguments,function(t){var e=this.parentNode;x.inArray(this,s)<0&&(x.cleanData(L(this)),e&&e.replaceChild(t,this))},s)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){x.fn[t]=function(t){for(var e,s=[],a=x(t),n=a.length-1,i=0;i<=n;i++)e=i===n?this:this.clone(!0),x(a[i])[o](e),q.apply(s,e.get());return this.pushStack(s)}});function qt(t){var e=t.ownerDocument.defaultView;return(e=e&&e.opener?e:y).getComputedStyle(t)}function Pt(t,e,s){var a,n={};for(a in e)n[a]=t.style[a],t.style[a]=e[a];for(a in s=s.call(t),e)t.style[a]=n[a];return s}var Bt,Ht,Wt,Jt,Xt,Yt,Ft,n,Ut=new RegExp("^("+t+")(?!px)[a-z%]+$","i"),Vt=new RegExp(p.join("|"),"i");function Gt(){var t;n&&(Ft.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",n.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",T.appendChild(Ft).appendChild(n),t=y.getComputedStyle(n),Bt="1%"!==t.top,Yt=12===Kt(t.marginLeft),n.style.right="60%",Jt=36===Kt(t.right),Ht=36===Kt(t.width),n.style.position="absolute",Wt=12===Kt(n.offsetWidth/3),T.removeChild(Ft),n=null)}function Kt(t){return Math.round(parseFloat(t))}function Zt(t,e,s){var a,n,i=t.style;return(s=s||qt(t))&&(""!==(n=s.getPropertyValue(e)||s[e])||z(t)||(n=x.style(t,e)),!b.pixelBoxStyles()&&Ut.test(n)&&Vt.test(e)&&(t=i.width,e=i.minWidth,a=i.maxWidth,i.minWidth=i.maxWidth=i.width=n,n=s.width,i.width=t,i.minWidth=e,i.maxWidth=a)),void 0!==n?n+"":n}function Qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Ft=w.createElement("div"),(n=w.createElement("div")).style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===n.style.backgroundClip,x.extend(b,{boxSizingReliable:function(){return Gt(),Ht},pixelBoxStyles:function(){return Gt(),Jt},pixelPosition:function(){return Gt(),Bt},reliableMarginLeft:function(){return Gt(),Yt},scrollboxSize:function(){return Gt(),Wt},reliableTrDimensions:function(){var t,e,s;return null==Xt&&(t=w.createElement("table"),e=w.createElement("tr"),s=w.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",s.style.height="9px",s.style.display="block",T.appendChild(t).appendChild(e).appendChild(s),s=y.getComputedStyle(e),Xt=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===e.offsetHeight,T.removeChild(t)),Xt}}));var te=["Webkit","Moz","ms"],ee=w.createElement("div").style,se={};function ae(t){var e=x.cssProps[t]||se[t];return e||(t in ee?t:se[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),s=te.length;s--;)if((t=te[s]+e)in ee)return t}(t)||t)}var ne=/^(none|table(?!-c[ea]).+)/,ie=/^--/,oe={position:"absolute",visibility:"hidden",display:"block"},re={letterSpacing:"0",fontWeight:"400"};function le(t,e,s){var a=gt.exec(e);return a?Math.max(0,a[2]-(s||0))+(a[3]||"px"):e}function ce(t,e,s,a,n,i){var o="width"===e?1:0,r=0,l=0;if(s===(a?"border":"content"))return 0;for(;o<4;o+=2)"margin"===s&&(l+=x.css(t,s+p[o],!0,n)),a?("content"===s&&(l-=x.css(t,"padding"+p[o],!0,n)),"margin"!==s&&(l-=x.css(t,"border"+p[o]+"Width",!0,n))):(l+=x.css(t,"padding"+p[o],!0,n),"padding"!==s?l+=x.css(t,"border"+p[o]+"Width",!0,n):r+=x.css(t,"border"+p[o]+"Width",!0,n));return!a&&0<=i&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-i-l-r-.5))||0),l}function de(t,e,s){var a=qt(t),n=(!b.boxSizingReliable()||s)&&"border-box"===x.css(t,"boxSizing",!1,a),i=n,o=Zt(t,e,a),r="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(o)){if(!s)return o;o="auto"}return(!b.boxSizingReliable()&&n||!b.reliableTrDimensions()&&l(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===x.css(t,"display",!1,a))&&t.getClientRects().length&&(n="border-box"===x.css(t,"boxSizing",!1,a),(i=r in t)&&(o=t[r])),(o=parseFloat(o)||0)+ce(t,e,s||(n?"border":"content"),i,a,o)+"px"}function i(t,e,s,a,n){return new i.prototype.init(t,e,s,a,n)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e)return""===(e=Zt(t,"opacity"))?"1":e}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,s,a){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,i,o,r=k(e),l=ie.test(e),c=t.style;if(l||(e=ae(r)),o=x.cssHooks[e]||x.cssHooks[r],void 0===s)return o&&"get"in o&&void 0!==(n=o.get(t,!1,a))?n:c[e];"string"===(i=typeof s)&&(n=gt.exec(s))&&n[1]&&(s=kt(t,e,n),i="number"),null!=s&&s==s&&("number"!==i||l||(s+=n&&n[3]||(x.cssNumber[r]?"":"px")),b.clearCloneStyle||""!==s||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(s=o.set(t,s,a))||(l?c.setProperty(e,s):c[e]=s))}},css:function(t,e,s,a){var n,i=k(e);return ie.test(e)||(e=ae(i)),"normal"===(n=void 0===(n=(i=x.cssHooks[e]||x.cssHooks[i])&&"get"in i?i.get(t,!0,s):n)?Zt(t,e,a):n)&&e in re&&(n=re[e]),(""===s||s)&&(i=parseFloat(n),!0===s||isFinite(i))?i||0:n}}),x.each(["height","width"],function(t,o){x.cssHooks[o]={get:function(t,e,s){if(e)return!ne.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?de(t,o,s):Pt(t,oe,function(){return de(t,o,s)})},set:function(t,e,s){var a=qt(t),n=!b.scrollboxSize()&&"absolute"===a.position,i=(n||s)&&"border-box"===x.css(t,"boxSizing",!1,a),s=s?ce(t,o,s,i,a):0;return i&&n&&(s-=Math.ceil(t["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(a[o])-ce(t,o,"border",!1,a)-.5)),s&&(i=gt.exec(e))&&"px"!==(i[3]||"px")&&(t.style[o]=e,e=x.css(t,o)),le(0,e,s)}}}),x.cssHooks.marginLeft=Qt(b.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Zt(t,"marginLeft"))||t.getBoundingClientRect().left-Pt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(n,i){x.cssHooks[n+i]={expand:function(t){for(var e=0,s={},a="string"==typeof t?t.split(" "):[t];e<4;e++)s[n+p[e]+i]=a[e]||a[e-2]||a[0];return s}},"margin"!==n&&(x.cssHooks[n+i].set=le)}),x.fn.extend({css:function(t,e){return u(this,function(t,e,s){var a,n,i={},o=0;if(Array.isArray(e)){for(a=qt(t),n=e.length;o<n;o++)i[e[o]]=x.css(t,e[o],!1,a);return i}return void 0!==s?x.style(t,e,s):x.css(t,e)},t,e,1<arguments.length)}}),((x.Tween=i).prototype={constructor:i,init:function(t,e,s,a,n,i){this.elem=t,this.prop=s,this.easing=n||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=a,this.unit=i||(x.cssNumber[s]?"":"px")},cur:function(){var t=i.propHooks[this.prop];return(t&&t.get?t:i.propHooks._default).get(this)},run:function(t){var e,s=i.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(s&&s.set?s:i.propHooks._default).set(this),this}}).init.prototype=i.prototype,(i.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=x.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[ae(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=i.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=i.prototype.init,x.fx.step={};var D,ue,o,E,pe=/^(?:toggle|show|hide)$/,he=/queueHooks$/;function fe(){ue&&(!1===w.hidden&&y.requestAnimationFrame?y.requestAnimationFrame(fe):y.setTimeout(fe,x.fx.interval),x.fx.tick())}function _e(){return y.setTimeout(function(){D=void 0}),D=Date.now()}function be(t,e){var s,a=0,n={height:t};for(e=e?1:0;a<4;a+=2-e)n["margin"+(s=p[a])]=n["padding"+s]=t;return e&&(n.opacity=n.width=t),n}function ge(t,e,s){for(var a,n=(N.tweeners[e]||[]).concat(N.tweeners["*"]),i=0,o=n.length;i<o;i++)if(a=n[i].call(s,e,t))return a}function N(n,t,e){var s,i,a,o,r,l,c,d=0,u=N.prefilters.length,p=x.Deferred().always(function(){delete h.elem}),h=function(){if(!i){for(var t=D||_e(),t=Math.max(0,f.startTime+f.duration-t),e=1-(t/f.duration||0),s=0,a=f.tweens.length;s<a;s++)f.tweens[s].run(e);if(p.notifyWith(n,[f,e,t]),e<1&&a)return t;a||p.notifyWith(n,[f,1,0]),p.resolveWith(n,[f])}return!1},f=p.promise({elem:n,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},e),originalProperties:t,originalOptions:e,startTime:D||_e(),duration:e.duration,tweens:[],createTween:function(t,e){e=x.Tween(n,f.opts,t,e,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(e),e},stop:function(t){var e=0,s=t?f.tweens.length:0;if(!i){for(i=!0;e<s;e++)f.tweens[e].run(1);t?(p.notifyWith(n,[f,1,0]),p.resolveWith(n,[f,t])):p.rejectWith(n,[f,t])}return this}}),_=f.props,b=_,g=f.opts.specialEasing;for(a in b)if(r=g[o=k(a)],l=b[a],Array.isArray(l)&&(r=l[1],l=b[a]=l[0]),a!==o&&(b[o]=l,delete b[a]),(c=x.cssHooks[o])&&"expand"in c)for(a in l=c.expand(l),delete b[o],l)a in b||(b[a]=l[a],g[a]=r);else g[o]=r;for(;d<u;d++)if(s=N.prefilters[d].call(f,n,_,f.opts))return m(s.stop)&&(x._queueHooks(f.elem,f.opts.queue).stop=s.stop.bind(s)),s;return x.map(_,ge,f),m(f.opts.start)&&f.opts.start.call(n,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),x.fx.timer(x.extend(h,{elem:n,anim:f,queue:f.opts.queue})),f}x.Animation=x.extend(N,{tweeners:{"*":[function(t,e){var s=this.createTween(t,e);return kt(s.elem,t,gt.exec(e),s),s}]},tweener:function(t,e){for(var s,a=0,n=(t=m(t)?(e=t,["*"]):t.match(C)).length;a<n;a++)s=t[a],N.tweeners[s]=N.tweeners[s]||[],N.tweeners[s].unshift(e)},prefilters:[function(t,e,s){var a,n,i,o,r,l,c,d="width"in e||"height"in e,u=this,p={},h=t.style,f=t.nodeType&&bt(t),_=v.get(t,"fxshow");for(a in s.queue||(null==(o=x._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,r=o.empty.fire,o.empty.fire=function(){o.unqueued||r()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,x.queue(t,"fx").length||o.empty.fire()})})),e)if(n=e[a],pe.test(n)){if(delete e[a],i=i||"toggle"===n,n===(f?"hide":"show")){if("show"!==n||!_||void 0===_[a])continue;f=!0}p[a]=_&&_[a]||x.style(t,a)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(p))for(a in d&&1===t.nodeType&&(s.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=_&&_.display)&&(c=v.get(t,"display")),"none"===(d=x.css(t,"display"))&&(c?d=c:(S([t],!0),c=t.style.display||c,d=x.css(t,"display"),S([t]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===x.css(t,"float")&&(l||(u.done(function(){h.display=c}),null==c&&(d=h.display,c="none"===d?"":d)),h.display="inline-block")),s.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=s.overflow[0],h.overflowX=s.overflow[1],h.overflowY=s.overflow[2]})),l=!1,p)l||(_?"hidden"in _&&(f=_.hidden):_=v.access(t,"fxshow",{display:c}),i&&(_.hidden=!f),f&&S([t],!0),u.done(function(){for(a in f||S([t]),v.remove(t,"fxshow"),p)x.style(t,a,p[a])})),l=ge(f?_[a]:0,a,u),a in _||(_[a]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?N.prefilters.unshift(t):N.prefilters.push(t)}}),x.speed=function(t,e,s){var a=t&&"object"==typeof t?x.extend({},t):{complete:s||!s&&e||m(t)&&t,duration:t,easing:s&&e||e&&!m(e)&&e};return x.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in x.fx.speeds?a.duration=x.fx.speeds[a.duration]:a.duration=x.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){m(a.old)&&a.old.call(this),a.queue&&x.dequeue(this,a.queue)},a},x.fn.extend({fadeTo:function(t,e,s,a){return this.filter(bt).css("opacity",0).show().end().animate({opacity:e},t,s,a)},animate:function(e,t,s,a){function n(){var t=N(this,x.extend({},e),o);(i||v.get(this,"finish"))&&t.stop(!0)}var i=x.isEmptyObject(e),o=x.speed(t,s,a);return n.finish=n,i||!1===o.queue?this.each(n):this.queue(o.queue,n)},stop:function(n,t,i){function o(t){var e=t.stop;delete t.stop,e(i)}return"string"!=typeof n&&(i=t,t=n,n=void 0),t&&this.queue(n||"fx",[]),this.each(function(){var t=!0,e=null!=n&&n+"queueHooks",s=x.timers,a=v.get(this);if(e)a[e]&&a[e].stop&&o(a[e]);else for(e in a)a[e]&&a[e].stop&&he.test(e)&&o(a[e]);for(e=s.length;e--;)s[e].elem!==this||null!=n&&s[e].queue!==n||(s[e].anim.stop(i),t=!1,s.splice(e,1));!t&&i||x.dequeue(this,n)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=v.get(this),s=e[o+"queue"],a=e[o+"queueHooks"],n=x.timers,i=s?s.length:0;for(e.finish=!0,x.queue(this,o,[]),a&&a.stop&&a.stop.call(this,!0),t=n.length;t--;)n[t].elem===this&&n[t].queue===o&&(n[t].anim.stop(!0),n.splice(t,1));for(t=0;t<i;t++)s[t]&&s[t].finish&&s[t].finish.call(this);delete e.finish})}}),x.each(["toggle","show","hide"],function(t,a){var n=x.fn[a];x.fn[a]=function(t,e,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(be(a,!0),t,e,s)}}),x.each({slideDown:be("show"),slideUp:be("hide"),slideToggle:be("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,a){x.fn[t]=function(t,e,s){return this.animate(a,t,e,s)}}),x.timers=[],x.fx.tick=function(){var t,e=0,s=x.timers;for(D=Date.now();e<s.length;e++)(t=s[e])()||s[e]!==t||s.splice(e--,1);s.length||x.fx.stop(),D=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ue||(ue=!0,fe())},x.fx.stop=function(){ue=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(a,t){return a=x.fx&&x.fx.speeds[a]||a,this.queue(t=t||"fx",function(t,e){var s=y.setTimeout(t,a);e.stop=function(){y.clearTimeout(s)}})},o=w.createElement("input"),E=w.createElement("select").appendChild(w.createElement("option")),o.type="checkbox",b.checkOn=""!==o.value,b.optSelected=E.selected,(o=w.createElement("input")).value="t",o.type="radio",b.radioValue="t"===o.value;var me,ke=x.expr.attrHandle,ve=(x.fn.extend({attr:function(t,e){return u(this,x.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,s){var a,n,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?x.prop(t,e,s):(1===i&&x.isXMLDoc(t)||(n=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?me:void 0)),void 0!==s?null===s?void x.removeAttr(t,e):n&&"set"in n&&void 0!==(a=n.set(t,s,e))?a:(t.setAttribute(e,s+""),s):!(n&&"get"in n&&null!==(a=n.get(t,e)))&&null==(a=x.find.attr(t,e))?void 0:a)},attrHooks:{type:{set:function(t,e){var s;if(!b.radioValue&&"radio"===e&&l(t,"input"))return s=t.value,t.setAttribute("type",e),s&&(t.value=s),e}}},removeAttr:function(t,e){var s,a=0,n=e&&e.match(C);if(n&&1===t.nodeType)for(;s=n[a++];)t.removeAttribute(s)}}),me={set:function(t,e,s){return!1===e?x.removeAttr(t,s):t.setAttribute(s,s),s}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var o=ke[e]||x.find.attr;ke[e]=function(t,e,s){var a,n,i=e.toLowerCase();return s||(n=ke[i],ke[i]=a,a=null!=o(t,e,s)?i:null,ke[i]=n),a}}),/^(?:input|select|textarea|button)$/i),ye=/^(?:a|area)$/i;function O(t){return(t.match(C)||[]).join(" ")}function M(t){return t.getAttribute&&t.getAttribute("class")||""}function we(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(C)||[]}x.fn.extend({prop:function(t,e){return u(this,x.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,s){var a,n,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&x.isXMLDoc(t)||(e=x.propFix[e]||e,n=x.propHooks[e]),void 0!==s?n&&"set"in n&&void 0!==(a=n.set(t,s,e))?a:t[e]=s:n&&"get"in n&&null!==(a=n.get(t,e))?a:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),b.optSelected||(x.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,s,a,n,i,o,r=0;if(m(e))return this.each(function(t){x(this).addClass(e.call(this,t,M(this)))});if((t=we(e)).length)for(;s=this[r++];)if(o=M(s),a=1===s.nodeType&&" "+O(o)+" "){for(i=0;n=t[i++];)a.indexOf(" "+n+" ")<0&&(a+=n+" ");o!==(o=O(a))&&s.setAttribute("class",o)}return this},removeClass:function(e){var t,s,a,n,i,o,r=0;if(m(e))return this.each(function(t){x(this).removeClass(e.call(this,t,M(this)))});if(!arguments.length)return this.attr("class","");if((t=we(e)).length)for(;s=this[r++];)if(o=M(s),a=1===s.nodeType&&" "+O(o)+" "){for(i=0;n=t[i++];)for(;-1<a.indexOf(" "+n+" ");)a=a.replace(" "+n+" "," ");o!==(o=O(a))&&s.setAttribute("class",o)}return this},toggleClass:function(n,e){var i=typeof n,o="string"==i||Array.isArray(n);return"boolean"==typeof e&&o?e?this.addClass(n):this.removeClass(n):m(n)?this.each(function(t){x(this).toggleClass(n.call(this,t,M(this),e),e)}):this.each(function(){var t,e,s,a;if(o)for(e=0,s=x(this),a=we(n);t=a[e++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==n&&"boolean"!=i||((t=M(this))&&v.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==n&&v.get(this,"__className__")||""))})},hasClass:function(t){for(var e,s=0,a=" "+t+" ";e=this[s++];)if(1===e.nodeType&&-1<(" "+O(M(e))+" ").indexOf(a))return!0;return!1}});function xe(t){t.stopPropagation()}var Ce=/\r/g,Te=(x.fn.extend({val:function(e){var s,t,a,n=this[0];return arguments.length?(a=m(e),this.each(function(t){1===this.nodeType&&(null==(t=a?e.call(this,t,x(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=x.map(t,function(t){return null==t?"":t+""})),(s=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in s&&void 0!==s.set(this,t,"value")||(this.value=t))})):n?(s=x.valHooks[n.type]||x.valHooks[n.nodeName.toLowerCase()])&&"get"in s&&void 0!==(t=s.get(n,"value"))?t:"string"==typeof(t=n.value)?t.replace(Ce,""):null==t?"":t:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:O(x.text(t))}},select:{get:function(t){for(var e,s=t.options,a=t.selectedIndex,n="select-one"===t.type,i=n?null:[],o=n?a+1:s.length,r=a<0?o:n?a:0;r<o;r++)if(((e=s[r]).selected||r===a)&&!e.disabled&&(!e.parentNode.disabled||!l(e.parentNode,"optgroup"))){if(e=x(e).val(),n)return e;i.push(e)}return i},set:function(t,e){for(var s,a,n=t.options,i=x.makeArray(e),o=n.length;o--;)((a=n[o]).selected=-1<x.inArray(x.valHooks.option.get(a),i))&&(s=!0);return s||(t.selectedIndex=-1),i}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<x.inArray(x(t).val(),e)}},b.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),b.focusin="onfocusin"in y,/^(?:focusinfocus|focusoutblur)$/),ze=(x.extend(x.event,{trigger:function(t,e,s,a){var n,i,o,r,l,c,d,u=[s||w],p=W.call(t,"type")?t.type:t,h=W.call(t,"namespace")?t.namespace.split("."):[],f=d=i=s=s||w;if(3!==s.nodeType&&8!==s.nodeType&&!Te.test(p+x.event.triggered)&&(-1<p.indexOf(".")&&(p=(h=p.split(".")).shift(),h.sort()),r=p.indexOf(":")<0&&"on"+p,(t=t[x.expando]?t:new x.Event(p,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),e=null==e?[t]:x.makeArray(e,[t]),c=x.event.special[p]||{},a||!c.trigger||!1!==c.trigger.apply(s,e))){if(!a&&!c.noBubble&&!_(s)){for(o=c.delegateType||p,Te.test(o+p)||(f=f.parentNode);f;f=f.parentNode)u.push(f),i=f;i===(s.ownerDocument||w)&&u.push(i.defaultView||i.parentWindow||y)}for(n=0;(f=u[n++])&&!t.isPropagationStopped();)d=f,t.type=1<n?o:c.bindType||p,(l=(v.get(f,"events")||Object.create(null))[t.type]&&v.get(f,"handle"))&&l.apply(f,e),(l=r&&f[r])&&l.apply&&g(f)&&(t.result=l.apply(f,e),!1===t.result&&t.preventDefault());return t.type=p,a||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(u.pop(),e)||!g(s)||r&&m(s[p])&&!_(s)&&((i=s[r])&&(s[r]=null),x.event.triggered=p,t.isPropagationStopped()&&d.addEventListener(p,xe),s[p](),t.isPropagationStopped()&&d.removeEventListener(p,xe),x.event.triggered=void 0,i&&(s[r]=i)),t.result}},simulate:function(t,e,s){s=x.extend(new x.Event,s,{type:t,isSimulated:!0});x.event.trigger(s,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var s=this[0];if(s)return x.event.trigger(t,e,s,!0)}}),b.focusin||x.each({focus:"focusin",blur:"focusout"},function(s,a){function n(t){x.event.simulate(a,t.target,x.event.fix(t))}x.event.special[a]={setup:function(){var t=this.ownerDocument||this.document||this,e=v.access(t,a);e||t.addEventListener(s,n,!0),v.access(t,a,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this.document||this,e=v.access(t,a)-1;e?v.access(t,a,e):(t.removeEventListener(s,n,!0),v.remove(t,a))}}}),y.location),Se={guid:Date.now()},$e=/\?/,Le=(x.parseXML=function(t){var e,s;if(!t||"string"!=typeof t)return null;try{e=(new y.DOMParser).parseFromString(t,"text/xml")}catch(t){}return s=e&&e.getElementsByTagName("parsererror")[0],e&&!s||x.error("Invalid XML: "+(s?x.map(s.childNodes,function(t){return t.textContent}).join("\n"):t)),e},/\[\]$/),Ae=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Ee=/^(?:input|select|textarea|keygen)/i;x.param=function(t,e){function s(t,e){e=m(e)?e():e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var a,n=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){s(this.name,this.value)});else for(a in t)!function s(a,t,n,i){if(Array.isArray(t))x.each(t,function(t,e){n||Le.test(a)?i(a,e):s(a+"["+("object"==typeof e&&null!=e?t:"")+"]",e,n,i)});else if(n||"object"!==f(t))i(a,t);else for(var e in t)s(a+"["+e+"]",t[e],n,i)}(a,t[a],e,s);return n.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Ee.test(this.nodeName)&&!De.test(t)&&(this.checked||!yt.test(t))}).map(function(t,e){var s=x(this).val();return null==s?null:Array.isArray(s)?x.map(s,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:s.replace(Ae,"\r\n")}}).get()}});var Ne=/%20/g,Oe=/#.*$/,Me=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:GET|HEAD)$/,Re=/^\/\//,qe={},Pe={},Be="*/".concat("*"),He=w.createElement("a");function We(i){return function(t,e){"string"!=typeof t&&(e=t,t="*");var s,a=0,n=t.toLowerCase().match(C)||[];if(m(e))for(;s=n[a++];)"+"===s[0]?(s=s.slice(1)||"*",(i[s]=i[s]||[]).unshift(e)):(i[s]=i[s]||[]).push(e)}}function Je(e,a,n,i){var o={},r=e===Pe;function l(t){var s;return o[t]=!0,x.each(e[t]||[],function(t,e){e=e(a,n,i);return"string"!=typeof e||r||o[e]?r?!(s=e):void 0:(a.dataTypes.unshift(e),l(e),!1)}),s}return l(a.dataTypes[0])||!o["*"]&&l("*")}function Xe(t,e){var s,a,n=x.ajaxSettings.flatOptions||{};for(s in e)void 0!==e[s]&&((n[s]?t:a=a||{})[s]=e[s]);return a&&x.extend(!0,t,a),t}He.href=ze.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ze.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ze.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Xe(Xe(t,x.ajaxSettings),e):Xe(x.ajaxSettings,t)},ajaxPrefilter:We(qe),ajaxTransport:We(Pe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var l,c,d,s,u,p,h,a,f=x.ajaxSetup({},e=e||{}),_=f.context||f,b=f.context&&(_.nodeType||_.jquery)?x(_):x.event,g=x.Deferred(),m=x.Callbacks("once memory"),k=f.statusCode||{},n={},i={},o="canceled",v={readyState:0,getResponseHeader:function(t){var e;if(p){if(!s)for(s={};e=Ie.exec(d);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(t,e){return null==p&&(t=i[t.toLowerCase()]=i[t.toLowerCase()]||t,n[t]=e),this},overrideMimeType:function(t){return null==p&&(f.mimeType=t),this},statusCode:function(t){if(t)if(p)v.always(t[v.status]);else for(var e in t)k[e]=[k[e],t[e]];return this},abort:function(t){t=t||o;return l&&l.abort(t),r(0,t),this}};if(g.promise(v),f.url=((t||f.url||ze.href)+"").replace(Re,ze.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(C)||[""],null==f.crossDomain){t=w.createElement("a");try{t.href=f.url,t.href=t.href,f.crossDomain=He.protocol+"//"+He.host!=t.protocol+"//"+t.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),Je(qe,f,e,v),!p){for(a in(h=x.event&&f.global)&&0==x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!je.test(f.type),c=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ne,"+")):(t=f.url.slice(c.length),f.data&&(f.processData||"string"==typeof f.data)&&(c+=($e.test(c)?"&":"?")+f.data,delete f.data),!1===f.cache&&(c=c.replace(Me,"$1"),t=($e.test(c)?"&":"?")+"_="+Se.guid+++t),f.url=c+t),f.ifModified&&(x.lastModified[c]&&v.setRequestHeader("If-Modified-Since",x.lastModified[c]),x.etag[c]&&v.setRequestHeader("If-None-Match",x.etag[c])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&v.setRequestHeader("Content-Type",f.contentType),v.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Be+"; q=0.01":""):f.accepts["*"]),f.headers)v.setRequestHeader(a,f.headers[a]);if(f.beforeSend&&(!1===f.beforeSend.call(_,v,f)||p))return v.abort();if(o="abort",m.add(f.complete),v.done(f.success),v.fail(f.error),l=Je(Pe,f,e,v)){if(v.readyState=1,h&&b.trigger("ajaxSend",[v,f]),p)return v;f.async&&0<f.timeout&&(u=y.setTimeout(function(){v.abort("timeout")},f.timeout));try{p=!1,l.send(n,r)}catch(t){if(p)throw t;r(-1,t)}}else r(-1,"No Transport")}return v;function r(t,e,s,a){var n,i,o,r=e;p||(p=!0,u&&y.clearTimeout(u),l=void 0,d=a||"",v.readyState=0<t?4:0,a=200<=t&&t<300||304===t,s&&(o=function(t,e,s){for(var a,n,i,o,r=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=t.mimeType||e.getResponseHeader("Content-Type"));if(a)for(n in r)if(r[n]&&r[n].test(a)){l.unshift(n);break}if(l[0]in s)i=l[0];else{for(n in s){if(!l[0]||t.converters[n+" "+l[0]]){i=n;break}o=o||n}i=i||o}if(i)return i!==l[0]&&l.unshift(i),s[i]}(f,v,s)),!a&&-1<x.inArray("script",f.dataTypes)&&x.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),o=function(t,e,s,a){var n,i,o,r,l,c={},d=t.dataTypes.slice();if(d[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(i=d.shift();i;)if(t.responseFields[i]&&(s[t.responseFields[i]]=e),!l&&a&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=d.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=c[l+" "+i]||c["* "+i]))for(n in c)if((r=n.split(" "))[1]===i&&(o=c[l+" "+r[0]]||c["* "+r[0]])){!0===o?o=c[n]:!0!==c[n]&&(i=r[0],d.unshift(r[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}(f,o,v,a),a?(f.ifModified&&((s=v.getResponseHeader("Last-Modified"))&&(x.lastModified[c]=s),(s=v.getResponseHeader("etag"))&&(x.etag[c]=s)),204===t||"HEAD"===f.type?r="nocontent":304===t?r="notmodified":(r=o.state,n=o.data,a=!(i=o.error))):(i=r,!t&&r||(r="error",t<0&&(t=0))),v.status=t,v.statusText=(e||r)+"",a?g.resolveWith(_,[n,r,v]):g.rejectWith(_,[v,r,i]),v.statusCode(k),k=void 0,h&&b.trigger(a?"ajaxSuccess":"ajaxError",[v,f,a?n:i]),m.fireWith(_,[v,r]),h&&(b.trigger("ajaxComplete",[v,f]),--x.active||x.event.trigger("ajaxStop")))}},getJSON:function(t,e,s){return x.get(t,e,s,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,n){x[n]=function(t,e,s,a){return m(e)&&(a=a||s,s=e,e=void 0),x.ajax(x.extend({url:t,type:n,dataType:a,data:e,success:s},x.isPlainObject(t)&&t))}}),x.ajaxPrefilter(function(t){for(var e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),x._evalUrl=function(t,e,s){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e,s)}})},x.fn.extend({wrapAll:function(t){return this[0]&&(m(t)&&(t=t.call(this[0])),t=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(s){return m(s)?this.each(function(t){x(this).wrapInner(s.call(this,t))}):this.each(function(){var t=x(this),e=t.contents();e.length?e.wrapAll(s):t.append(s)})},wrap:function(e){var s=m(e);return this.each(function(t){x(this).wrapAll(s?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new y.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Fe=x.ajaxSettings.xhr(),Ue=(b.cors=!!Fe&&"withCredentials"in Fe,b.ajax=Fe=!!Fe,x.ajaxTransport(function(n){var i,o;if(b.cors||Fe&&!n.crossDomain)return{send:function(t,e){var s,a=n.xhr();if(a.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(s in n.xhrFields)a[s]=n.xhrFields[s];for(s in n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)a.setRequestHeader(s,t[s]);i=function(t){return function(){i&&(i=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?e(0,"error"):e(a.status,a.statusText):e(Ye[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),o=a.onerror=a.ontimeout=i("error"),void 0!==a.onabort?a.onabort=o:a.onreadystatechange=function(){4===a.readyState&&y.setTimeout(function(){i&&o()})},i=i("abort");try{a.send(n.hasContent&&n.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(s){var a,n;if(s.crossDomain||s.scriptAttrs)return{send:function(t,e){a=x("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",n=function(t){a.remove(),n=null,t&&e("error"===t.type?404:200,t.type)}),w.head.appendChild(a[0])},abort:function(){n&&n()}}}),[]),Ve=/(=)\?(?=&|$)|\?\?/,Ge=(x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ue.pop()||x.expando+"_"+Se.guid++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(t,e,s){var a,n,i,o=!1!==t.jsonp&&(Ve.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ve,"$1"+a):!1!==t.jsonp&&(t.url+=($e.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return i||x.error(a+" was not called"),i[0]},t.dataTypes[0]="json",n=y[a],y[a]=function(){i=arguments},s.always(function(){void 0===n?x(y).removeProp(a):y[a]=n,t[a]&&(t.jsonpCallback=e.jsonpCallback,Ue.push(a)),i&&m(n)&&n(i[0]),i=n=void 0}),"script"}),b.createHTMLDocument=((t=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),x.parseHTML=function(t,e,s){var a;return"string"!=typeof t?[]:("boolean"==typeof e&&(s=e,e=!1),e||(b.createHTMLDocument?((a=(e=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,e.head.appendChild(a)):e=w),a=!s&&[],(s=K.exec(t))?[e.createElement(s[1])]:(s=zt([t],e,a),a&&a.length&&x(a).remove(),x.merge([],s.childNodes)))},x.fn.load=function(t,e,s){var a,n,i,o=this,r=t.indexOf(" ");return-1<r&&(a=O(t.slice(r)),t=t.slice(0,r)),m(e)?(s=e,e=void 0):e&&"object"==typeof e&&(n="POST"),0<o.length&&x.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(t){i=arguments,o.html(a?x("<div>").append(x.parseHTML(t)).find(a):t)}).always(s&&function(t,e){o.each(function(){s.apply(this,i||[t.responseText,e,t])})}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(t,e,s){var a,n,i,o,r=x.css(t,"position"),l=x(t),c={};"static"===r&&(t.style.position="relative"),i=l.offset(),a=x.css(t,"top"),o=x.css(t,"left"),r=("absolute"===r||"fixed"===r)&&-1<(a+o).indexOf("auto")?(n=(r=l.position()).top,r.left):(n=parseFloat(a)||0,parseFloat(o)||0),null!=(e=m(e)?e.call(t,s,x.extend({},i)):e).top&&(c.top=e.top-i.top+n),null!=e.left&&(c.left=e.left-i.left+r),"using"in e?e.using.call(t,c):l.css(c)}},x.fn.extend({offset:function(e){var t,s;return arguments.length?void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)}):(s=this[0])?s.getClientRects().length?(t=s.getBoundingClientRect(),s=s.ownerDocument.defaultView,{top:t.top+s.pageYOffset,left:t.left+s.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,s,a=this[0],n={top:0,left:0};if("fixed"===x.css(a,"position"))e=a.getBoundingClientRect();else{for(e=this.offset(),s=a.ownerDocument,t=a.offsetParent||s.documentElement;t&&(t===s.body||t===s.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==a&&1===t.nodeType&&((n=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),n.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-x.css(a,"marginTop",!0),left:e.left-n.left-x.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||T})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;x.fn[e]=function(t){return u(this,function(t,e,s){var a;if(_(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===s)return a?a[n]:t[e];a?a.scrollTo(i?a.pageXOffset:s,i?s:a.pageYOffset):t[e]=s},e,t,arguments.length)}}),x.each(["top","left"],function(t,s){x.cssHooks[s]=Qt(b.pixelPosition,function(t,e){if(e)return e=Zt(t,s),Ut.test(e)?x(t).position()[s]+"px":e})}),x.each({Height:"height",Width:"width"},function(o,r){x.each({padding:"inner"+o,content:r,"":"outer"+o},function(a,i){x.fn[i]=function(t,e){var s=arguments.length&&(a||"boolean"!=typeof t),n=a||(!0===t||!0===e?"margin":"border");return u(this,function(t,e,s){var a;return _(t)?0===i.indexOf("outer")?t["inner"+o]:t.document.documentElement["client"+o]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+o],a["scroll"+o],t.body["offset"+o],a["offset"+o],a["client"+o])):void 0===s?x.css(t,e,n):x.style(t,e,s,n)},r,s?t:void 0,s)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.fn.extend({bind:function(t,e,s){return this.on(t,null,e,s)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,s,a){return this.on(e,t,s,a)},undelegate:function(t,e,s){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",s)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,s){x.fn[s]=function(t,e){return 0<arguments.length?this.on(s,null,t,e):this.trigger(s)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Ke=(x.proxy=function(t,e){var s,a;if("string"==typeof e&&(a=t[e],e=t,t=a),m(t))return s=r.call(arguments,2),(a=function(){return t.apply(e||this,s.concat(r.call(arguments)))}).guid=t.guid=t.guid||x.guid++,a},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=l,x.isFunction=m,x.isWindow=_,x.camelCase=k,x.type=f,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},x.trim=function(t){return null==t?"":(t+"").replace(Ge,"")},void 0!==(es=function(){return x}.apply(ts,[]))&&(Qe.exports=es),y.jQuery),Ze=y.$;return x.noConflict=function(t){return y.$===x&&(y.$=Ze),t&&y.jQuery===x&&(y.jQuery=Ke),x},void 0===I&&(y.jQuery=y.$=x),x})},614:(t,e,s)=>{"use strict";s.r(e),s.d(e,{NIL:()=>L,parse:()=>b,stringify:()=>h,v1:()=>c,v3:()=>T,v4:()=>z,v5:()=>$,validate:()=>o,version:()=>A});var a,n=new Uint8Array(16);function d(){if(a=a||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto))return a(n);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const o=function(t){return"string"==typeof t&&i.test(t)};for(var u,p,r=[],l=0;l<256;++l)r.push((l+256).toString(16).substr(1));const h=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase();if(o(t))return t;throw TypeError("Stringified UUID is invalid")};var f=0,_=0;const c=function(t,e,s){var a=e&&s||0,n=e||new Array(16),i=(t=t||{}).node||u,s=void 0!==t.clockseq?t.clockseq:p,o=(null!=i&&null!=s||(o=t.random||(t.rng||d)(),null==i&&(i=u=[1|o[0],o[1],o[2],o[3],o[4],o[5]]),null==s&&(s=p=16383&(o[6]<<8|o[7]))),void 0!==t.msecs?t.msecs:Date.now()),r=void 0!==t.nsecs?t.nsecs:_+1,l=o-f+(r-_)/1e4;if(l<0&&void 0===t.clockseq&&(s=s+1&16383),1e4<=(r=(l<0||f<o)&&void 0===t.nsecs?0:r))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=o,p=s,l=(1e4*(268435455&(o+=122192928e5))+(_=r))%4294967296,n[a++]=l>>>24&255,n[a++]=l>>>16&255,n[a++]=l>>>8&255,n[a++]=255&l,t=o/4294967296*1e4&268435455,n[a++]=t>>>8&255,n[a++]=255&t,n[a++]=t>>>24&15|16,n[a++]=t>>>16&255,n[a++]=s>>>8|128,n[a++]=255&s;for(var c=0;c<6;++c)n[a+c]=i[c];return e||h(n)};const b=function(t){var e,s;if(o(t))return(s=new Uint8Array(16))[0]=(e=parseInt(t.slice(0,8),16))>>>24,s[1]=e>>>16&255,s[2]=e>>>8&255,s[3]=255&e,s[4]=(e=parseInt(t.slice(9,13),16))>>>8,s[5]=255&e,s[6]=(e=parseInt(t.slice(14,18),16))>>>8,s[7]=255&e,s[8]=(e=parseInt(t.slice(19,23),16))>>>8,s[9]=255&e,s[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,s[11]=e/4294967296&255,s[12]=e>>>24&255,s[13]=e>>>16&255,s[14]=e>>>8&255,s[15]=255&e,s;throw TypeError("Invalid UUID")};function g(t,o,r){function e(t,e,s,a){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],s=0;s<t.length;++s)e.push(t.charCodeAt(s));return e}(t)),16!==(e="string"==typeof e?b(e):e).length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var n=new Uint8Array(16+t.length);if(n.set(e),n.set(t,e.length),(n=r(n))[6]=15&n[6]|o,n[8]=63&n[8]|128,s){a=a||0;for(var i=0;i<16;++i)s[a+i]=n[i];return s}return h(n)}try{e.name=t}catch(t){}return e.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",e.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",e}function m(t){return 14+(t+64>>>9<<4)+1}function k(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function v(t,e,s,a,n,i){return k((e=k(k(e,t),k(a,i)))<<n|e>>>32-n,s)}function y(t,e,s,a,n,i,o){return v(e&s|~e&a,t,e,n,i,o)}function w(t,e,s,a,n,i,o){return v(e&a|s&~a,t,e,n,i,o)}function x(t,e,s,a,n,i,o){return v(e^s^a,t,e,n,i,o)}function C(t,e,s,a,n,i,o){return v(s^(e|~a),t,e,n,i,o)}const T=g("v3",48,function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var s=0;s<e.length;++s)t[s]=e.charCodeAt(s)}for(var a=function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;for(var s=1732584193,a=-271733879,n=-1732584194,i=271733878,o=0;o<t.length;o+=16){var r=s,l=a,c=n,d=i;s=y(s,a,n,i,t[o],7,-680876936),i=y(i,s,a,n,t[o+1],12,-389564586),n=y(n,i,s,a,t[o+2],17,606105819),a=y(a,n,i,s,t[o+3],22,-1044525330),s=y(s,a,n,i,t[o+4],7,-176418897),i=y(i,s,a,n,t[o+5],12,1200080426),n=y(n,i,s,a,t[o+6],17,-1473231341),a=y(a,n,i,s,t[o+7],22,-45705983),s=y(s,a,n,i,t[o+8],7,1770035416),i=y(i,s,a,n,t[o+9],12,-1958414417),n=y(n,i,s,a,t[o+10],17,-42063),a=y(a,n,i,s,t[o+11],22,-1990404162),s=y(s,a,n,i,t[o+12],7,1804603682),i=y(i,s,a,n,t[o+13],12,-40341101),n=y(n,i,s,a,t[o+14],17,-1502002290),a=y(a,n,i,s,t[o+15],22,1236535329),s=w(s,a,n,i,t[o+1],5,-165796510),i=w(i,s,a,n,t[o+6],9,-1069501632),n=w(n,i,s,a,t[o+11],14,643717713),a=w(a,n,i,s,t[o],20,-373897302),s=w(s,a,n,i,t[o+5],5,-701558691),i=w(i,s,a,n,t[o+10],9,38016083),n=w(n,i,s,a,t[o+15],14,-660478335),a=w(a,n,i,s,t[o+4],20,-405537848),s=w(s,a,n,i,t[o+9],5,568446438),i=w(i,s,a,n,t[o+14],9,-1019803690),n=w(n,i,s,a,t[o+3],14,-187363961),a=w(a,n,i,s,t[o+8],20,1163531501),s=w(s,a,n,i,t[o+13],5,-1444681467),i=w(i,s,a,n,t[o+2],9,-51403784),n=w(n,i,s,a,t[o+7],14,1735328473),a=w(a,n,i,s,t[o+12],20,-1926607734),s=x(s,a,n,i,t[o+5],4,-378558),i=x(i,s,a,n,t[o+8],11,-2022574463),n=x(n,i,s,a,t[o+11],16,1839030562),a=x(a,n,i,s,t[o+14],23,-35309556),s=x(s,a,n,i,t[o+1],4,-1530992060),i=x(i,s,a,n,t[o+4],11,1272893353),n=x(n,i,s,a,t[o+7],16,-155497632),a=x(a,n,i,s,t[o+10],23,-1094730640),s=x(s,a,n,i,t[o+13],4,681279174),i=x(i,s,a,n,t[o],11,-358537222),n=x(n,i,s,a,t[o+3],16,-722521979),a=x(a,n,i,s,t[o+6],23,76029189),s=x(s,a,n,i,t[o+9],4,-640364487),i=x(i,s,a,n,t[o+12],11,-421815835),n=x(n,i,s,a,t[o+15],16,530742520),a=x(a,n,i,s,t[o+2],23,-995338651),s=C(s,a,n,i,t[o],6,-198630844),i=C(i,s,a,n,t[o+7],10,1126891415),n=C(n,i,s,a,t[o+14],15,-1416354905),a=C(a,n,i,s,t[o+5],21,-57434055),s=C(s,a,n,i,t[o+12],6,1700485571),i=C(i,s,a,n,t[o+3],10,-1894986606),n=C(n,i,s,a,t[o+10],15,-1051523),a=C(a,n,i,s,t[o+1],21,-2054922799),s=C(s,a,n,i,t[o+8],6,1873313359),i=C(i,s,a,n,t[o+15],10,-30611744),n=C(n,i,s,a,t[o+6],15,-1560198380),a=C(a,n,i,s,t[o+13],21,1309151649),s=C(s,a,n,i,t[o+4],6,-145523070),i=C(i,s,a,n,t[o+11],10,-1120210379),n=C(n,i,s,a,t[o+2],15,718787259),a=C(a,n,i,s,t[o+9],21,-343485551),s=k(s,r),a=k(a,l),n=k(n,c),i=k(i,d)}return[s,a,n,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,s=new Uint32Array(m(e)),a=0;a<e;a+=8)s[a>>5]|=(255&t[a/8])<<a%32;return s}(t),8*t.length),n=[],i=32*a.length,o="0123456789abcdef",r=0;r<i;r+=8){var l=a[r>>5]>>>r%32&255,l=parseInt(o.charAt(l>>>4&15)+o.charAt(15&l),16);n.push(l)}return n});const z=function(t,e,s){var a=(t=t||{}).random||(t.rng||d)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){s=s||0;for(var n=0;n<16;++n)e[s+n]=a[n];return e}return h(a)};function S(t,e){return t<<e|t>>>32-e}const $=g("v5",80,function(t){var e=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var a=unescape(encodeURIComponent(t));t=[];for(var n=0;n<a.length;++n)t.push(a.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),r=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[64*l+4*d]<<24|t[64*l+4*d+1]<<16|t[64*l+4*d+2]<<8|t[64*l+4*d+3];r[l]=c}r[o-1][14]=8*(t.length-1)/Math.pow(2,32),r[o-1][14]=Math.floor(r[o-1][14]),r[o-1][15]=8*(t.length-1)&4294967295;for(var u=0;u<o;++u){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=r[u][h];for(var f=16;f<80;++f)p[f]=S(p[f-3]^p[f-8]^p[f-14]^p[f-16],1);for(var _=s[0],b=s[1],g=s[2],m=s[3],k=s[4],v=0;v<80;++v)var y=Math.floor(v/20),y=S(_,5)+function(t,e,s,a){switch(t){case 0:return e&s^~e&a;case 1:return e^s^a;case 2:return e&s^e&a^s&a;case 3:return e^s^a}}(y,b,g,m)+k+e[y]+p[v]>>>0,k=m,m=g,g=S(b,30)>>>0,b=_,_=y;s[0]=s[0]+_>>>0,s[1]=s[1]+b>>>0,s[2]=s[2]+g>>>0,s[3]=s[3]+m>>>0,s[4]=s[4]+k>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]}),L="00000000-0000-0000-0000-000000000000";const A=function(t){if(o(t))return parseInt(t.substr(14,1),16);throw TypeError("Invalid UUID")}},769:(t,e,s)=>{"use strict";s.r(e),s.d(e,{BBOX3_SVG:()=>p,BBOX_SVG:()=>n,BUTTON_LOADER_HTML:()=>f,COLORS:()=>_,CONTOUR_SVG:()=>r,DEMO_ANNOTATION:()=>a,GLOBAL_SVG:()=>c,POINT_SVG:()=>i,POLYGON_SVG:()=>o,POLYLINE_SVG:()=>u,TBAR_SVG:()=>l,WHOLE_IMAGE_SVG:()=>d,get_init_style:()=>h});const a={id:"7c64913a-9d8c-475a-af1a-658944e37c31",new:!0,parent_id:null,created_by:"TestUser",created_at:"2020-12-21T02:41:47.304Z",deprecated:!1,spatial_type:"contour",spatial_payload:[[4,25],[4,25],[4,24],[4,23],[4,22],[4,22],[5,22],[5,21],[5,20],[6,20],[6,19],[7,19],[7,18],[8,18],[8,18],[10,18],[11,18],[11,17],[12,17],[12,16],[12,16],[13,16],[14,15],[16,14],[16,14],[17,14],[18,14],[18,13],[19,13],[20,13],[20,13],[21,13],[22,13],[23,13],[24,13],[24,13],[25,13],[26,13],[27,13],[28,13],[28,13],[29,13],[30,13],[31,13],[32,13],[34,13],[36,14],[36,14],[37,15],[40,15],[40,16],[41,16],[42,17],[43,17],[44,18],[44,18],[45,18],[46,18],[47,18],[47,18],[48,18],[48,18],[49,19],[50,20],[52,20],[52,20],[53,21],[54,21],[55,21],[56,21],[57,21],[58,22],[59,22],[60,22],[60,22],[61,22],[63,22],[64,22],[64,22],[65,22],[66,22],[67,22],[68,22],[68,21],[69,21],[70,20],[70,19],[71,19],[71,18],[72,18],[72,18],[72,18],[73,18],[75,17],[75,16],[76,16],[76,16],[76,15],[77,14],[78,14],[79,14],[79,13],[79,12],[80,12],[81,12],[82,11],[83,11],[84,10],[85,10],[86,10],[87,10],[88,10],[88,10],[89,10],[90,10],[91,10],[92,10],[92,10],[93,10],[94,10],[94,10],[95,10],[96,10],[96,11],[96,11],[98,11],[98,12],[99,12],[100,13],[100,14],[101,14],[101,15],[102,15],[104,16],[104,17],[104,18],[105,18],[106,18],[106,18],[107,18],[107,19],[107,20],[108,20],[108,21],[108,21],[108,22],[109,22],[109,22],[109,23]],classification_payloads:null,annotation_meta:"is_assigned_to_each_annotation"},n=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="bbox.svg"
   aria-labelledby="unique-title-id-bbox unique-desc-id-bbox">
  <defs
     id="defs7238">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4587"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="319.49724"
     inkscape:cy="182.97951"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1848"
     inkscape:window-height="1016"
     inkscape:window-x="1992"
     inkscape:window-y="111"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:1.48994207;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-start:url(#DotL);marker-mid:url(#DotL);paint-order:stroke fill markers"
       d="m 10,207 v 80 h 80 v -80 z"
       id="path3715"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccccc" />
  </g>
</svg>
`,i=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="point.svg">
  <defs
     id="defs7238">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1156"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1154"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1152"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1150"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1148"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path946"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4587"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.1443229"
     inkscape:cx="138.27833"
     inkscape:cy="159.299"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1043"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <circle
       style="fill:#fedbdb;fill-opacity:0;stroke:#000000;stroke-width:3.34195209;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal"
       id="path884"
       cx="50"
       cy="247"
       r="23.329023" />
    <circle
       style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1.06185877;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal"
       id="path886"
       cx="50"
       cy="247"
       r="6.9690704" />
  </g>
</svg>
`,o=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="polygon.svg"
   aria-labelledby="unique-title-id-polygon unique-desc-id-polygon">
  <defs
     id="defs7239">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL2"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4588"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="446.28295"
     inkscape:cy="182.97951"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1848"
     inkscape:window-height="1016"
     inkscape:window-x="1992"
     inkscape:window-y="111"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:1.48994207;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-start:url(#DotL2);marker-mid:url(#DotL2);paint-order:stroke fill markers"
       d="m 41.284493,204.35565 -33.5734849,28.74943 7.6220859,56.71655 76.946838,-12.1256 -41.921509,-38.137 z"
       id="path3715"
       inkscape:connector-curvature="0" />
  </g>
</svg>
`,r=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="contour.svg">
  <defs
     id="defs7240">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4589"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="194.1401"
     inkscape:cy="180.12237"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1848"
     inkscape:window-height="1016"
     inkscape:window-x="1992"
     inkscape:window-y="111"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;stroke:#000000;stroke-width:5.465;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 81.075893,208.17559 c -34.584822,16.06399 -59.342262,13.60715 -61.988096,34.01786 -2.645833,20.41071 1.700893,48.38095 11.150298,49.51488 9.449403,1.13393 31.938986,1.13393 37.986607,-6.4256 6.047618,-7.55952 12.284226,-19.65476 12.095237,-30.80505 -0.188987,-11.1503 -6.425594,-34.01786 -34.206844,-52.34971"
       id="path865"
       inkscape:connector-curvature="0" />
  </g>
</svg>
`,l=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="tbar.svg">
  <defs
     id="defs7241">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4590"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="194.1401"
     inkscape:cy="180.12237"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1043"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;stroke:#000000;stroke-width:5.54668236;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 34.757974,262.61957 54.396902,-54.3973"
       id="path848"
       inkscape:connector-curvature="0" />
    <path
       style="fill:none;stroke:#000000;stroke-width:5.92665672;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="M 7.3110211,235.09974 63.120496,290.9085"
       id="path850"
       inkscape:connector-curvature="0" />
  </g>
</svg>
`,c=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="global_v2.svg">
  <defs
     id="defs7238">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1156"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1154"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1152"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1150"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1148"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path946"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4587"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="5.310344"
     inkscape:cy="177.26523"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1043"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714288;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="M 30.000035,244.14279 V 226.99993 H 47.142863"
       id="path883"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714288;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="M 47.142863,286.99993 H 30.000035 v -17.14286"
       id="path883-3"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714288;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 89.999929,269.85707 v 17.14286 H 72.857102"
       id="path883-3-6"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714288;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 72.857102,226.99993 h 17.142827 v 17.14286"
       id="path883-3-7"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.66666669"
       d="M 20.000052,234.14279 V 216.99993 H 37.14284"
       id="path883-2"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.66666669"
       d="M 30,276.99993 H 20.000052 V 259.85707"
       id="path883-3-70"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.66666669"
       d="M 62.857016,216.99993 H 79.999804 V 227"
       id="path883-3-7-3"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.53431374"
       d="M 10.00007,224.14279 V 206.99993 H 27.142858"
       id="path883-2-6"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.53431374"
       d="M 19.5,266.99993 H 10.00007 V 249.85707"
       id="path883-3-70-0"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.27714133;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.53431374"
       d="M 52.857035,206.99993 H 69.999821 V 216.5"
       id="path883-3-7-3-2"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
  </g>
</svg>
`,d=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="whole_image.svg">
  <defs
     id="defs7238">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1156"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1154"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1152"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1150"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1148"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path946"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4587"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="102.54275"
     inkscape:cy="180.12237"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1043"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;stroke:#000000;stroke-width:1.49000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="M 15,232 V 212 H 35"
       id="path883"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.49000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="M 35,282 H 15 v -20"
       id="path883-3"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.49000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 85,262 v 20 H 65"
       id="path883-3-6"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
    <path
       style="fill:none;stroke:#000000;stroke-width:1.49000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
       d="m 65,212 h 20 v 20"
       id="path883-3-7"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="ccc" />
  </g>
</svg>
`,u=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="polygon.svg">
  <defs
     id="defs7238">
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1156"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1154"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1152"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path1150"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0.0"
       refX="0.0"
       id="marker1148"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         id="path946"
         d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
         style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
         transform="scale(0.8) translate(7.4, 1)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="DotL"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path4587"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
    <marker
       inkscape:stockid="DotL"
       orient="auto"
       refY="0"
       refX="0"
       id="marker7235"
       style="overflow:visible"
       inkscape:isstock="true">
      <path
         inkscape:connector-curvature="0"
         id="path7233"
         d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
         style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
         transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
    </marker>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="227.89989"
     inkscape:cy="182.97951"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     showgrid="false"
     inkscape:window-width="1920"
     inkscape:window-height="1043"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1" />
  <metadata
     id="metadata7241">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(0,-197)">
    <path
       style="fill:none;stroke:#000000;stroke-width:1.49000001;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-start:url(#marker1148);marker-mid:url(#marker1152);marker-end:url(#marker1156)"
       d="M 15.497022,283.01488 28.915179,250.31994 67.657737,240.11458 87.879463,210.06547"
       id="path883"
       inkscape:connector-curvature="0"
       sodipodi:nodetypes="cccc" />
  </g>
</svg>
`,p=`
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100mm"
   height="100mm"
   viewBox="0 0 100 100"
   version="1.1"
   id="svg7244"
   inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"
   sodipodi:docname="bbox3.svg">
<defs
  id="defs7338">
 <marker
    inkscape:isstock="true"
    style="overflow:visible"
    id="marker3387"
    refX="0"
    refY="0"
    orient="auto"
    inkscape:stockid="DotL">
   <path
      transform="matrix(0.8,0,0,0.8,5.92,0.8)"
      style="fill:#757575;fill-opacity:0.98039216;fill-rule:evenodd;stroke:#757575;stroke-width:1.00000003pt;stroke-opacity:0.98039216"
      d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
      id="path3385"
      inkscape:connector-curvature="0" />
 </marker>
 <marker
    inkscape:isstock="true"
    style="overflow:visible"
    id="marker2383"
    refX="0"
    refY="0"
    orient="auto"
    inkscape:stockid="DotL">
   <path
      transform="matrix(0.8,0,0,0.8,5.92,0.8)"
      style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
      d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
      id="path2381"
      inkscape:connector-curvature="0" />
 </marker>
 <marker
    inkscape:isstock="true"
    style="overflow:visible"
    id="marker2313"
    refX="0"
    refY="0"
    orient="auto"
    inkscape:stockid="DotL">
   <path
      transform="matrix(0.8,0,0,0.8,5.92,0.8)"
      style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
      d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
      id="path2211"
      inkscape:connector-curvature="0" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1651"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path1649"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1315"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path1313"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1145"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path943"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1156"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path1254"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1152"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path1160"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0.0"
    refX="0.0"
    id="marker1148"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      id="path951"
      d="M -2.5,-1.0 C -2.5,1.7600000 -4.7400000,4.0 -7.5,4.0 C -10.260000,4.0 -12.5,1.7600000 -12.5,-1.0 C -12.5,-3.7600000 -10.260000,-6.0 -7.5,-6.0 C -4.7400000,-6.0 -2.5,-3.7600000 -2.5,-1.0 z "
      style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1"
      transform="scale(0.8) translate(7.4, 1)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0"
    refX="0"
    id="DotL"
    style="overflow:visible"
    inkscape:isstock="true"
    inkscape:collect="always">
   <path
      inkscape:connector-curvature="0"
      id="path4591"
      d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
      style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
      transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
 </marker>
 <marker
    inkscape:stockid="DotL"
    orient="auto"
    refY="0"
    refX="0"
    id="marker7235"
    style="overflow:visible"
    inkscape:isstock="true">
   <path
      inkscape:connector-curvature="0"
      id="path7234"
      d="m -2.5,-1 c 0,2.76 -2.24,5 -5,5 -2.76,0 -5,-2.24 -5,-5 0,-2.76 2.24,-5 5,-5 2.76,0 5,2.24 5,5 z"
      style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1"
      transform="matrix(0.8,0,0,0.8,5.92,0.8)" />
 </marker>
</defs>
<sodipodi:namedview
  id="base"
  pagecolor="#ffffff"
  bordercolor="#666666"
  borderopacity="1.0"
  inkscape:pageopacity="0.0"
  inkscape:pageshadow="2"
  inkscape:zoom="1.4"
  inkscape:cx="-23.528679"
  inkscape:cy="177.26523"
  inkscape:document-units="mm"
  inkscape:current-layer="layer2"
  showgrid="false"
  inkscape:window-width="1920"
  inkscape:window-height="1043"
  inkscape:window-x="0"
  inkscape:window-y="0"
  inkscape:window-maximized="1" />
<metadata
  id="metadata7241">
 <rdf:RDF>
   <cc:Work
      rdf:about="">
     <dc:format>image/svg+xml</dc:format>
     <dc:type
        rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
     <dc:title />
   </cc:Work>
 </rdf:RDF>
</metadata>
<g
  inkscape:label="Layer 1"
  inkscape:groupmode="layer"
  id="layer1"
  transform="translate(0,-197)">
 <path
    style="fill:none;stroke:#454545;stroke-width:1.55600691;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
    d="M 10.756538,266.99254 H 70.756863"
    id="path2551"
    inkscape:connector-curvature="0"
    sodipodi:nodetypes="cc" />
 <path
    style="fill:none;stroke:#454545;stroke-width:1.55600691;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:0.98039216;marker-mid:url(#marker3387)"
    d="m 70.756864,206.99233 -10e-7,60.16215 18.4441,19.83814"
    id="path2553"
    inkscape:connector-curvature="0"
    sodipodi:nodetypes="ccc" />
</g>
<g
  inkscape:groupmode="layer"
  id="layer2"
  inkscape:label="Layer 2">
 <path
    style="fill:none;stroke:#000000;stroke-width:1.55600691;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-mid:url(#marker2383)"
    d="M 30.756486,89.992787 10.756538,69.992546 V 9.9923299 h 60.000325 l 18.44426,21.5559081"
    id="path973-1"
    inkscape:connector-curvature="0"
    sodipodi:nodetypes="ccccc" />
 <path
    style="fill:none;stroke:#000000;stroke-width:1.55600691;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-start:url(#marker1145);marker-mid:url(#marker1315);marker-end:url(#marker1651)"
    d="M 10.756538,9.9923299 30.756484,31.548238"
    id="path880"
    inkscape:connector-curvature="0" />
 <path
    style="fill:none;stroke:#000000;stroke-width:1.56000698;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-mid:url(#marker1145)"
    d="M 30.756646,89.992617 H 89.200963 V 31.548238"
    id="path2155"
    inkscape:connector-curvature="0"
    sodipodi:nodetypes="ccc" />
 <path
    style="fill:none;stroke:#000000;stroke-width:1.55600691;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-start:url(#marker1145);marker-mid:url(#marker1145);marker-end:url(#marker1145)"
    d="M 89.201121,31.548238 H 30.756484 l 2e-6,58.444549"
    id="path2153"
    inkscape:connector-curvature="0" />
</g>
</svg>
`;let h=t=>{return`
div#${t} {
   display: none;
}
div#${t} * {
   box-sizing: content-box;
   text-align: center;
}
div#${t}.ulabel-night {
   background-color: black;
}
div#${t} div.full_ulabel_container_ {
   font-family: sans-serif;
}

div#${t} div.annbox_cls, div#${t} div.toolbox_cls {
   height: 100%;
}
div#${t} div.annbox_cls {
   width: calc(100% - 320px);
   background-color: black;
   overflow: scroll;
   position: absolute;
   top: 0;
   left: 0;
}
div#${t} div.annbox_cls img.image_frame {
   position: absolute;
   top: 0;
   left: 0;
   max-width: none;
   max-height: none;
}


/* Frame annotation dialog */
div#${t} div.frame_annotation_dialog {
   width: 60px;
   overflow: hidden;
   position: absolute;
   z-index: 80;
   background-color: rgb(255, 255, 255);
   border: 1px solid rgb(143, 143, 143);
   transition: opacity 0.1s, width 0.3s, height 0.3s, min-height 0.3s;
   opacity: 0.5;
   top: 40px;
}
div#${t} div.frame_annotation_dialog.fad_ind__0 {
   right: 360px;
}
div#${t} div.frame_annotation_dialog.fad_ind__1 {
   right: 445px;
}
div#${t} div.frame_annotation_dialog.fad_ind__2 {
   right: 530px;
}
div#${t} div.frame_annotation_dialog.fad_ind__3 {
   right: 615px;
}
div#${t} div.frame_annotation_dialog div.hide_overflow_container {
   width: 100%;
   /* position: absolute;
   right: 0; */
   overflow: hidden;
}
div#${t} div.frame_annotation_dialog.active:hover, div#${t} div.frame_annotation_dialog.active.permopen {
   max-width: none;
   width: 400px;
   overflow: visible;
}
div#${t} div.frame_annotation_dialog.active {
   z-index: 125;
   opacity: 1.0;
}
div#${t}.ulabel-night div.frame_annotation_dialog {
   background-color: rgb(37, 37, 37);
   border: 1px solid rgb(102, 102, 102);
   text-align: right;
}
div.front_dialogs {
   position: absolute;
   top: 0;
   right: 0;
   z-index: -1;
}
div#${t} div.frame_annotation_dialog div.row_container {
   position: relative;
   width: 400px;
   left: -340px;
   overflow: visible;
   transition: left 0.3s;
}
div#${t} div.frame_annotation_dialog:hover div.row_container, div#${t} div.frame_annotation_dialog.active.permopen div.row_container {
   left: 0;
   overflow: visible;
}
/* ROWS */
div#${t} div.frame_annotation_dialog div.fad_row {
   width: 400px;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_row_inner {
   width: 400px;
   text-align: right;
}

/* NAME */
div#${t} div.fad_st_name {
   font-size: 8px;
   padding: 4px;
   width: 52px;
   overflow: hidden;
   text-align: center;
   display: inline-block;
}
div#${t}.ulabel-night div.fad_st_name {
   color: white;
}

/* ADD BUTTON */
div#${t} div.fad_st_add {
   width: 60px;
   height: 50px;
   display: none;
   position: relative;
}
div#${t} div.frame_annotation_dialog.active div.fad_st_add {
   display: inline-block;
}
div#${t} div.frame_annotation_dialog div.fad_row.add a.add-glob-button {
   position: absolute;
   font-size: 20px;
   width: 25px;
   height: 25px;
   border-radius: 12.5px;
   text-decoration: none;
   background-color: rgba(128, 128, 128, 0.198);
   color: gray;
   border: 1px solid gray;
   top: 25px;
   left: 30px;
   transform: translateX(-50%) translateY(-50%);
   line-height: 25px;
   text-align: center;
}
/* div#${t} div.frame_annotation_dialog div.fad_row.add a.add-glob-button span.plus {
   display: block;
   text-align: center;
   width: 25px;
   height: 25px;
   position: absolute;
   top: 12.5px;
   left: 12.5px;
   transform: translateX(-50%) translateY(-50%);
   color: black;
} */
div#${t} div.frame_annotation_dialog div.fad_row.add a.add-glob-button:hover {
   border-color: black;
   color: black;
}
div#${t}.ulabel-night div.frame_annotation_dialog div.fad_row.add a.add-glob-button:hover {
   border-color: white;
   color: white;
}
div#${t}.ulabel-night div.frame_annotation_dialog div.fad_row.add a.add-glob-button span.plus {
   color: white;
}
div#${t} div.frame_annotation_dialog.active div.fad_row.add {
   display: inline-block;
}

div#${t} div.frame_annotation_dialog div.fad_annotation_rows {
   width: 400px;
   display: inline-block;
}

div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons {
   display: inline-block;
   vertical-align: top;
   min-height: 60px;
   width: 340px;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_type_icon {
   display: inline-block;
   vertical-align: top;
   height: 60px;
   width: 60px;
   position: relative;
   text-align: center;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_type_icon svg {
   height: 50px;
   width: 50px;
   padding: 5px;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container {
   display: inline-block;
   vertical-align: top;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container.text {
   width: 220px;
   margin: 0;
   border: none;
   padding: none;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container.text textarea {
   box-sizing: border-box;
   width: calc(100% - 2px);
   height: 58px;
   min-height: 58px;
   resize: vertical;
   background-color: rgba(0,0,0,0);
}
div#${t}.ulabel-night div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container.text textarea {
   color: white;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container.button {
   width: 30px;
   height: 30px;
   padding: 15px;
   padding-right: 20px;
   padding-left: 0;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons div.fad_inp_container.button.frst {
   padding-left: 20px;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons a.fad_button {
   display: block;
   width: 28px;
   height: 28px;
   background-color: rgba(128, 128, 128, 0.198);
   border-radius: 14px;
   border: 1px solid gray;
   color: gray;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons a.fad_button:hover {
   border-color: black;
   color: black;
}
div#${t}.ulabel-night div.frame_annotation_dialog div.fad_row div.fad_buttons a.fad_button:hover {
   border-color: white;
   color: white;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons a.fad_button.reclf {
   position: relative;
}
div#${t} div.frame_annotation_dialog div.fad_row div.fad_buttons a.fad_button.delete {
   text-decoration: none;
   text-align: center;
   line-height: 28px;
   font-size: 22px;
}


/* TOOLBOX */
div#${t} div.toolbox_cls {
   width: 320px;
   background-color: white;
   overflow-y: hidden;
   position: absolute;
   top: 0;
   right: 0;
}
div#${t}.ulabel-night div.toolbox_cls {
   background-color: rgb(24, 24, 24);
}
div#${t}.ulabel-night div.toolbox_cls p, div#${t}.ulabel-night div.toolbox_cls a {
   color: white;
}
div#${t}.ulabel-night .invert-this-svg svg {
   filter: invert(90%);
}

div#${t} div.canvasses {
   position: absolute;
   top: 0; 
   left: 0;
   padding-right: 100%;
   padding-bottom: 100%;
}
div#${t} canvas.canvas_cls {
   position: absolute;
   top: 0;
   left: 0;
}

div#${t} .id_dialog {
   width: 400px;
   height: 400px;
   background-color: rgba(0, 0, 0, 0.0);
   position: absolute;
   display: none;
}
/* .id_dialog.thumb {
   transform: scale(0.375);
   opacity: 0.5;
}
.id_dialog.thumb:hover {
   opacity: 1.0;
} */
div#${t} .ender_outer {
   display: block;
   position: absolute;
   width: 50px;
   height: 50px;
   background-color: white;
   border-radius: 25px;
   z-index: 0;
}
div#${t} .ender_inner {
   display: block;
   position: absolute;
   left: 20px;
   top: 20px;
   width: 10px;
   height: 10px;
   background-color: black;
   border-radius: 10px;
}

/* ================== TOOLBOX ================== */

div#${t} div.toolbox-divider {
   width: 90%;
   margin: 0 auto;
   height: 1px;
   background-color: lightgray;
}
div#${t}.ulabel-night div.toolbox-divider {
   background-color: gray;
}


/* === Annotation Mode === */
div#${t} p.current_mode_container {
   margin-top: 0px;
   margin-bottom: 5px;
}
div#${t} span.current_mode {
   color: cornflowerblue;
}
div#${t} div.mode-opt {
   display: inline-block;
}
div#${t} a.md-btn {
   display: block;
   text-align: center;
   height: 30px;
   width: 30px;
   padding: 10px;
   margin: 0 auto;
   text-decoration: none;
   /* background-color: rgba(231, 231, 231, 1); */
   color: black;
   font-size: 1.2em;
   font-family: sans-serif;
}

div#${t} a.md-btn svg {
   height: 30px;
   width: 30px;
}

div#${t} a.md-btn:hover {
   background-color: rgba(255, 181, 44, 0.397);
}

div#${t} a.md-btn.sel {
   background-color: rgba(100, 148, 237, 0.459);
}

/* === Pan & Zoom === */

div#${t} div.mode-selection, div#${t} div.zoom-pan {
   padding: 10px 30px;
}
/* div#${t} div.zoom-pan {
   padding-bottom: 0;
   padding-top: 0;
} */
div#${t} div.half-tb {
   display: inline-block;    
   width: 50%;
   vertical-align: middle;
}
div#${t} span.htblbl {
   display: inline-block;
   /* font-weight: bold; */
   vertical-align: middle;
}
div#${t} span.htbpyld {
   display: inline-block;
   vertical-align: middle;
}

div#${t} span.panudlr {
   display: inline-block;
   position: relative;
   width: 60px;
   height: 60px;
   border-radius: 30px;
}

div#${t} a.zbutt, div#${t} a.wbutt {
   display: inline-block;
   height: 20px;
   width: 20px;
   background-color: lightgray;
   vertical-align: middle;
   text-align: center;
   text-decoration: none;
   color: white;
   border-radius: 11px;
   line-height: 20px;
   border: 1px solid rgb(168, 168, 168);
}
div#${t} span.panudlr {
   transform: rotate(-45deg);
}
div#${t} a.pbutt {
   display: block;
   position: absolute;
   width: 28px;
   height: 28px;
   border-radius: 0;
   border: 1px solid rgb(168, 168, 168);
   background-color: lightgray;
}
div#${t} a.pbutt.up {
   right: 0;
   top: 0;
   border-top-right-radius: 30px;
}
div#${t} a.pbutt.down {
   left: 0;
   bottom: 0;
   border-bottom-left-radius: 30px;
}
div#${t} a.pbutt.left {
   left: 0;
   top: 0;
   border-top-left-radius: 30px;
}
div#${t} a.pbutt.right {
   right: 0;
   bottom: 0;
   border-bottom-right-radius: 30px;
}
div#${t} a.pbutt:hover, a.zbutt:hover, div#${t} a.wbutt:hover {
   background-color: rgba(100, 148, 237, 0.486);
}
div#${t} a.pbutt:active, div#${t} a.zbutt:active, div#${t} a.wbutt:active {
   background-color:cornflowerblue;
}
div#${t} span.spokes {
   position: absolute;
   left: 19px;
   top: 19px;
   height: 20px;
   width: 20px;
   background-color: white;
   border-radius: 10px;
   border: 1px solid gray;
}
div#${t}.ulabel-night span.spokes {
   background-color:rgb(24, 24, 24);
   /* border: 1px solid black; */
}

/* === Annotation Resize === */


div#${t} div.annotation-resize {
   padding: 10px 30px;
   display: block;
}

div#${t} div.annotation-resize p.tb-header {
   margin: 0;
   margin-bottom: 10px;
}

div#${t} div.annotation-resize-button-holder {
   vertical-align: middle;
   margin: 0 auto;
}

div#${t} a.button {
   display: inline-block;  
   margin: auto;
   color: white;
   background-color: rgba(100, 148, 237, 0.8);
   border: 1px solid rgb(168, 168, 168);
   border-radius: 11px;
   text-decoration: none;
   text-align: center;
   transition: all 0.2s;
}

div#${t} div.annotation-resize #annotation-resize-s {
   border-radius: 11px 0 0 11px;
}

div#${t} div.annotation-resize #annotation-resize-l {
   border-radius: 0 11px 11px 0;
   margin-left: -5px;
}

div#${t} a.inc {
   line-height: 23px;
   margin-top: -5px;
   margin-bottom: 5px;
}

div#${t} a.dec {
   line-height: 19px;
}

div#${t} div.annotation-resize span.annotation-size {
   width: 115px;
   margin: 0;
}

div#${t} div.annotation-resize span.annotation-inc {
   display: inline-grid;
   grid-template-columns: 1fr;
   position: relative;
   bottom: 11px;
}

div#${t} div.annotation-resize span.annotation-size a.butt-ann {
   font-size: 0.9em;
   text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.45);
   padding: 16px 9px;
}

div#${t} div.annotation-resize span.annotation-vanish a.butt-ann {
   font-size: 0.9em;
   text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.45);
   padding: 16px 8px;
   margin: 0 2px;
}

div#${t} span.increment a.button {
   width: 22px;
   height: 22px;
   border-radius: 17px;
   font-size: 1.4em;
}

div#${t} a.button:hover {
   border: 1px solid black;
   box-shadow: 1px 1px 4px rgba(204, 204, 204, 0.9);
   background-color:rgba(100, 148, 237, 0.486);
}

/* css for the recolor annotations item */

div#${t} div.recolor-active {
   padding: 10px 30px;
   display: block;
}

div#${t} div.recolor-active p.tb-header {
   margin: 0;
   margin-bottom: 5px;
}

div#${t} div.recolor-active div.annotation-recolor-button-holder {
   display: grid;
   grid-template-columns: 2fr 1fr;
   column-gap: 8px;
}

div#${t} div.recolor-active input{
   width: 50px;
   height: 27px;
}

div#${t} div.recolor-active div.recolor-tbi-gradient {
   margin-bottom: 1em;
   font-size: .85em;
}

div#${t}.ulabel-night div.recolor-active div.recolor-tbi-gradient {
   color: white;
}

div#${t} div.recolor-active div.recolor-tbi-gradient #gradient-toggle-label {
   position: relative;
   bottom: 2.5px;
}

div#${t} div.recolor-active div.recolor-tbi-gradient #gradient-toggle {
   width: 1em;
   height: 1em;
}

div#${t} div.recolor-active div.recolor-tbi-gradient #gradient-slider {
   width: 8.6em;
   height: 1em;
   position: relative;
   top: 2px;
}

div#${t} div.recolor-active div.recolor-tbi-gradient div.gradient-slider-value-display {
   display: inline;
}

div#${t} div.recolor-active input.color-change-btn {
   width: 90%;
}

div#${t} div.color-picker-border {
   padding: 8px;
   background-image: linear-gradient(to bottom right, red,orange,yellow,green,blue,indigo,violet);
   border: 1px solid White;
   border-radius: 6px;
}

div#${t} div.recolor-active div.color-picker-container {
   height: 100%;
   background-color: Black;
}

div#${t} div.recolor-active input.color-change-btn, div#${t} div.recolor-active div.color-picker-container {
   border-radius: 6px;
}

div#${t} div.recolor-active div.color-picker-container input.color-change-picker {
   width: 100%;
   height: 100%;
   padding: 0;
   opacity: 0;
}

div#${t} div.recolor-active #color-change-yel {
   background-color: yellow;
   
   border: 1px solid rgb(200, 200, 0);
}

div#${t} div.recolor-active #color-change-red {
   background-color: red;
   border: 1px solid rgb(200, 0, 0);
}

div#${t} div.recolor-active #color-change-cya {
   background-color: cyan;
   border: 1px solid rgb(0, 200, 200);
}

/* css for the keypoint slider item */
div#${t} div.keypoint-slider {
   padding: 10px 30px;
   display: block;
}

div#${t} div.keypoint-slider p.tb-header {
   margin: 0;
   margin-bottom: 5px;
}

div#${t} div.keypoint-slider div.keypoint-slider-holder{
   padding: 8px;
   position: relative;
   text-align: left;
}

div#${t} .keypoint-slider-label {
   position: relative;
   bottom: 3px;
}

div#${t} div.keypoint-slider span.increment {
   position: absolute;
   right: 0;
   bottom: 0.4em;
}

div#${t} div.keypoint-slider a.inc {
   margin: 0;
}

div#${t} div.keypoint-slider a.dec {
   position: relative;
   bottom: 0.07em;
}

div#${t}.ulabel-night .keypoint-slider-label {
   color: white;
}

div#${t} div.zpcont {
   height: 90px;
   position: relative;
   background-color: white;
}
div#${t}.ulabel-night div.zpcont {
   background-color: rgb(24, 24, 24);
}
div#${t} div.zpcont:hover, div#${t}.ulabel-night div.zpcont:hover {
   background-color: rgba(0,0,0,0);
}
div#${t} div.zpcont div.lblpyldcont {
   position: absolute;
   top: 50%;
   -ms-transform: translateY(-50%);
   transform: translateY(-50%);
}
div#${t}.ulabel-night div.zpcont div.lblpyldcont {
   color: white;
}
div#${t}.ulabel-night a.zbutt, div#${t}.ulabel-night a.wbutt {
   border: 1px solid black;
   color: black !important;
}


div#${t} div.htbmain {
   position: relative;
}
div#${t} p.shortcut-tip {
   font-size: 10px;
   text-align: left;
   color: gray;
   position: absolute;
   bottom: 3px;
   margin: 0;
}
div#${t} div.linestyle {
   padding: 10px 30px;
}
div#${t} div.linestyle p.tb-header {
   margin: 0;
   margin-bottom: 5px;
}
div#${t} canvas.demo-canvas {
   width: 120px;
   height: 40px;
   border: 1px solid lightgray;
}
div#${t}.ulabel-night canvas.demo-canvas {
   border: 1px solid rgb(87, 87, 87);
}
div#${t} div.line-expl {
   width: 185px;
}

div#${t} div.line-expl a {
   display: inline-block;
   vertical-align: middle;
}
div#${t} div.line-expl canvas {
   display: inline-block;
   vertical-align: middle;
   width: 120px;
   height: 40px;
}
div#${t} div.lstyl-row div.line-expl, div#${t} div.lstyl-row div.setting {
   display: inline-block;
   vertical-align: middle;
}
div#${t} div.setting {
   width: calc(100% - 185px);
   text-align: right;
}
div#${t} div.lstyl-row div.setting a {
   display: inline-block;
   border-radius: 5px;
   padding: 3px 6px;
   margin-bottom: 5px;
   text-decoration: none;
   color: black;
   font-size: 14px;
}
div#${t}.ulabel-night div.lstyl-row div.setting a {
   color: white;
}
div#${t} div.lstyl-row div.setting a {
   background-color: rgba(100, 148, 237, 0.479);
   color: black;
}
div#${t} div.lstyl-row div.setting a[href="#"] {
   background-color: rgba(0,0,0,0);
   color: black;
}
div#${t}.ulabel-night div.lstyl-row div.setting a[href="#"] {
   color: white;
}
div#${t} div.lstyl-row div.setting a[href="#"]:hover {
   background-color: rgba(255, 181, 44, 0.397);
}

div#${t} div.dialogs_container {
   position: absolute;
   top: 0;
   left: 0;
}

div.toolbox_inner_cls {
   height: calc(100% - 38px);
   overflow-y: scroll;
}

/* ========== Tab Buttons ========== */

div#${t} div.toolbox-tabs {
   position: absolute;
   bottom: 0;
   width: 100%;
   opacity: 0.8;
}
div#${t} div.toolbox-tabs div.tb-st-tab {
   display: block;
   width: 100%;
   padding: 5px 0;
   background-color: rgba(0, 3, 161, 0.144);
}
div#${t} div.toolbox-tabs div.tb-st-tab.sel {
   display: block;
   width: 100%;
   background-color: rgba(0, 3, 161, 0.561);
}
div#${t} div.toolbox-tabs div.tb-st-tab * {
   vertical-align: middle;
}
div#${t} div.toolbox-tabs div.tb-st-tab a.tb-st-switch {
   display: inline-block;
   width: 70px;
   padding: 0 15px;
   text-decoration: none;
   color: rgb(37, 37, 37);
}
div#${t}.ulabel-night div.toolbox-tabs div.tb-st-tab a.tb-st-switch {
   color: rgb(150, 150, 150);
}
div#${t} div.toolbox-tabs div.tb-st-tab.sel a.tb-st-switch {
   color: rgb(238, 238, 238);
}
div#${t}.ulabel-night div.toolbox-tabs div.tb-st-tab.sel a.tb-st-switch {
   color: rgb(238, 238, 238);
}
div#${t} div.toolbox-tabs div.tb-st-tab a.tb-st-switch[href]:hover {
   color: cornflowerblue;
}
div#${t}.ulabel-night div.toolbox-tabs div.tb-st-tab a.tb-st-switch[href]:hover {
   color: rgb(238, 238, 238);
}
div#${t} div.toolbox-tabs div.tb-st-tab span.tb-st-range {
   display: inline-block;
   width: calc(100% - 100px);
   text-align: center;
}
div#${t} div.toolbox-tabs div.tb-st-tab span.tb-st-range input {
   width: 80%;
   transform: rotate(180deg);
}

/* ========== Annotation Box Dialogs ========== */

div#${t} div.global_edit_suggestion {
   display: none;
   position: absolute;
   width: 150px;
   /*height: 75px;*/
   height: 0px;
   text-align: center;
   z-index: 1;
   /* background-color: white; */
   transform: scale(0.66666);
   overflow: visible;
}
div#${t} div.global_edit_suggestion.mcm {
   width: 225px;
   transform: scale(0.5);
}
div#${t} a.global_sub_suggestion {
   width: 60px;
   height: 60px;
   margin-left: 7.5px;
   margin-right: 7.5px;
   display: inline-block;
   border-radius: 37.5px;
   background-color: white;
   overflow: hidden;
   transform: translateY(-50%);
}
div#${t} a.global_sub_suggestion img {
   display: block;
   width: 40px;
   height: 40px;
   padding: 10px;
}
div#${t} a.global_sub_suggestion span.bigx {
   position: absolute;
   display: block;
   font-size: 4em;
   text-align: center;
   width: 60px;
   top: 50%;
   -ms-transform: translateY(-50%);
   transform: translateY(-50%);
   color: black;
   text-decoration: none;
}
div#${t} a.global_sub_suggestion.reid_suggestion {
   opacity: 0.3;
   background-color: black;
}
div#${t} a.global_sub_suggestion.reid_suggestion:hover {
   opacity: 0; 
}
div#${t} div.classification {
   padding: 10px 30px;
}
div#${t} div.classification p.tb-header {
   margin: 0;
   margin-bottom: 5px;
}
div#${t} div.toolbox-class-counter {
   padding: 10px 30px;
}
div#${t} div.toolbox-class-counter p.tb-header {
   margin: 0;
   margin-bottom: 5px;
}

div#${t} a.tbid-opt {
   display: inline-block;
   text-decoration: none;
   padding: 5px 8px;
   border-radius: 5px;
   color: black;
}
div#${t} div.colprev {
   display: inline-block;
   vertical-align: middle;
   height: 15px;
   width: 15px;
}
div#${t} span.tb-cls-nam {
   display: inline-block;
   vertical-align: middle;
}
div#${t} a.tbid-opt:hover {
   background-color: rgba(255, 181, 44, 0.397);
}
div#${t} a.tbid-opt.sel {
   background-color: rgba(100, 148, 237, 0.459);
}
div#${t} div.toolbox-name-header {
   background-color: rgb(0, 128, 202);
   margin: 0;
}
div#${t}.ulabel-night div.toolbox-name-header {
   background-color: rgb(0, 60, 95);
}
div#${t} div.toolbox-name-header h1 {
   margin: 0;
   padding: 0;
   font-size: 15px;
   display: inline-block;
   padding: 10px 15px;
   width: calc(70% - 30px);
   vertical-align: middle;
}
div#${t} div.toolbox-name-header h1 a {
   color: white;
   font-weight: 100;
   text-decoration: none;
}
div#${t} div.toolbox-name-header h1 {
   color: rgb(212, 212, 212);
   font-size: 12px;
   font-weight: 100;
}
div#${t}.ulabel-night div.toolbox-name-header h1 span.version-number {
   color: rgb(190, 190, 190);
}
div#${t} div.night-button-cont {
   text-align: right;
   display: inline-block;
   vertical-align: middle;
   position: relative;
   padding-right: 10px;
   width: calc(30% - 10px);
}
div#${t} a.night-button {
   display: inline-block;
   padding: 10px;
   opacity: 0.7;
}
div#${t} div.night-button-track {
   width: 35px;
   height: 12px;
   border-radius: 6px;
   position: relative;
   display: inline-block;
   background-color: rgba(0, 0, 0, 0.52);
}
div#${t} div.night-status {
   width: 20px;
   height: 20px;
   border-radius: 10px;
   position: absolute;
   background-color: rgb(139, 139, 139);
   left: -4px;
   top: -4px;
   transition: left 0.2s;
}
div#${t} a.night-button:hover {
   opacity: 1;
}
div#${t}.ulabel-night div.night-button-track {
   background-color: rgba(255, 255, 255, 0.52);
}
div#${t}.ulabel-night div.night-status {
   left: 19px;
}


div#${t}.ulabel-night *::-webkit-scrollbar {
   background-color: black;
}
div#${t}.ulabel-night *::-webkit-scrollbar-track {
   background-color: black;
}
div#${t}.ulabel-night *::-webkit-scrollbar-thumb {
   border: 1px solid rgb(110, 110, 110);
   background-color: rgb(51, 51, 51);
}
div#${t}.ulabel-night *::-webkit-scrollbar-thumb:hover {
   background-color: rgb(90, 90, 90);
} 
div#${t}.ulabel-night *::-webkit-scrollbar-corner {
   background-color:rgb(0, 60, 95);
}

div#${t} a.repo-anchor {
   text-transform: uppercase;
}


div#${t} a.id-dialog-clickable-indicator {
   position: absolute; 
   top: 0;
   left: 0;
   display: block;
   border-radius: 200px;
   height: 400px;
   width: 400px;
   overflow: hidden;
}
div#${t} a.id-dialog-clickable-indicator svg {
   position: absolute;
   top: 0;
   left: 0;
}

div#${t} .editable {
   display: none;
   position: absolute;
   width: 50px;
   height: 50px;
   background-color: gray;
   opacity: 0.7;
   border-radius: 25px;
   z-index: 0;
}
div#${t} .editable.soft {
   opacity: 0.4;
}
div#${t} .editable:hover {
   background-color: white;
   opacity: 1.0;
}
div#${t} .editable.soft:hover {
   opacity: 0.7;
}

div#${t} div.toolbox-refs {
   text-align: center;
}
div#${t} div.toolbox-refs a {
   color: rgb(5, 50, 133);
   display: inline-block;
   margin-top: 10px;
}
div#${t} div.toolbox-refs a:hover {
   color: rgb(44, 77, 139);
}
div#${t}.ulabel-night div.toolbox-refs a {
   color: rgb(176, 202, 250);
}
div#${t}.ulabel-night div.toolbox-refs a:hover {
   color: rgb(123, 160, 228);
}

div#${t} #submit-button {
   display: block;
   padding: 20px;
   border-radius: 10px;
   color: white;
   background-color: rgba(255, 166, 0, 0.739);
   text-decoration: none;
   font-size: 1.5em;
   text-align: center;
   width: 150px;
   margin: 30px auto;
   opacity: 0.6;
   position: relative;
}
div#${t} #submit-button[href="#"] {
   opacity: 1.0;
}

div#${t} #submit-button[href="#"]:hover {
   background-color: rgba(255, 166, 0, 1.0);
}
div#${t} #submit-button[href="#"]:active {
   box-shadow: 0 0 3px black;
}
div#${t}.ulabel-night #submit-button[href="#"]:active {
   box-shadow: 0 0 8px white;
}

/* Dual ring loader */
.lds-dual-ring {
    position: absolute;
    display: block;
    width: 18px;
    height: 18px;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
}
.lds-dual-ring:after {
    content: " ";
    display: block;
    width: 14.4px;
    height: 14.4px;
    margin: 1.8px;
    border-radius: 50%;
    border: 1.35px solid #fff;
    border-color: #fff transparent #fff transparent;
    animation: lds-dual-ring 1.2s linear infinite;
}
@keyframes lds-dual-ring {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}
`};const f='<div class="lds-dual-ring"></div>',_=["orange","crimson","dodgerblue","midnightblue","seagreen","tan","blueviolet","chocolate","darksalmon","deeppink","fuchsia"]},138:(t,e,s)=>{"use strict";s.r(e),s.d(e,{ULabel:()=>k,default:()=>d});var i=s(525),r=s(701),h=s(848),f=s(65),_=s(548),b=s(478),o=s(918),e=s(755),g=s.n(e),l=s(769),a=s(345);const n=g(),c=(window.$=window.jQuery=s(755),s(614))["v4"],p=(n.fn.outer_html=function(){return n("<div />").append(this.eq(0).clone()).html()},["global","bbox3"]),m=["whole-image","global"];class k{static get elvl_info(){return 0}static get elvl_standard(){return 1}static get elvl_fatal(){return 2}static version(){return a.ULABEL_VERSION}static get_time(){return(new Date).toISOString()}static has_night_mode_cookie(){return!!document.cookie.split(";").find(t=>t.trim().startsWith("nightmode=true"))}static set_night_mode_cookie(){var t=new Date;t.setTime(t.getTime()+864e9),document.cookie="nightmode=true;expires="+t.toUTCString()+";path=/"}static destroy_night_mode_cookie(){document.cookie="nightmode=true;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}static get_drag_key_start(t,e){if(null!=e.subtasks[e.state.current_subtask].state.active_id)return 2==t.button?"right":"annotation";switch(t.button){case 0:return t.target.id==e.subtasks[e.state.current_subtask].canvas_fid?t.ctrlKey||t.metaKey?"pan":t.shiftKey?"zoom":"annotation":g()(t.target).hasClass("editable")?"edit":g()(t.target).hasClass("movable")?(t.preventDefault(),"move"):(console.log("Unable to assign a drag key to click target:",t.target.id),null);case 1:return"pan";case 2:return null}}static create_listeners(i){g()(".id_dialog").on("mousemove",function(t){var e=i.state.current_subtask;i.subtasks[e].state.idd_thumbnail||i.handle_id_dialog_hover(t)});var t=g()("#"+i.config.annbox_id);t.mousedown(function(t){i.handle_mouse_down(t)}),g()(window).mouseup(function(t){i.handle_mouse_up(t)}),g()(window).on("click",t=>{t.shiftKey&&t.preventDefault()}),t.mousemove(function(t){i.handle_mouse_move(t)}),g()(document).on("keypress",t=>{t.key==i.config.create_point_annotation_keybind&&(t=i.state.current_subtask,"point"==i.subtasks[t].state.annotation_mode&&i.begin_annotation(i.state.last_move))}),document.getElementById(i.config.annbox_id).onwheel=function(t){var e,s=1<i.config.image_data.frames.length;t.ctrlKey||t.shiftKey||t.metaKey?(t.preventDefault(),i.subtasks[i.state.current_subtask].state.idd_visible&&!i.subtasks[i.state.current_subtask].state.idd_thumbnail||(e=Math.sign(t.deltaY),i.state.zoom_val*=1-e/10,i.rezoom(t.clientX,t.clientY))):s?(t.preventDefault(),e=Math.sign(t.deltaY),i.update_frame(e)):i.subtasks[i.state.current_subtask].state.idd_visible&&!i.subtasks[i.state.current_subtask].state.idd_thumbnail&&t.preventDefault()},new ResizeObserver(function(){i.reposition_dialogs()}).observe(document.getElementById(i.config.imwrap_id)),new ResizeObserver(function(){i.handle_toolbox_overflow()}).observe(document.getElementById(i.config.container_id)),g()(document).on("click","#"+i.config.toolbox_id+" .zbutt",t=>{t=g()(t.currentTarget);t.hasClass("zin")?i.state.zoom_val*=1.1:t.hasClass("zout")&&(i.state.zoom_val/=1.1),i.rezoom()}),g()(document).on("click","#"+i.config.toolbox_id+" .pbutt",t=>{var t=g()(t.currentTarget),e=g()("#"+i.config.annbox_id);t.hasClass("up")?e.scrollTop(e.scrollTop()-20):t.hasClass("down")?e.scrollTop(e.scrollTop()+20):t.hasClass("left")?e.scrollLeft(e.scrollLeft()-20):t.hasClass("right")&&e.scrollLeft(e.scrollLeft()+20)}),g()(document).on("click","#"+i.config.toolbox_id+" .wbutt",t=>{t=g()(t.currentTarget);t.hasClass("win")?i.state.line_size*=1.1:t.hasClass("wout")&&(i.state.line_size/=1.1),i.redraw_demo()}),g()(document).on("click","#"+i.config.toolbox_id+" .setting a",t=>{var e=g()(t.currentTarget);t.currentTarget.hasAttribute("href")&&(e.hasClass("fixed-setting")?(g()("#"+i.config.toolbox_id+" .setting a.fixed-setting").removeAttr("href"),g()("#"+i.config.toolbox_id+" .setting a.dyn-setting").attr("href","#"),i.state.line_size=i.state.line_size*i.state.zoom_val,i.state.size_mode="fixed"):e.hasClass("dyn-setting")&&(g()("#"+i.config.toolbox_id+" .setting a.dyn-setting").removeAttr("href"),g()("#"+i.config.toolbox_id+" .setting a.fixed-setting").attr("href","#"),i.state.line_size=i.get_line_size(),i.state.size_mode="dynamic"),i.redraw_demo())}),g()(document).on("click","#"+i.config.toolbox_id+" a.tbid-opt",t=>{var t=g()(t.currentTarget),e="div#tb-id-app--"+i.state.current_subtask,s=i.state.current_subtask;"#"==t.attr("href")&&(g()(e+" a.tbid-opt.sel").attr("href","#"),g()(e+" a.tbid-opt.sel").removeClass("sel"),t.addClass("sel"),t.removeAttr("href"),e=t.attr("id").split("_"),t=parseInt(e[e.length-1]),i.set_id_dialog_payload_nopin(i.subtasks[s].class_ids.indexOf(t),1),i.update_id_dialog_display())}),g()(document).on("click","a.tb-st-switch[href]",t=>{t=g()(t.target).attr("id").split("--")[1];i.subtasks[i.state.current_subtask].state.is_in_progress||i.set_subtask(t)}),g()(document).on("keypress",e=>{if(!i.subtasks[i.state.current_subtask].state.is_in_progress&&e.key==i.config.switch_subtask_keybind){var s,e=i.state.current_subtask,a=[];for(s in i.toolbox.tabs)a.push(i.toolbox.tabs[s].subtask_key);let t=a.indexOf(e)+1;e=a[t=t==a.length?0:t];i.set_subtask(e)}}),g()(document).on("input","input.frame_input",()=>{i.update_frame()}),g()(document).on("input","span.tb-st-range input",()=>{i.readjust_subtask_opacities()}),g()(document).on("click","div.fad_row.add a.add-glob-button",()=>{i.create_nonspatial_annotation()}),g()(document).on("focus","textarea.nonspatial_note",()=>{g()("div.frame_annotation_dialog.active").addClass("permopen")}),g()(document).on("focusout","textarea.nonspatial_note",()=>{g()("div.frame_annotation_dialog.permopen").removeClass("permopen")}),g()(document).on("input","textarea.nonspatial_note",t=>{i.subtasks[i.state.current_subtask].annotations.access[t.target.id.substring("note__".length)].text_payload=t.target.value}),g()(document).on("click","a.fad_button.delete",t=>{i.delete_annotation(t.target.id.substring("delete__".length))}),g()(document).on("click","a.fad_button.reclf",t=>{i.show_id_dialog(t.pageX,t.pageY,t.target.id.substring("reclf__".length),!1,!0)}),g()(document).on("mouseenter","div.global_edit_suggestion",t=>{var e,s=i.subtasks[i.state.current_subtask].active_annotation;let a=0;for(e in i.subtasks[i.state.current_subtask].annotations.access[s].classification_payloads){var n=i.subtasks[i.state.current_subtask].annotations.access[s].classification_payloads[e].confidence;n>a&&(a=n)}g()(".annotation-confidence-value").text(a)}),g()(document).on("mouseenter","div.fad_annotation_rows div.fad_row",t=>{i.suggest_edits(null,g()(t.currentTarget).attr("id").substring("row__".length))}),g()(document).on("mouseleave","div.fad_annotation_rows div.fad_row",()=>{i.subtasks[i.state.current_subtask].state.idd_visible&&!i.subtasks[i.state.current_subtask].state.idd_thumbnail||i.suggest_edits(null)}),g()(document).on("keypress",t=>{t.key==i.config.delete_annotation_keybind&&null!=i.subtasks[i.state.current_subtask].active_annotation&&i.delete_annotation(i.subtasks[i.state.current_subtask].active_annotation)}),g()(document).on("click","#"+i.config.container_id+" a.id-dialog-clickable-indicator",t=>{var e=i.state.current_subtask;i.subtasks[e].state.idd_thumbnail||i.handle_id_dialog_click(t)}),g()(document).on("click",".global_edit_suggestion a.reid_suggestion",t=>{var e=i.state.current_subtask,e=i.subtasks[e].state.idd_associated_annotation;i.hide_global_edit_suggestion(),i.show_id_dialog(i.get_global_mouse_x(t),i.get_global_mouse_y(t),e,!1)}),g()(document).on("click","#"+i.config.annbox_id+" .delete_suggestion",()=>{var t=i.state.current_subtask;i.delete_annotation(i.subtasks[t].state.move_candidate.annid)}),g()(document).on("click","#"+i.config.toolbox_id+" a.night-button",function(){g()("#"+i.config.container_id).hasClass("ulabel-night")?(g()("#"+i.config.container_id).removeClass("ulabel-night"),k.destroy_night_mode_cookie()):(g()("#"+i.config.container_id).addClass("ulabel-night"),k.set_night_mode_cookie())}),document.addEventListener("keydown",t=>{var e=t.shiftKey,s=t.ctrlKey||t.metaKey,a=1<i.config.image_data.frames.length,n=g()("#"+i.config.annbox_id);if(s&&("z"==t.key||"Z"==t.key||"KeyZ"==t.code))return t.preventDefault(),e?i.redo():i.undo(),!1;!s||"s"!=t.key&&"S"!=t.key&&"KeyS"!=t.code?"l"!=t.key&&("ArrowRight"==t.key?a?i.update_frame(1):n.scrollLeft(n.scrollLeft()+20):"ArrowDown"==t.key?a?i.update_frame(1):n.scrollTop(n.scrollTop()+20):"ArrowLeft"==t.key?a?i.update_frame(-1):n.scrollLeft(n.scrollLeft()-20):"ArrowUp"==t.key&&(a?i.update_frame(-1):n.scrollTop(n.scrollTop()-20))):(t.preventDefault(),g()(".submit-button")[0].click())}),window.addEventListener("beforeunload",function(t){var e;if(i.state.edited)return e="You have made unsave changes. Are you sure you would like to leave?",(t||window.event).returnValue=e})}static process_allowed_modes(t,e,s){t.subtasks[e].allowed_modes=s.allowed_modes}static process_classes(e,s,a){if(!("classes"in a))throw new Error(`classes not specified for subtask "${s}"`);if("object"!=typeof a.classes||null==a.classes.length||0==a.classes.length)throw new Error(`classes has an invalid value for subtask "${s}"`);e.subtasks[s].single_class_mode=1==a.classes.length,e.subtasks[s].class_defs=[],e.subtasks[s].class_ids=[];for(let t=0;t<a.classes.length;t++){if("string"==typeof a.classes[t]){var n=a.classes[t];e.subtasks[s].class_defs.push({name:n,color:l.COLORS[e.tot_num_classes],id:e.tot_num_classes}),e.subtasks[s].class_ids.push(e.tot_num_classes)}else{if("object"!=typeof a.classes[t])throw new Error("Entry in classes not understood: "+a.classes[t]);n={name:"Class "+e.tot_num_classes,color:l.COLORS[e.tot_num_classes],id:e.tot_num_classes};"name"in a.classes[t]&&(n.name=a.classes[t].name),"color"in a.classes[t]&&(n.color=a.classes[t].color),"id"in a.classes[t]&&(n.id=a.classes[t].id),e.subtasks[s].class_defs.push(n),e.subtasks[s].class_ids.push(n.id)}e.tot_num_classes++}}static process_resume_from(t,a,e){if(t.subtasks[a].annotations={ordering:[],access:{}},null!=e.resume_from)for(var s=0;s<e.resume_from.length;s++){var n=i.a.from_json(JSON.parse(JSON.stringify(e.resume_from[s])));if(n.new=!1,"line_size"in n&&null!=n.line_size||(n.line_size=t.state.line_size),"created_by"in n||(n.created_by=null),"created_at"in n||(n.created_at=k.get_time()),"deprecated"in n||(n.deprecated=!1),!("spatial_type"in n))throw alert(`Error: Attempted to import annotation without a spatial type (id: ${n.id})`),`Error: Attempted to import annotation without a spatial type (id: ${n.id})"`;if(!("spatial_payload"in n))throw alert(`Error: Attempted to import annotation without a spatial payload (id: ${n.id})`),`Error: Attempted to import annotation without a spatial payload (id: ${n.id})"`;"frame"in n||(n.frame=0),"annotation_meta"in n||(n.annotation_meta={}),n.ensure_compatible_classification_payloads(t.subtasks[a].class_ids),n.classification_payloads.sort((e,s)=>t.subtasks[a].class_ids.find(t=>t==e.class_id)-t.subtasks[a].class_ids.find(t=>t==s.class_id)),t.subtasks[a].annotations.ordering.push(n.id),t.subtasks[a].annotations.access[e.resume_from[s].id]=JSON.parse(JSON.stringify(n))}}static initialize_subtasks(t,e){let s=null;for(const o in e){for(var a=e[o],n=(t.subtasks[o]=r.W.from_json(o,a),null!=s||t.subtasks[o].read_only||(s=o),k.process_allowed_modes(t,o,a),k.process_classes(t,o,a),k.process_resume_from(t,o,a),t.subtasks[o].canvas_fid=t.config.canvas_fid_pfx+"__"+o,t.subtasks[o].canvas_bid=t.config.canvas_bid_pfx+"__"+o,[]),i=0;i<t.subtasks[o].class_ids.length;i++)n.push(1/t.subtasks[o].class_ids.length);t.subtasks[o].state={idd_id:"id_dialog__"+o,idd_id_front:"id_dialog_front__"+o,idd_visible:!1,idd_associated_annotation:null,idd_thumbnail:!1,id_payload:n,first_explicit_assignment:!1,annotation_mode:t.subtasks[o].allowed_modes[0],active_id:null,is_in_progress:!1,is_in_edit:!1,is_in_move:!1,edit_candidate:null,move_candidate:null,front_context:null,back_context:null,visible_dialogs:{}}}null==s&&t.raise_error("You must have at least one subtask without 'read_only' set to true.",k.elvl_fatal)}static expand_image_data(t,e){return"string"==typeof e?{spacing:{x:1,y:1,z:1,units:"pixels"},frames:[e]}:Array.isArray(e)?{spacing:{x:1,y:1,z:1,units:"pixels"},frames:e}:"spacing"in e&&"frames"in e?e:(t.raise_error('Image data object not understood. Must be of form "http://url.to/img" OR ["img1", "img2", ...] OR {spacing: {x: <num>, y: <num>, z: <num>, units: <str>}, frames: ["img1", "img2", ...]}. Provided: '+JSON.stringify(e),k.elvl_fatal),null)}static load_image_promise(s){return new Promise((t,e)=>{try{s.onload=()=>{t(s)}}catch(t){e(t)}})}constructor(t,e,s,a,n,i=null,o=null,r=1,l=null,c=4,d=null,u=null,p=null){console.log(this),console.log(p,"Toolbox order",i),this.config=new b.Configuration({container_id:t,annbox_id:"annbox",imwrap_id:"imwrap",canvas_fid_pfx:"front-canvas",canvas_bid_pfx:"back-canvas",canvas_did:"demo-canvas",canvas_class:"easel",image_id_pfx:"ann_image",imgsz_class:"imgsz",toolbox_id:"toolbox",px_per_px:r,initial_crop:l,image_data:k.expand_image_data(this,e),annotator:s,allow_soft_id:!1,default_annotation_color:"#fa9d2a",image_width:null,image_height:null,demo_width:120,demo_height:40,polygon_ender_size:30,edit_handle_size:30,instructions_url:d,submit_buttons:a,cl_opacity:.4,outer_diameter:200,inner_prop:.3,task_meta:i,annotation_meta:o}),null!=u&&this.config.modify_config(u),this.toolbox_order=p,this.tmp_nonspatial_element_ids={},this.state={zoom_val:1,last_move:null,current_frame:0,current_subtask:null,line_size:c,size_mode:"fixed",demo_canvas_context:null,edited:!1},this.subtasks={},this.tot_num_classes=0,k.initialize_subtasks(this,n),this.drag_state={active_key:null,release_button:null,annotation:{mouse_start:null,offset_start:null,zoom_val_start:null},edit:{mouse_start:null,offset_start:null,zoom_val_start:null},pan:{mouse_start:null,offset_start:null,zoom_val_start:null},zoom:{mouse_start:null,offset_start:null,zoom_val_start:null},move:{mouse_start:null,offset_start:null,zoom_val_start:null},right:{mouse_start:null,offset_start:null,zoom_val_start:null}};for(const f in this.subtasks)for(let t=0;t<this.subtasks[f].annotations.ordering.length;t++){var h=this.subtasks[f].annotations.ordering[t],h=this.subtasks[f].annotations.access[h].spatial_type;m.includes(h)||this.rebuild_containing_box(this.subtasks[f].annotations.ordering[t],!1,f)}this.is_init=!1}init(s){o.k.add_style_to_document(this);let a=this;a.state.current_subtask=Object.keys(a.subtasks)[0],o.k.prep_window_html(this,this.toolbox_order),k.has_night_mode_cookie()&&g()("#"+this.config.container_id).addClass("ulabel-night");var e=[document.getElementById(this.config.image_id_pfx+"__0")],n=[];for(let t=0;t<e.length;t++){n.push(e[t]);break}var t=n.map(k.load_image_promise);Promise.all(t).then(t=>{a.config.image_height=t[0].naturalHeight,a.config.image_width=t[0].naturalWidth;for(const e in a.subtasks)g()("#"+a.config.imwrap_id).append(`
                <div id="canvasses__${e}" class="canvasses">
                    <canvas 
                        id="${a.subtasks[e].canvas_bid}" 
                        class="${a.config.canvas_class} ${a.config.imgsz_class} canvas_cls" 
                        height=${a.config.image_height*this.config.px_per_px} 
                        width=${a.config.image_width*this.config.px_per_px}></canvas>
                    <canvas 
                        id="${a.subtasks[e].canvas_fid}" 
                        class="${a.config.canvas_class} ${a.config.imgsz_class} canvas_cls" 
                        height=${a.config.image_height*this.config.px_per_px} 
                        width=${a.config.image_width*this.config.px_per_px} 
                        oncontextmenu="return false"></canvas>
                    <div id="dialogs__${e}" class="dialogs_container"></div>
                </div>
                `),g()("#"+a.config.container_id+" div#fad_st__"+e).append(`
                    <div id="front_dialogs__${e}" class="front_dialogs"></div>
                `),a.subtasks[e].state.back_context=document.getElementById(a.subtasks[e].canvas_bid).getContext("2d"),a.subtasks[e].state.front_context=document.getElementById(a.subtasks[e].canvas_fid).getContext("2d");o.k.build_id_dialogs(a),o.k.build_edit_suggestion(a),o.k.build_confidence_dialog(a),k.create_listeners(a),a.handle_toolbox_overflow(),a.set_subtask(a.state.current_subtask),a.is_init=!0,g()("div#"+this.config.container_id).css("display","block"),this.show_initial_crop(),this.update_frame(),a.redraw_demo(),a.redraw_all_annotations(),s()}).catch(t=>{console.log(t),this.raise_error("Unable to load images: "+JSON.stringify(t),k.elvl_fatal)})}version(){return k.version()}handle_toolbox_overflow(){var t=g()("#"+this.config.container_id+" div.toolbox-tabs").height(),t=(g()("#"+this.config.container_id+" div.toolbox_inner_cls").css("height",`calc(100% - ${t+38}px)`),g()("#"+this.config.container_id+" div.toolbox_cls")[0].scrollHeight-38-t);g()("#"+this.config.container_id+" div.toolbox_inner_cls")[0].scrollHeight<=t?g()("#"+this.config.container_id+" div.toolbox_inner_cls").css("overflow-y","hidden"):g()("#"+this.config.container_id+" div.toolbox_inner_cls").css("overflow-y","scroll")}get_viewport_height_ratio(t){return g()("#"+this.config.annbox_id).height()/t}get_viewport_width_ratio(t){return g()("#"+this.config.annbox_id).width()/t}show_initial_crop(){var t,e,s,a=this.config.initial_crop;if(null!=a){if("width"in a&&"height"in a&&"left"in a&&"top"in a)return t=this.config.image_width,e=this.config.image_height,a.left=Math.max(a.left,0),a.top=Math.max(a.top,0),a.width=Math.min(a.width,t-a.left),a.height=Math.min(a.height,e-a.top),t=a.width,e=a.height,s=a.left+a.width/2,a=a.top+a.height/2,this.state.zoom_val=Math.min(this.get_viewport_height_ratio(e),this.get_viewport_width_ratio(t)),void this.rezoom(s,a,!0);this.raise_error('Initial crop must contain properties "width", "height", "left", and "top". Ignoring.',k.elvl_info)}this.show_whole_image()}show_whole_image(){var t=this.config.image_width,e=this.config.image_height;this.state.zoom_val=Math.min(this.get_viewport_height_ratio(e),this.get_viewport_width_ratio(t)),this.rezoom(0,0,!0)}update_cursor(){var t=this.get_annotation_color(null,!0),e=this.get_line_size()*this.state.zoom_val,s=Math.max(Math.min(e,64),6),a=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="${s}px" height="${s}px" viewBox="0 0 ${s} ${s}">
            <circle cx="${s/2}" cy="${s/2}" r="${s/2}" opacity="0.8" stroke="white" fill="${t}" />
        </svg>`,e=Math.max(Math.min(e,32),6),t=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="${e}px" height="${e}px" viewBox="0 0 ${e} ${e}">
            <circle cx="${e/2}" cy="${e/2}" r="${e/2}" opacity="0.8" stroke="${t}" fill="${t}" />
        </svg>`,a=btoa(a),t=btoa(t);g()("#"+this.config.annbox_id).css("cursor",`url(data:image/svg+xml;base64,${a}) ${s/2} ${s/2}, url(data:image/svg+xml;base64,${t}) ${e/2} ${e/2}, auto`)}readjust_subtask_opacities(){for(const e in this.subtasks){var t=g()("#tb-st-range--"+e).val();g()("div#canvasses__"+e).css("opacity",t/100)}}set_subtask(t){var e=this.state.current_subtask;this.state.current_subtask=t,g()("div.canvasses").css("z-index",75),g()("div#canvasses__"+this.state.current_subtask).css("z-index",100),g()("div.dialogs_container").css("display","none"),g()("div#dialogs__"+this.state.current_subtask).css("display","block"),g()("a.md-btn").css("display","none"),g()("a.md-btn.md-en4--"+t).css("display","inline-block"),g()("div.tb-id-app").css("display","none"),g()("div#tb-id-app--"+this.state.current_subtask).css("display","block"),g()("a#tb-st-switch--"+e).attr("href","#"),g()("a#tb-st-switch--"+e).parent().removeClass("sel"),g()("input#tb-st-range--"+e).val(Math.round(100*this.subtasks[e].inactive_opacity)),g()("a#tb-st-switch--"+t).removeAttr("href"),g()("a#tb-st-switch--"+t).parent().addClass("sel"),g()("input#tb-st-range--"+t).val(100),this.update_annotation_mode(),this.update_current_class(),this.readjust_subtask_opacities(),this.redraw_demo()}update_annotation_mode(){g()("a.md-btn.sel").attr("href","#"),g()("a.md-btn.sel").removeClass("sel"),g()("a#md-btn--"+this.subtasks[this.state.current_subtask].state.annotation_mode).addClass("sel"),g()("a#md-btn--"+this.subtasks[this.state.current_subtask].state.annotation_mode).removeAttr("href"),this.show_annotation_mode()}update_current_class(){this.update_id_toolbox_display()}show_annotation_mode(t=null){t=(t=null==t?g()("a.md-btn.sel"):t).attr("amdname");g()("#"+this.config.toolbox_id+" .current_mode").html(t),g()(`div.frame_annotation_dialog:not(.fad_st__${this.state.current_subtask})`).removeClass("active"),["whole-image","global"].includes(this.subtasks[this.state.current_subtask].state.annotation_mode)?g()("div.frame_annotation_dialog.fad_st__"+this.state.current_subtask).addClass("active"):g()("div.frame_annotation_dialog").removeClass("active")}redraw_demo(){}get_empirical_scale(){return g()("#"+this.config.imwrap_id).width()/this.config.image_width}make_new_annotation_id(){return c()}get_init_spatial(t,e,s){switch(s){case"point":return[[t,e]];case"bbox":case"polygon":case"polyline":case"contour":case"tbar":return[[t,e],[t,e]];case"bbox3":return[[t,e,this.state.current_frame],[t,e,this.state.current_frame]];default:return this.raise_error("Annotation mode is not understood",k.elvl_info),null}}get_init_id_payload(){return this.set_id_dialog_payload_to_init(null),JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.id_payload))}get_with_access_string(t,e,s=!1){let a,n,i,o,r,l,c,d,u,p;switch(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type){case"bbox":return a=parseInt(e[0],10),n=parseInt(e[1],10),[(o=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload)[a][0],o[n][1]];case"point":return JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload));case"bbox3":return a=parseInt(e[0],10),n=parseInt(e[1],10),o=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload,r=[o[a][0],o[n][1]],2<e.length&&(i=parseInt(e[2],10),r.push(o[i][2])),r;case"polygon":case"polyline":return l=parseInt(e,10),(c=parseFloat(e)-l)<.005?this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[l]:s?(c=0,l+=1,this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[l]):h.Z.interpolate_poly_segment(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload,l,c);case"tbar":return d=parseInt(e[0],10),u=parseInt(e[1],10),[(p=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload)[d][0],p[u][1]];default:this.raise_error("Unable to apply access string to annotation of type "+this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type,k.elvl_standard)}}set_with_access_string(t,e,s,a=null){let n,i,o;var r=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type;switch(r){case"bbox":n=parseInt(e[0],10),i=parseInt(e[1],10),this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[n][0]=s[0],this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[i][1]=s[1];break;case"point":this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[n][0]=s[0],this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[n][0]=s[0];break;case"bbox3":n=parseInt(e[0],10),i=parseInt(e[1],10),this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[n][0]=s[0],this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[i][1]=s[1],2<e.length&&2<s.length&&(o=parseInt(e[2],10),this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[o][2]=s[2]);break;case"tbar":n=parseInt(e[0],10),i=parseInt(e[1],10),this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[n][0]=s[0],this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[i][1]=s[1];break;case"polygon":case"polyline":var l,c,d=parseInt(e,10),u=parseFloat(e)-d;u<.005?(c=parseInt(e,10),l=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload.length,"polygon"!=r||0!=c&&c!=l-1?this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[c]=s:(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[0]=[s[0],s[1]],this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload[l-1]=[s[0],s[1]])):!0===a?this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload.splice(d+1,1):!1===a?this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload.splice(d+1,0,[s[0],s[1]]):(c=h.Z.interpolate_poly_segment(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload,d,u),this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload.splice(d+1,0,c));break;default:this.raise_error("Unable to apply access string to annotation of type "+this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type,k.elvl_standard)}}get_annotation_color(t,a=!1,n=null){if(!this.config.allow_soft_id){let e=this.state.current_subtask,s=(null==n||a||(e=n),JSON.parse(JSON.stringify(this.subtasks[e].state.id_payload)));if(a)for(var i=this.subtasks[e].class_ids,n="div#tb-id-app--"+this.state.current_subtask,a=g()(n+" a.tbid-opt.sel").attr("id").split("_"),o=i.indexOf(parseInt(a[a.length-1])),r=0;r<i.length;r++)s[r]=r==o?{class_id:i[r],confidence:1}:{class_id:i[r],confidence:0/(i.length-1)};else null!=t&&(s=t);for(let t=0;t<s.length;t++)if(0<s[t].confidence)return this.subtasks[e].class_defs[t].color}return this.config.default_annotation_color}draw_bounding_box(t,e,s=!1,a=null,n=null){var i=this.config.px_per_px;let o=0,r=0,l=(null!=a&&(o=a.diffX,r=a.diffY),null);l="line_size"in t?t.line_size:this.get_line_size(s);a=this.get_annotation_color(t.classification_payloads,!1,n),s=(0,_.ws)(t,a,f.get_annotation_confidence,g()("#gradient-slider").val()/100),e.fillStyle=s,e.strokeStyle=s,e.lineJoin="round",e.lineWidth=l*i,e.imageSmoothingEnabled=!1,e.globalCompositeOperation="source-over",n=t.spatial_payload[0],a=t.spatial_payload[1];e.beginPath(),e.moveTo((n[0]+o)*i,(n[1]+r)*i),e.lineTo((n[0]+o)*i,(a[1]+r)*i),e.lineTo((a[0]+o)*i,(a[1]+r)*i),e.lineTo((a[0]+o)*i,(n[1]+r)*i),e.lineTo((n[0]+o)*i,(n[1]+r)*i),e.closePath(),e.stroke()}draw_point(t,e,s=!1,a=null,n=null){var i=this.config.px_per_px;let o=0,r=0,l=(null!=a&&(o=a.diffX,r=a.diffY),null);l="line_size"in t?t.line_size:this.get_line_size(s);a=this.get_annotation_color(t.classification_payloads,!1,n),s=(0,_.ws)(t,a,f.get_annotation_confidence,g()("#gradient-slider").val()/100),e.fillStyle=s,e.strokeStyle=s,e.lineJoin="round",e.lineWidth=l*i,e.imageSmoothingEnabled=!1,e.globalCompositeOperation="source-over",n=t.spatial_payload[0];e.beginPath(),e.arc((n[0]+o)*i,(n[1]+r)*i,l*i*.75,0,2*Math.PI),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.arc((n[0]+o)*i,(n[1]+r)*i,l*i*3,0,2*Math.PI),e.closePath(),e.stroke()}draw_bbox3(s,a,n=!1,i=null,o=null){var r=this.config.px_per_px;let l=0,c=0,d=0;null!=i&&(l=i.diffX,c=i.diffY,"diffZ"in i&&(d=i.diffZ));var i=this.state.current_frame,u=s.spatial_payload[0],p=s.spatial_payload[1];if(!(i<Math.min(u[2],p[2])+d||i>Math.max(u[2],p[2])+d)){let t=!1,e=(i!=Math.min(u[2],p[2])+d&&i!=Math.max(u[2],p[2])+d||(t=!0),null);e="line_size"in s?s.line_size:this.get_line_size(n);i=this.get_annotation_color(s.classification_payloads,!1,o),n=(0,_.ws)(s,i,f.get_annotation_confidence,g()("#gradient-slider").val()/100);a.fillStyle=n,a.strokeStyle=n,a.lineJoin="round",a.lineWidth=e*r,a.imageSmoothingEnabled=!1,a.globalCompositeOperation="source-over",a.beginPath(),a.moveTo((u[0]+l)*r,(u[1]+c)*r),a.lineTo((u[0]+l)*r,(p[1]+c)*r),a.lineTo((p[0]+l)*r,(p[1]+c)*r),a.lineTo((p[0]+l)*r,(u[1]+c)*r),a.lineTo((u[0]+l)*r,(u[1]+c)*r),a.closePath(),a.stroke(),t&&(a.globalAlpha=.2,a.fill(),a.globalAlpha=1)}}draw_polygon(t,e,s=!1,a=null,n=null){var i=this.config.px_per_px;let o=0,r=0,l=(null!=a&&(o=a.diffX,r=a.diffY),null);l="line_size"in t?t.line_size:this.get_line_size(s);var a=this.get_annotation_color(t.classification_payloads,s,n),s=(0,_.ws)(t,a,f.get_annotation_confidence,g()("#gradient-slider").val()/100),c=(e.fillStyle=s,e.strokeStyle=s,e.lineJoin="round",e.lineWidth=l*i,e.lineCap="round",e.imageSmoothingEnabled=!1,e.globalCompositeOperation="source-over",t.spatial_payload);e.beginPath(),e.moveTo((c[0][0]+o)*i,(c[0][1]+r)*i);for(var d=1;d<c.length;d++)e.lineTo((c[d][0]+o)*i,(c[d][1]+r)*i);e.stroke()}draw_contour(t,e,s=!1,a=null,n=null){var i=this.config.px_per_px;let o=0,r=0,l=(null!=a&&(o=a.diffX,r=a.diffY),null);l="line_size"in t?t.line_size:this.get_line_size(s);var a=this.get_annotation_color(t.classification_payloads,s,n),s=(0,_.ws)(t,a,f.get_annotation_confidence,g()("#gradient-slider").val()/100),c=(e.fillStyle=s,e.strokeStyle=s,e.lineJoin="round",e.lineWidth=l*i,e.lineCap="round",e.imageSmoothingEnabled=!1,e.globalCompositeOperation="source-over",t.spatial_payload);e.beginPath(),e.moveTo((c[0][0]+o)*i,(c[0][1]+r)*i);for(var d=1;d<c.length;d++)e.lineTo((c[d][0]+o)*i,(c[d][1]+r)*i);e.stroke()}draw_tbar(t,e,s=!1,a=null,n=null){var i=this.config.px_per_px;let o=0,r=0,l=(null!=a&&(o=a.diffX,r=a.diffY),null);l="line_size"in t?t.line_size:this.get_line_size(s);a=this.get_annotation_color(t.classification_payloads,s,n),s=(0,_.ws)(t,a,f.get_annotation_confidence,g()("#gradient-slider").val()/100),e.fillStyle=s,e.strokeStyle=s,e.lineJoin="round",e.lineWidth=l*i,e.imageSmoothingEnabled=!1,e.globalCompositeOperation="source-over",n=t.spatial_payload[0],a=t.spatial_payload[1],e.beginPath(),e.moveTo((n[0]+o)*i,(n[1]+r)*i),e.lineTo((a[0]+o)*i,(a[1]+r)*i),e.stroke(),s=Math.sqrt((n[0]-a[0])*(n[0]-a[0])+(n[1]-a[1])*(n[1]-a[1]))/2,t=Math.atan((a[1]-n[1])/(a[0]-n[0])),a=[n[0]+s*Math.sin(t),n[1]-s*Math.cos(t)],n=[n[0]-s*Math.sin(t),n[1]+s*Math.cos(t)];e.lineCap="square",e.beginPath(),e.moveTo((a[0]+o)*i,(a[1]+r)*i),e.lineTo((n[0]+o)*i,(n[1]+r)*i),e.stroke(),e.lineCap="round"}register_nonspatial_redraw_start(s){this.tmp_nonspatial_element_ids[s]=[],g()("div#fad_st__"+s).length&&g()(`div#fad_st__${s} div.fad_annotation_rows div.fad_row`).each((t,e)=>{this.tmp_nonspatial_element_ids[s].push(g()(e).attr("id"))})}draw_nonspatial_annotation(e,t,s=null){null==s&&(s=this.state.current_subtask);let a=!1;for(let t=0;t<this.tmp_nonspatial_element_ids[s].length;t++)"row__"+e.id==this.tmp_nonspatial_element_ids[s][t]&&(this.tmp_nonspatial_element_ids[s][t]=null,a=!0);a?(g()("textarea#note__"+e.id).val(e.text_payload),g()("div#icon__"+e.id).css("background-color",this.get_annotation_color(e.classification_payloads,!1,s))):g()(`div#fad_st__${s} div.fad_annotation_rows`).append(`
            <div id="row__${e.id}" class="fad_row">
                <div class="fad_buttons">
                    <div class="fad_inp_container text">
                        <textarea id="note__${e.id}" class="nonspatial_note" placeholder="Notes...">${e.text_payload}</textarea>
                    </div><!--
                    --><div class="fad_inp_container button frst">
                        <a href="#" id="reclf__${e.id}" class="fad_button reclf"></a>
                    </div><!--
                    --><div class="fad_inp_container button">
                        <a href="#" id="delete__${e.id}" class="fad_button delete">&#215;</a>
                    </div>
                </div><!--
                --><div id="icon__${e.id}" class="fad_type_icon invert-this-svg" style="background-color: ${this.get_annotation_color(e.classification_payloads,!1,s)};">
                    ${t}
                </div>
            </div>
            `)}draw_whole_image_annotation(t,e=null){this.draw_nonspatial_annotation(t,l.WHOLE_IMAGE_SVG,e)}draw_global_annotation(t,e=null){this.draw_nonspatial_annotation(t,l.GLOBAL_SVG,e)}handle_nonspatial_redraw_end(e){for(let t=0;t<this.tmp_nonspatial_element_ids[e].length;t++)g()("#"+this.tmp_nonspatial_element_ids[e][t]).remove();this.tmp_nonspatial_element_ids[e]=[]}draw_annotation(e,s="front_context",a=!1,n=null,i=null){if(!e.deprecated){let t=null;if("demo"==i){if("demo_canvas_context"!=s)throw new Error("Error drawing demo annotation.");t=this.state.demo_canvas_context}else t=this.subtasks[i].state[s];switch(e.spatial_type){case"bbox":this.draw_bounding_box(e,t,a,n,i);break;case"point":this.draw_point(e,t,a,n,i);break;case"bbox3":this.draw_bbox3(e,t,a,n,i);break;case"polygon":case"polyline":this.draw_polygon(e,t,a,n,i);break;case"contour":this.draw_contour(e,t,a,n,i);break;case"tbar":this.draw_tbar(e,t,a,n,i);break;case"whole-image":this.draw_whole_image_annotation(e,i);break;case"global":this.draw_global_annotation(e,i);break;default:this.raise_error("Warning: Annotation "+e.id+" not understood",k.elvl_info)}}}draw_annotation_from_id(t,e="front_context",s=null,a=null){null==a&&(a=this.state.current_subtask);var n=this.subtasks[a].annotations.access[t].frame;null!=n&&"undefined"!=n&&n!=this.state.current_frame||this.draw_annotation(this.subtasks[a].annotations.access[t],e,!1,s,a)}draw_n_annotations(t,e="front_context",s=null,a=null,n=!1){null==a&&(a=this.state.current_subtask);for(var i=0;i<t;i++){var o=this.subtasks[a].annotations.ordering[i];n&&m.includes(this.subtasks[a].annotations.access[o].spatial_type)||(null!=s&&s.id==o?this.draw_annotation_from_id(o,e,s,a):this.draw_annotation_from_id(o,e,null,a))}}redraw_all_annotations_in_subtask(t,e=null,s=!1){this.subtasks[t].state.front_context.clearRect(0,0,this.config.image_width*this.config.px_per_px,this.config.image_height*this.config.px_per_px),s||this.register_nonspatial_redraw_start(t),this.draw_n_annotations(this.subtasks[t].annotations.ordering.length,"front_context",e,t,s),s||this.handle_nonspatial_redraw_end(t)}redraw_all_annotations(t=null,e=null,s=!1){if(null==t)for(const a in this.subtasks)this.redraw_all_annotations_in_subtask(a,e,s);else this.redraw_all_annotations_in_subtask(t,e,s);this.toolbox.redraw_update_items(this)}reposition_dialogs(){var s,t=g()("#"+this.config.imwrap_id),a=t.width(),n=t.height(),i=this.state.current_subtask;for(s in this.subtasks[i].state.visible_dialogs){var o=this.subtasks[i].state.visible_dialogs[s],r=g()("#"+s);let t=o.left*a,e=o.top*n;"center"===o.pin&&(t-=r.width()/2,e-=r.height()/2),r.css("left",t+"px"),r.css("top",e+"px")}}create_polygon_ender(t,e,s){var s="ender_"+s,a=`
        <a href="#" id="${s}" class="ender_outer">
            <span id="${s}_inner" class="ender_inner"></span>
        </a>
        `;g()("#dialogs__"+this.state.current_subtask).append(a),g()("#"+s).css({width:this.config.polygon_ender_size+"px",height:this.config.polygon_ender_size+"px","border-radius":this.config.polygon_ender_size/2+"px"}),g()("#"+s+"_inner").css({width:this.config.polygon_ender_size/5+"px",height:this.config.polygon_ender_size/5+"px","border-radius":this.config.polygon_ender_size/10+"px",top:2*this.config.polygon_ender_size/5+"px",left:2*this.config.polygon_ender_size/5+"px"}),this.subtasks[this.state.current_subtask].state.visible_dialogs[s]={left:t/this.config.image_width,top:e/this.config.image_height,pin:"center"},this.reposition_dialogs()}destroy_polygon_ender(t){t="ender_"+t;g()("#"+t).remove(),delete this.subtasks[this.state.current_subtask].state.visible_dialogs[t],this.reposition_dialogs()}show_edit_suggestion(t,e){var s="edit_suggestion__"+this.state.current_subtask,a=g()("#"+s);a.css("display","block"),e?a.removeClass("soft"):a.addClass("soft"),this.subtasks[this.state.current_subtask].state.visible_dialogs[s].left=t.point[0]/this.config.image_width,this.subtasks[this.state.current_subtask].state.visible_dialogs[s].top=t.point[1]/this.config.image_height,this.reposition_dialogs()}hide_edit_suggestion(){g()(".edit_suggestion").css("display","none")}show_global_edit_suggestion(t,e=null,s=null){let a=0,n=0;null!=e&&(a=e.diffX,n=e.diffY);let i,o;var r,l,c;o=null==s?(e="global_edit_suggestion__"+this.state.current_subtask,g()("#"+e).css("display","block"),l=((r=this.subtasks[this.state.current_subtask].annotations.access[t].containing_box).tlx+r.brx+2*a)/(2*this.config.image_width),c=(r.tly+r.bry+2*n)/(2*this.config.image_height),this.subtasks[this.state.current_subtask].state.visible_dialogs[e].left=l,this.subtasks[this.state.current_subtask].state.visible_dialogs[e].top=c,this.reposition_dialogs(),i=(r.tlx+r.brx+2*a)/2,(r.tly+r.bry+2*n)/2):(i=g()("#reclf__"+s).offset().left-85,g()("#reclf__"+s).offset().top-85),this.subtasks[this.state.current_subtask].single_class_mode||this.show_id_dialog(i,o,t,!0,null!=s)}hide_global_edit_suggestion(){g()(".global_edit_suggestion").css("display","none"),this.hide_id_dialog()}show_id_dialog(e,t,s,a=!1,n=!1){var i=this.state.current_subtask;this.subtasks[this.state.current_subtask].state.idd_visible=!0,this.subtasks[this.state.current_subtask].state.idd_thumbnail=a,this.subtasks[this.state.current_subtask].state.idd_associated_annotation=s,this.subtasks[this.state.current_subtask].state.idd_which="back";let o=this.subtasks[this.state.current_subtask].state.idd_id,r=this.subtasks[this.state.current_subtask].state.idd_id_front,l=g()(`#global_edit_suggestion__${i} a.reid_suggestion`)[0].getBoundingClientRect().height;n?(this.subtasks[this.state.current_subtask].state.idd_which="front",o=this.subtasks[this.state.current_subtask].state.idd_id_front,r=this.subtasks[this.state.current_subtask].state.idd_id,l=28):this.subtasks[this.state.current_subtask].state.visible_dialogs[o]={left:e/this.config.image_width,top:t/this.config.image_height,pin:"center"};e=g()("#"+o),t=g()("#"+r);if(n){var c=g()("#reclf__"+s),i=g()(`#fad_st__${i} div.front_dialogs`);let t=2e3;a&&(t=-1);var d=c.offset().top-i.offset().top-100+l/2,c=c.offset().left-i.offset().left-100+1+l/2;e.css({display:"block",position:"absolute",top:d+"px",left:c+"px","z-index":t}),e.parent().css({"z-index":t})}i=l/this.config.outer_diameter;a?(e.hasClass("thumb")||e.addClass("thumb"),g()("#"+o+".thumb").css({transform:`scale(${i})`})):(g()("#"+o+".thumb").css({transform:"scale(1.0)"}),e.hasClass("thumb")&&e.removeClass("thumb")),this.reposition_dialogs(),this.set_id_dialog_payload_to_init(s),this.update_id_dialog_display(n),a||this.update_id_toolbox_display(),e.css("display","block"),t.css("display","none")}hide_id_dialog(){var t=this.subtasks[this.state.current_subtask].state.idd_id,e=this.subtasks[this.state.current_subtask].state.idd_id_front;this.subtasks[this.state.current_subtask].state.idd_visible=!1,this.subtasks[this.state.current_subtask].state.idd_associated_annotation=null,g()("#"+t).css("display","none"),g()("#"+e).css("display","none")}undo(){var t;this.subtasks[this.state.current_subtask].state.idd_thumbnail||this.hide_id_dialog(),0<this.subtasks[this.state.current_subtask].actions.stream.length&&(!1===this.subtasks[this.state.current_subtask].actions.stream[this.subtasks[this.state.current_subtask].actions.stream.length-1].redo_payload.finished&&this.finish_action(this.subtasks[this.state.current_subtask].actions.stream[this.subtasks[this.state.current_subtask].actions.stream.length-1]),this.subtasks[this.state.current_subtask].actions.undone_stack.push(this.subtasks[this.state.current_subtask].actions.stream.pop()),null!=(t=this.undo_action(this.subtasks[this.state.current_subtask].actions.undone_stack[this.subtasks[this.state.current_subtask].actions.undone_stack.length-1]))&&(this.subtasks[this.state.current_subtask].actions.undone_stack[this.subtasks[this.state.current_subtask].actions.undone_stack.length-1]=t))}redo(){0<this.subtasks[this.state.current_subtask].actions.undone_stack.length&&this.redo_action(this.subtasks[this.state.current_subtask].actions.undone_stack.pop())}delete_annotation(t,e=null){let s=t,a=s,n=a,i=!1;null!=e&&(i=!0,s=e.annid,a=e.old_id);t=this.subtasks[this.state.current_subtask].annotations.access[a].spatial_type;let o=!1,r=(this.subtasks[this.state.current_subtask].annotations.access[a].new||(o=!0,n=i?e.new_id:this.make_new_annotation_id(),this.subtasks[this.state.current_subtask].annotations.access[n]=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[a])),this.subtasks[this.state.current_subtask].annotations.access[n].id=n,this.subtasks[this.state.current_subtask].annotations.access[n].created_by=this.config.annotator,this.subtasks[this.state.current_subtask].annotations.access[n].new=!0,this.subtasks[this.state.current_subtask].annotations.access[n].parent_id=a,this.subtasks[this.state.current_subtask].annotations.ordering.push(n),this.subtasks[this.state.current_subtask].annotations.access[a].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[a].human_deprecated=!0,s=n),null!=this.subtasks[this.state.current_subtask].state.active_id&&(this.subtasks[this.state.current_subtask].state.active_id=null,this.subtasks[this.state.current_subtask].state.is_in_edit=!1,this.subtasks[this.state.current_subtask].state.is_in_move=!1,this.subtasks[this.state.current_subtask].state.is_in_progress=!1),this.subtasks[this.state.current_subtask].annotations.access[s].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[s].human_deprecated=!0,this.redraw_all_annotations(this.state.current_subtask),this.hide_global_edit_suggestion(),this.state.current_frame);p.includes(t)&&(r=null),this.record_action({act_type:"delete_annotation",frame:r,undo_payload:{annid:s,deprecate_old:o,old_id:a,new_id:n},redo_payload:{annid:s,deprecate_old:o,old_id:a,new_id:n}},i)}delete_annotation__undo(t){var e;t.annid;t.deprecate_old?(e=t.old_id,this.subtasks[this.state.current_subtask].annotations.access[e].deprecated=!1,delete this.subtasks[this.state.current_subtask].annotations.access[t.new_id],e=this.subtasks[this.state.current_subtask].annotations.ordering.indexOf(t.new_id),this.subtasks[this.state.current_subtask].annotations.ordering.splice(e,1)):this.subtasks[this.state.current_subtask].annotations.access[t.annid].deprecated=!1,this.redraw_all_annotations(this.state.current_subtask),this.suggest_edits(this.state.last_move)}delete_annotation__redo(t){this.delete_annotation(null,t)}get_nearest_active_keypoint(e,s,a,n=null){for(var i,o,r,l={annid:null,access:null,distance:a/this.get_empirical_scale(),point:null},c=(null==n&&(n=this.subtasks[this.state.current_subtask].annotations.ordering),0);c<n.length;c++){i=n[c];let t=null;switch(this.subtasks[this.state.current_subtask].annotations.access[i].spatial_type){case"bbox":(t=h.Z.get_nearest_point_on_bounding_box(e,s,this.subtasks[this.state.current_subtask].annotations.access[i].spatial_payload,a)).distance<l.distance&&(l.annid=i,l.access=t.access,l.distance=t.distance,l.point=t.point);break;case"bbox3":o=this.state.current_frame,r=this.subtasks[this.state.current_subtask].annotations.access[i].spatial_payload,o>=Math.min(r[0][2],r[1][2])&&o<=Math.max(r[0][2],r[1][2])&&(t=h.Z.get_nearest_point_on_bbox3(e,s,o,r,a)).distance<l.distance&&(l.annid=i,l.access=t.access,l.distance=t.distance,l.point=t.point);break;case"polygon":case"polyline":(t=h.Z.get_nearest_point_on_polygon(e,s,this.subtasks[this.state.current_subtask].annotations.access[i].spatial_payload,a,!1)).distance<l.distance&&(l.annid=i,l.access=t.access,l.distance=t.distance,l.point=t.point);break;case"tbar":(t=h.Z.get_nearest_point_on_tbar(e,s,this.subtasks[this.state.current_subtask].annotations.access[i].spatial_payload,a)).distance<l.distance&&(l.annid=i,l.access=t.access,l.distance=t.distance,l.point=t.point)}}return null==l.annid?null:l}get_nearest_segment_point(t,e,s,a=null){var n={annid:null,access:null,distance:s/this.get_empirical_scale(),point:null};null==a&&(a=this.subtasks[this.state.current_subtask].annotations.ordering);for(var i=0;i<a.length;i++){var o=a[i];switch(this.subtasks[this.state.current_subtask].annotations.access[o].spatial_type){case"bbox":case"bbox3":case"point":break;case"polygon":case"polyline":var r=h.Z.get_nearest_point_on_polygon(t,e,this.subtasks[this.state.current_subtask].annotations.access[o].spatial_payload,s/this.get_empirical_scale(),!0);null!=r.distance&&r.distance<n.distance&&(n.annid=o,n.access=r.access,n.distance=r.distance,n.point=r.point)}}return null==n.annid?null:n}get_line_size(t=!1){let e=this.state.line_size*this.config.px_per_px;return t?"dynamic"==this.state.size_mode&&(e*=this.state.zoom_val):"fixed"==this.state.size_mode&&(e/=this.state.zoom_val),e}set_saved(t,e=0){this.state.edited=!t}record_action(t,e=!1){this.set_saved(!1),e||(this.subtasks[this.state.current_subtask].actions.undone_stack=[]),this.subtasks[this.state.current_subtask].actions.stream.push(t)}record_finish(t){var e=this.subtasks[this.state.current_subtask].actions.stream.length-1;this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.init_spatial=this.subtasks[this.state.current_subtask].annotations.access[t].spatial_payload,this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.finished=!0}record_finish_edit(t){var e=this.subtasks[this.state.current_subtask].actions.stream.length-1,t=this.get_with_access_string(t,this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.edit_candidate.access,!0);this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.ending_x=t[0],this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.ending_y=t[1],this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.ending_frame=this.state.current_frame,this.subtasks[this.state.current_subtask].actions.stream[e].redo_payload.finished=!0}record_finish_move(t,e,s=0){var a=this.subtasks[this.state.current_subtask].actions.stream.length-1;this.subtasks[this.state.current_subtask].actions.stream[a].redo_payload.diffX=t,this.subtasks[this.state.current_subtask].actions.stream[a].redo_payload.diffY=e,this.subtasks[this.state.current_subtask].actions.stream[a].redo_payload.diffZ=s,this.subtasks[this.state.current_subtask].actions.stream[a].undo_payload.diffX=-t,this.subtasks[this.state.current_subtask].actions.stream[a].undo_payload.diffY=-e,this.subtasks[this.state.current_subtask].actions.stream[a].undo_payload.diffZ=-s,this.subtasks[this.state.current_subtask].actions.stream[a].redo_payload.finished=!0}undo_action(t){switch(this.update_frame(null,t.frame),t.act_type){case"begin_annotation":this.begin_annotation__undo(t.undo_payload);break;case"continue_annotation":this.continue_annotation__undo(t.undo_payload);break;case"finish_annotation":this.finish_annotation__undo(t.undo_payload);break;case"edit_annotation":this.edit_annotation__undo(t.undo_payload);break;case"move_annotation":this.move_annotation__undo(t.undo_payload);break;case"delete_annotation":this.delete_annotation__undo(t.undo_payload);break;case"assign_annotation_id":this.assign_annotation_id__undo(t.undo_payload);break;case"create_nonspatial_annotation":this.create_nonspatial_annotation__undo(t.undo_payload);break;default:console.log("Undo error :(")}}redo_action(t){switch(this.update_frame(null,t.frame),t.act_type){case"begin_annotation":this.begin_annotation(null,t.redo_payload);break;case"continue_annotation":this.continue_annotation(null,null,t.redo_payload);break;case"finish_annotation":this.finish_annotation(null,t.redo_payload);break;case"edit_annotation":this.edit_annotation__redo(t.redo_payload);break;case"move_annotation":this.move_annotation__redo(t.redo_payload);break;case"delete_annotation":this.delete_annotation__redo(t.redo_payload);break;case"assign_annotation_id":this.assign_annotation_id(null,t.redo_payload);break;case"create_nonspatial_annotation":this.create_nonspatial_annotation(t.redo_payload);break;default:console.log("Redo error :(")}}finish_action(t){switch(t.act_type){case"begin_annotation":case"edit_annotation":case"move_annotation":this.end_drag(this.state.last_move);break;default:console.log("Finish error :(")}}create_nonspatial_annotation(t=null){let e=!1,s=null,a=null,n=null,i=(n=null==t?(s=this.make_new_annotation_id(),a=this.subtasks[this.state.current_subtask].state.annotation_mode,this.get_init_id_payload()):(e=!0,s=t.unq_id,a=t.annotation_mode,t.init_payload),this.state.current_frame);p.includes(a)&&(i=null);var t={id:s,new:!0,parent_id:null,created_by:this.config.annotator,created_at:k.get_time(),deprecated:!1,human_deprecated:!1,spatial_type:a,spatial_payload:null,classification_payloads:JSON.parse(JSON.stringify(n)),line_size:null,containing_box:null,frame:i,text_payload:""},o=this.state.current_frame;this.subtasks[this.state.current_subtask].annotations.access[s]=t,e&&this.set_id_dialog_payload_to_init(s,n),this.subtasks[this.state.current_subtask].annotations.access[s].annotation_meta=this.config.annotation_meta,this.subtasks[this.state.current_subtask].annotations.ordering.push(s),t=JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s]),this.redraw_all_annotations(this.state.current_subtask,null);let r=this.state.current_frame;p.includes(a)&&(r=null),this.record_action({act_type:"create_nonspatial_annotation",frame:r,redo_payload:{unq_id:s,annotation_mode:a,init_spatial:null,finished:!0,init_payload:JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.id_payload))},undo_payload:{ann_str:t,frame:o}},e),this.suggest_edits(this.state.last_move)}create_nonspatial_annotation__undo(t){var t=JSON.parse(t.ann_str).id,e=this.subtasks[this.state.current_subtask].annotations.ordering.pop();e!=t&&(console.log("We may have a problem... undo replication"),console.log(e,t)),t in this.subtasks[this.state.current_subtask].annotations.access?delete this.subtasks[this.state.current_subtask].annotations.access[t]:console.log("We may have a problem... undo replication"),this.redraw_all_annotations(this.state.current_subtask,null),this.suggest_edits(this.state.last_move)}begin_annotation(t,e=null){let s=null,a=null,n=null,i=!1,o=null,r=null,l=null,c=null,d=(null==e?(s=this.make_new_annotation_id(),a=this.get_line_size(),n=this.subtasks[this.state.current_subtask].state.annotation_mode,o=this.get_global_mouse_x(t),r=this.get_global_mouse_y(t),l=this.get_init_spatial(o,r,n),c=this.get_init_id_payload(),this.hide_edit_suggestion(),this.hide_global_edit_suggestion()):(s=e.unq_id,a=e.line_size,t=e.mouse_event,n=e.annotation_mode,i=!0,o=e.gmx,r=e.gmy,l=e.init_spatial,c=e.init_payload),{tlx:o,tly:r,brx:o,bry:r}),u=(m.includes(n)&&(d=null,a=null,l=null),this.state.current_frame);p.includes(n)&&(u=null),this.subtasks[this.state.current_subtask].annotations.access[s]={id:s,new:!0,parent_id:null,created_by:this.config.annotator,created_at:k.get_time(),deprecated:!1,human_deprecated:!1,spatial_type:n,spatial_payload:l,classification_payloads:JSON.parse(JSON.stringify(c)),line_size:a,containing_box:d,frame:u,text_payload:""},i&&this.set_id_dialog_payload_to_init(s,c),this.subtasks[this.state.current_subtask].annotations.access[s].annotation_meta=this.config.annotation_meta,this.subtasks[this.state.current_subtask].annotations.ordering.push(s),"polygon"==n?this.create_polygon_ender(o,r,s):n,this.draw_annotation_from_id(s),this.subtasks[this.state.current_subtask].state.active_id=s,this.subtasks[this.state.current_subtask].state.is_in_progress=!0,this.record_action({act_type:"begin_annotation",frame:u,redo_payload:{mouse_event:t,unq_id:s,line_size:a,annotation_mode:n,gmx:o,gmy:r,init_spatial:JSON.parse(JSON.stringify(l)),finished:i||"point"==n,init_payload:JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.id_payload))},undo_payload:{ann_str:JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s])}},i),i?"polygon"==n||"polyline"==n?this.continue_annotation(this.state.last_move):(e.actid=e.unq_id,this.finish_annotation(null,e),this.rebuild_containing_box(s),this.suggest_edits(this.state.last_move)):"point"==n&&(this.finish_annotation(null),this.rebuild_containing_box(s),this.suggest_edits(this.state.last_move))}begin_annotation__undo(t){var t=JSON.parse(t.ann_str).id,e=(this.subtasks[this.state.current_subtask].state.is_in_progress=!1,this.subtasks[this.state.current_subtask].state.active_id=null,"polygon"==this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type?this.destroy_polygon_ender(t):this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type,this.subtasks[this.state.current_subtask].annotations.ordering.pop());e!=t&&(console.log("We may have a problem... undo replication"),console.log(e,t)),t in this.subtasks[this.state.current_subtask].annotations.access?delete this.subtasks[this.state.current_subtask].annotations.access[t]:console.log("We may have a problem... undo replication"),this.redraw_all_annotations(this.state.current_subtask),this.suggest_edits(this.state.last_move)}update_containing_box(t,e,s=null){null==s&&(s=this.state.current_subtask),t[0]<this.subtasks[s].annotations.access[e].containing_box.tlx?this.subtasks[s].annotations.access[e].containing_box.tlx=t[0]:t[0]>this.subtasks[s].annotations.access[e].containing_box.brx&&(this.subtasks[s].annotations.access[e].containing_box.brx=t[0]),t[1]<this.subtasks[s].annotations.access[e].containing_box.tly?this.subtasks[s].annotations.access[e].containing_box.tly=t[1]:t[1]>this.subtasks[s].annotations.access[e].containing_box.bry&&(this.subtasks[s].annotations.access[e].containing_box.bry=t[1])}rebuild_containing_box(t,e=!1,s=null){null==s&&(s=this.state.current_subtask);var a=this.subtasks[s].annotations.access[t].spatial_payload[0];this.subtasks[s].annotations.access[t].containing_box={tlx:a[0],tly:a[1],brx:a[0],bry:a[1]};let n=this.subtasks[s].annotations.access[t].spatial_payload.length;e&&--n;for(var i=1;i<n;i++)this.update_containing_box(this.subtasks[s].annotations.access[t].spatial_payload[i],t,s);this.subtasks[s].annotations.access[t].spatial_type&&(a=this.subtasks[s].annotations.access[t].line_size,this.subtasks[s].annotations.access[t].containing_box.tlx-=3*a,this.subtasks[s].annotations.access[t].containing_box.tly-=3*a,this.subtasks[s].annotations.access[t].containing_box.brx+=3*a,this.subtasks[s].annotations.access[t].containing_box.bry+=3*a)}continue_annotation(t,e=!1,s=null){let a=null,n=!1,i=null,o=null,r=this.state.current_frame;if(null==s?(a=this.subtasks[this.state.current_subtask].state.active_id,i=this.get_global_mouse_x(t),o=this.get_global_mouse_y(t)):(t=s.mouse_event,e=s.isclick,a=s.actid,n=!0,i=s.gmx,o=s.gmy,r=s.frame),a&&a){var l=[i,o];switch(this.subtasks[this.state.current_subtask].annotations.access[a].spatial_type){case"bbox":this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[1]=l,this.rebuild_containing_box(a),this.redraw_all_annotations(this.state.current_subtask,null,!0);break;case"bbox3":this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[1]=[l[0],l[1],r],this.rebuild_containing_box(a),this.redraw_all_annotations(this.state.current_subtask,null,!0);break;case"polygon":case"polyline":var c=this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload.length,d=[this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[0][0],this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[0][1]],u=Math.pow(Math.pow(l[0]-d[0],2)+Math.pow(l[1]-d[1],2),.5),p=g()("#ender_"+a).width()/(2*this.get_empirical_scale());this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[c-1]=u<p?d:l,e&&(this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload.push(l),this.update_containing_box(l,a),c=this.state.current_frame,this.record_action({act_type:"continue_annotation",frame:c,redo_payload:{mouse_event:t,isclick:e,actid:a,gmx:i,gmy:o},undo_payload:{actid:a}},n),n&&this.continue_annotation(this.state.last_move)),this.redraw_all_annotations(this.state.current_subtask,null,!0);break;case"contour":3<h.Z.l2_norm(l,this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload.length-1])*this.config.px_per_px&&(this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload.push(l),this.update_containing_box(l,a),this.redraw_all_annotations(this.state.current_subtask,null,!0));break;case"tbar":this.subtasks[this.state.current_subtask].annotations.access[a].spatial_payload[1]=l,this.rebuild_containing_box(a),this.redraw_all_annotations(this.state.current_subtask,null,!0);break;default:u=this.subtasks[this.state.current_subtask].annotations.access[a].spatial_type,this.raise_error("Annotation mode is not understood: "+u,k.elvl_info)}}}continue_annotation__undo(t){this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_payload.pop(),this.rebuild_containing_box(t.actid,!0),this.continue_annotation(this.state.last_move)}begin_edit(t){let e=!1;var s=this.subtasks[this.state.current_subtask].state.edit_candidate.annid;let a=s;this.subtasks[this.state.current_subtask].annotations.access[s].new||(e=!0,a=this.make_new_annotation_id(),this.subtasks[this.state.current_subtask].annotations.access[a]=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s])),this.subtasks[this.state.current_subtask].annotations.access[a].id=a,this.subtasks[this.state.current_subtask].annotations.access[a].created_by=this.config.annotator,this.subtasks[this.state.current_subtask].annotations.access[a].new=!0,this.subtasks[this.state.current_subtask].annotations.access[a].parent_id=s,this.subtasks[this.state.current_subtask].annotations.ordering.push(a),this.subtasks[this.state.current_subtask].annotations.access[s].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[s].human_deprecated=!0,this.subtasks[this.state.current_subtask].state.edit_candidate.annid=a),this.subtasks[this.state.current_subtask].state.active_id=this.subtasks[this.state.current_subtask].state.edit_candidate.annid,this.subtasks[this.state.current_subtask].state.is_in_edit=!0;var n=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.edit_candidate)),i=this.get_with_access_string(this.subtasks[this.state.current_subtask].state.edit_candidate.annid,n.access),o=(this.edit_annotation(t),this.suggest_edits(t),this.get_global_mouse_x(t)),t=this.get_global_mouse_y(t),r=this.subtasks[this.state.current_subtask].annotations.access[a].spatial_type;let l=this.state.current_frame;p.includes(r)&&(l=null),this.record_action({act_type:"edit_annotation",frame:l,undo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,edit_candidate:n,starting_x:i[0],starting_y:i[1],deprecate_old:e,old_id:s,new_id:a},redo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,edit_candidate:n,ending_x:o,ending_y:t,finished:!1,deprecate_old:e,old_id:s,new_id:a}})}edit_annotation(t){var e=this.subtasks[this.state.current_subtask].state.active_id;if(e&&null!==e){var s=[this.get_global_mouse_x(t),this.get_global_mouse_y(t)];switch(this.subtasks[this.state.current_subtask].annotations.access[e].spatial_type){case"bbox":this.set_with_access_string(e,this.subtasks[this.state.current_subtask].state.edit_candidate.access,s),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.subtasks[this.state.current_subtask].state.edit_candidate.point=s,this.show_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate,!0),this.show_global_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate.annid);break;case"bbox3":this.set_with_access_string(e,this.subtasks[this.state.current_subtask].state.edit_candidate.access,[s[0],s[1],this.state.current_frame]),this.rebuild_containing_box(e),this.redraw_all_annotations(null,null,!0),this.subtasks[this.state.current_subtask].state.edit_candidate.point=s,this.show_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate,!0),this.show_global_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate.annid);break;case"polygon":case"polyline":this.set_with_access_string(e,this.subtasks[this.state.current_subtask].state.edit_candidate.access,s),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.subtasks[this.state.current_subtask].state.edit_candidate.point=s,this.show_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate,!0),this.show_global_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate.annid);break;case"contour":this.raise_error("Annotation mode is not currently editable",k.elvl_info);break;case"tbar":this.set_with_access_string(e,this.subtasks[this.state.current_subtask].state.edit_candidate.access,s),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.subtasks[this.state.current_subtask].state.edit_candidate.point=s,this.show_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate,!0),this.show_global_edit_suggestion(this.subtasks[this.state.current_subtask].state.edit_candidate.annid);break;default:this.raise_error("Annotation mode is not understood",k.elvl_info)}}}edit_annotation__undo(t){let e=t.actid;t.deprecate_old&&(e=t.old_id,this.subtasks[this.state.current_subtask].annotations.access[e].deprecated=!1,delete this.subtasks[this.state.current_subtask].annotations.access[t.new_id],s=this.subtasks[this.state.current_subtask].annotations.ordering.indexOf(t.new_id),this.subtasks[this.state.current_subtask].annotations.ordering.splice(s,1));var s,a=[t.starting_x,t.starting_y];switch(this.subtasks[this.state.current_subtask].annotations.access[e].spatial_type){case"bbox":this.set_with_access_string(e,t.edit_candidate.access,a,!0),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move);break;case"bbox3":a.push(t.starting_frame),this.set_with_access_string(e,t.edit_candidate.access,a,!0),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move);break;case"polygon":case"polyline":case"tbar":this.set_with_access_string(e,t.edit_candidate.access,a,!0),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move)}}edit_annotation__redo(t){let e=t.actid;t.deprecate_old&&(e=t.new_id,this.subtasks[this.state.current_subtask].annotations.access[e]=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[t.old_id])),this.subtasks[this.state.current_subtask].annotations.access[t.new_id].id=t.new_id,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].created_by=this.config.annotator,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].new=!0,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].parent_id=t.old_id,this.subtasks[this.state.current_subtask].annotations.access[t.old_id].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[t.old_id].human_deprecated=!0,this.subtasks[this.state.current_subtask].annotations.ordering.push(t.new_id));var s=[t.ending_x,t.ending_y],a=this.get_with_access_string(t.actid,t.edit_candidate.access);switch(this.subtasks[this.state.current_subtask].annotations.access[e].spatial_type){case"bbox":this.set_with_access_string(e,t.edit_candidate.access,s),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move);break;case"bbox3":s.push(t.ending_frame),this.set_with_access_string(e,t.edit_candidate.access,s),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move);break;case"polygon":case"polyline":case"tbar":this.set_with_access_string(e,t.edit_candidate.access,s,!1),this.rebuild_containing_box(e),this.redraw_all_annotations(this.state.current_subtask,null,!0),this.suggest_edits(this.state.last_move)}var n=this.subtasks[this.state.current_subtask].annotations.access[e].spatial_type;let i=this.state.current_frame;p.includes(n)&&(i=null),this.record_action({act_type:"edit_annotation",frame:i,undo_payload:{actid:t.actid,edit_candidate:JSON.parse(JSON.stringify(t.edit_candidate)),starting_x:a[0],starting_y:a[1],deprecate_old:t.deprecate_old,old_id:t.old_id,new_id:t.new_id},redo_payload:{actid:t.actid,edit_candidate:JSON.parse(JSON.stringify(t.edit_candidate)),ending_x:t.ending_x,ending_y:t.ending_y,finished:!0,deprecate_old:t.deprecate_old,old_id:t.old_id,new_id:t.new_id}},!0)}begin_move(t){let e=!1;var s=this.subtasks[this.state.current_subtask].state.move_candidate.annid;let a=s;this.subtasks[this.state.current_subtask].annotations.access[s].new||(e=!0,a=this.make_new_annotation_id(),this.subtasks[this.state.current_subtask].annotations.access[a]=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s])),this.subtasks[this.state.current_subtask].annotations.access[a].id=a,this.subtasks[this.state.current_subtask].annotations.access[a].created_by=this.config.annotator,this.subtasks[this.state.current_subtask].annotations.access[a].new=!0,this.subtasks[this.state.current_subtask].annotations.access[a].parent_id=s,this.subtasks[this.state.current_subtask].annotations.ordering.push(a),this.subtasks[this.state.current_subtask].annotations.access[s].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[s].human_deprecated=!0,this.subtasks[this.state.current_subtask].state.move_candidate.annid=a),this.subtasks[this.state.current_subtask].state.active_id=this.subtasks[this.state.current_subtask].state.move_candidate.annid,this.subtasks[this.state.current_subtask].state.is_in_move=!0;var n=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.move_candidate)),i=this.subtasks[this.state.current_subtask].annotations.access[a].spatial_type;let o=this.state.current_frame;p.includes(i)&&(o=null),this.record_action({act_type:"move_annotation",frame:o,undo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,move_candidate:n,diffX:0,diffY:0,diffZ:0,deprecate_old:e,old_id:s,new_id:a},redo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,move_candidate:n,diffX:0,diffY:0,diffZ:0,finished:!1,deprecate_old:e,old_id:s,new_id:a}}),g()(".edit_suggestion").css("display","none"),this.move_annotation(t)}move_annotation(t){var e=this.subtasks[this.state.current_subtask].state.active_id;e&&null!==e&&(e={id:this.subtasks[this.state.current_subtask].state.move_candidate.annid,diffX:(t.clientX-this.drag_state.move.mouse_start[0])/this.state.zoom_val,diffY:(t.clientY-this.drag_state.move.mouse_start[1])/this.state.zoom_val,diffZ:this.state.current_frame-this.drag_state.move.mouse_start[2]},this.redraw_all_annotations(null,e,!0),this.show_global_edit_suggestion(this.subtasks[this.state.current_subtask].state.move_candidate.annid,e),this.reposition_dialogs())}finish_annotation(t,e=null){let s=null,a=!1;null==e?s=this.subtasks[this.state.current_subtask].state.active_id:(s=e.actid,a=!0);let n,i,o;switch(this.subtasks[this.state.current_subtask].annotations.access[s].spatial_type){case"polygon":n=this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload.length,i=[this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload[0][0],this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload[0][1]],this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload[n-1]=i,this.redraw_all_annotations(this.state.current_subtask),this.record_action({act_type:"finish_annotation",frame:this.state.current_frame,undo_payload:{actid:s,ender_html:g()("#ender_"+s).outer_html()},redo_payload:{actid:s}},a),g()("#ender_"+s).remove();break;case"polyline":2<(n=this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload.length)?(o=!0,--n,this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload.pop()):(o=!1,this.rebuild_containing_box(s,!1,this.state.current_subtask)),console.log("At finish...",JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload,null,2)),this.redraw_all_annotations(this.state.current_subtask),this.record_action({act_type:"finish_annotation",frame:this.state.current_frame,undo_payload:{actid:s,popped:o},redo_payload:{actid:s,popped:o,fin_pt:JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[s].spatial_payload[n-1]))}},a);break;case"bbox":case"bbox3":case"contour":case"tbar":case"point":this.record_finish(s)}this.subtasks[this.state.current_subtask].single_class_mode?this.subtasks[this.state.current_subtask].annotations.access[s].classification_payloads=[{class_id:this.subtasks[this.state.current_subtask].class_defs[0].id,confidence:1}]:a,this.subtasks[this.state.current_subtask].state.active_id=null,this.subtasks[this.state.current_subtask].state.is_in_progress=!1}finish_annotation__undo(t){let e=this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_payload.length;var s,a=this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_type;"polyline"==a&&t.popped&&(s=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_payload[e-1])),this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_payload.push(s),e+=1),m.includes(a)||(s=[this.get_global_mouse_x(this.state.last_move),this.get_global_mouse_y(this.state.last_move)],p.includes(a)&&s.push(this.state.current_frame),this.subtasks[this.state.current_subtask].annotations.access[t.actid].spatial_payload[e-1]=s),this.subtasks[this.state.current_subtask].state.is_in_progress=!0,this.subtasks[this.state.current_subtask].state.active_id=t.actid,this.redraw_all_annotations(this.state.current_subtask),t.ender_html&&g()("#dialogs__"+this.state.current_subtask).append(t.ender_html),this.hide_edit_suggestion(),this.hide_global_edit_suggestion(),this.reposition_dialogs()}finish_edit(){var t=this.subtasks[this.state.current_subtask].state.active_id;switch(this.subtasks[this.state.current_subtask].annotations.access[t].spatial_type){case"polygon":case"polyline":case"bbox":case"bbox3":case"tbar":this.record_finish_edit(t)}this.subtasks[this.state.current_subtask].state.active_id=null,this.subtasks[this.state.current_subtask].state.is_in_edit=!1}finish_move(t){var e=(t.clientX-this.drag_state.move.mouse_start[0])/this.state.zoom_val,s=(t.clientY-this.drag_state.move.mouse_start[1])/this.state.zoom_val,a=this.state.current_frame-this.drag_state.move.mouse_start[2];for(let t=0;t<this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_payload.length;t++)this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_payload[t][0]+=e,this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_payload[t][1]+=s;if(p.includes(this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_type))for(let t=0;t<this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_payload.length;t++)this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_payload[t][2]+=a;this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].containing_box.tlx+=e,this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].containing_box.brx+=e,this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].containing_box.tly+=s,this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].containing_box.bry+=s,this.subtasks[this.state.current_subtask].annotations.access[this.subtasks[this.state.current_subtask].state.active_id].spatial_type,this.subtasks[this.state.current_subtask].state.active_id=null,this.subtasks[this.state.current_subtask].state.is_in_move=!1,this.redraw_all_annotations(this.state.current_subtask),this.record_finish_move(e,s,a)}move_annotation__undo(t){var e=t.diffX,s=t.diffY,a=t.diffZ;let n=t.move_candidate.annid;if(t.deprecate_old){n=t.old_id,this.subtasks[this.state.current_subtask].annotations.access[n].deprecated=!1,delete this.subtasks[this.state.current_subtask].annotations.access[t.new_id];t=this.subtasks[this.state.current_subtask].annotations.ordering.indexOf(t.new_id);this.subtasks[this.state.current_subtask].annotations.ordering.splice(t,1)}else{for(var i=0;i<this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload.length;i++)this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][0]+=e,this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][1]+=s,2<this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i].length&&(this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][2]+=a);this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.tlx+=e,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.brx+=e,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.tly+=s,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.bry+=s}this.redraw_all_annotations(this.state.current_subtask),this.hide_edit_suggestion(),this.hide_global_edit_suggestion(),this.reposition_dialogs(),this.suggest_edits(this.state.last_move),this.update_frame(a)}move_annotation__redo(t){var e=t.diffX,s=t.diffY,a=t.diffZ;let n=t.move_candidate.annid;t.deprecate_old&&(n=t.new_id,this.subtasks[this.state.current_subtask].annotations.access[n]=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[t.old_id])),this.subtasks[this.state.current_subtask].annotations.access[t.new_id].id=t.new_id,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].created_by=this.config.annotator,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].new=!0,this.subtasks[this.state.current_subtask].annotations.access[t.new_id].parent_id=t.old_id,this.subtasks[this.state.current_subtask].annotations.access[t.old_id].deprecated=!0,this.subtasks[this.state.current_subtask].annotations.access[t.old_id].human_deprecated=!0,this.subtasks[this.state.current_subtask].annotations.ordering.push(t.new_id));for(var i=0;i<this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload.length;i++)this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][0]+=e,this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][1]+=s,2<this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i].length&&(this.subtasks[this.state.current_subtask].annotations.access[n].spatial_payload[i][2]+=a);this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.tlx+=e,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.brx+=e,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.tly+=s,this.subtasks[this.state.current_subtask].annotations.access[n].containing_box.bry+=s,this.redraw_all_annotations(this.state.current_subtask),this.hide_edit_suggestion(),this.hide_global_edit_suggestion(),this.reposition_dialogs(),this.suggest_edits(this.state.last_move);var o=this.subtasks[this.state.current_subtask].annotations.access[n].spatial_type;let r=this.state.current_frame;p.includes(o)&&(r=null),this.record_action({act_type:"move_annotation",frame:r,undo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,move_candidate:t.move_candidate,diffX:-e,diffY:-s,diffZ:-a,deprecate_old:t.deprecate_old,old_id:t.old_id,new_id:t.new_id},redo_payload:{actid:this.subtasks[this.state.current_subtask].state.active_id,move_candidate:t.move_candidate,diffX:e,diffY:s,diffZ:a,finished:!0,deprecate_old:t.deprecate_old,old_id:t.old_id,new_id:t.new_id}},!0),this.update_frame(a)}get_edit_candidates(t,e,s){s/=this.get_empirical_scale();var a={candidate_ids:[],best:null};let n=1/0;for(var i=0;i<this.subtasks[this.state.current_subtask].annotations.ordering.length;i++){var o,r,l=this.subtasks[this.state.current_subtask].annotations.ordering[i];this.subtasks[this.state.current_subtask].annotations.access[l].deprecated||(o=this.subtasks[this.state.current_subtask].annotations.access[l].containing_box,r=this.subtasks[this.state.current_subtask].annotations.access[l].frame,o&&(o.tlz=this.state.current_frame,o.brz=this.state.current_frame,null!=r?(o.tlz=r,o.brz=r):"bbox3"==this.subtasks[this.state.current_subtask].annotations.access[l].spatial_type&&(r=this.subtasks[this.state.current_subtask].annotations.access[l].spatial_payload,o.tlz=Math.min(r[0][2],r[1][2]),o.brz=Math.max(r[0][2],r[1][2]))),o&&t>=o.tlx-s&&t<=o.brx+s&&e>=o.tly-s&&e<=o.bry+s&&this.state.current_frame>=o.tlz&&this.state.current_frame<=o.brz&&(a.candidate_ids.push(l),(r=(o.brx-o.tlx)*(o.bry-o.tly))<n&&(n=r,a.best={annid:l})))}return a}suggest_edits(t=null,e=null){let s;if(null==e){null==t&&(t=this.state.last_move);var a=this.config.edit_handle_size/2,n=this.get_global_mouse_x(t),i=this.get_global_mouse_y(t);if(g()(t.target).hasClass("gedit-target"))return;t=this.get_edit_candidates(n,i,a);if(null==t.best)return this.hide_global_edit_suggestion(),this.hide_edit_suggestion(),this.subtasks[this.state.current_subtask].state.move_candidate=null,void(this.subtasks[this.state.current_subtask].active_annotation=null);var a=this.get_nearest_active_keypoint(n,i,a,t.candidate_ids);null!=a&&null!=a.point?(this.subtasks[this.state.current_subtask].state.edit_candidate=a,this.show_edit_suggestion(a,!0),t.best=a):null!=(a=this.get_nearest_segment_point(n,i,1/0,t.candidate_ids))&&null!=a.point?(this.subtasks[this.state.current_subtask].state.edit_candidate=a,this.show_edit_suggestion(a,!1),t.best=a):this.hide_edit_suggestion(),this.subtasks[this.state.current_subtask].state.move_candidate=t.best,s=t.best.annid}else this.hide_global_edit_suggestion(),this.hide_edit_suggestion(),s=e;this.show_global_edit_suggestion(s,null,e),this.subtasks[this.state.current_subtask].active_annotation=s}raise_error(t,e=k.elvl_standard){switch(e){case k.elvl_info:console.log("[info] "+t);break;case k.elvl_standard:alert("[error] "+t);break;case k.elvl_fatal:throw alert("[fatal] "+t),new Error(t)}}get_global_mouse_x(t){var e=this.get_empirical_scale(),s=g()("#"+this.config.annbox_id);return(t.pageX-s.offset().left+s.scrollLeft())/e}get_global_mouse_y(t){var e=this.get_empirical_scale(),s=g()("#"+this.config.annbox_id);return(t.pageY-s.offset().top+s.scrollTop())/e}get_global_element_center_x(t){var e=this.get_empirical_scale(),s=g()("#"+this.config.annbox_id);return(t.offset().left+t.width()/2-s.offset().left+s.scrollLeft())/e}get_global_element_center_y(t){var e=this.get_empirical_scale(),s=g()("#"+this.config.annbox_id);return(t.offset().top+t.height()/2-s.offset().top+s.scrollTop())/e}lookup_id_dialog_mouse_pos(t,e){let s=g()("#"+this.subtasks[this.state.current_subtask].state.idd_id);e&&(s=g()("#"+this.subtasks[this.state.current_subtask].state.idd_id_front));var a,e=t.pageX-s.offset().left-s.width()/2,t=t.pageY-s.offset().top-s.height()/2,n=this.config.inner_prop*this.config.outer_diameter/2,i=.5*this.config.outer_diameter,o=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return i<o||o<n?null:(a=this.subtasks[this.state.current_subtask].class_ids,{class_ind:(-1*Math.floor(Math.atan2(t,e)/(2*Math.PI)*a.length)+a.length)%a.length,dist_prop:(o-n)/(i-n)})}set_id_dialog_payload_nopin(t,e){for(var s=this.subtasks[this.state.current_subtask].class_ids,a=0;a<s.length;a++)this.subtasks[this.state.current_subtask].state.id_payload[a]=a==t?{class_id:s[a],confidence:e}:{class_id:s[a],confidence:(1-e)/(s.length-1)}}set_id_dialog_payload_to_init(t,e=null){var s=this.state.current_subtask;if(null!=e)this.subtasks[this.state.current_subtask].state.id_payload=JSON.parse(JSON.stringify(e)),this.update_id_toolbox_display();else{if(null!=t){e=this.subtasks[this.state.current_subtask].annotations.access[t].classification_payloads;if(null!=e)return void(this.subtasks[this.state.current_subtask].state.id_payload=JSON.parse(JSON.stringify(e)))}if(!this.config.allow_soft_id)for(var a=this.subtasks[s].class_ids,t="div#tb-id-app--"+this.state.current_subtask,e=g()(t+" a.tbid-opt.sel").attr("id").split("_"),n=a.indexOf(parseInt(e[e.length-1])),i=0;i<a.length;i++)this.subtasks[this.state.current_subtask].state.id_payload[i]=i==n?{class_id:a[i],confidence:1}:{class_id:a[i],confidence:0/(a.length-1)}}}update_id_dialog_display(e=!1){for(var s=this.config.inner_prop*this.config.outer_diameter/2,a=.5*this.config.outer_diameter,n=this.subtasks[this.state.current_subtask].class_ids,i=0;i<n.length;i++){var o=this.subtasks[this.state.current_subtask].state.id_payload[i].confidence,r=i/n.length,l=1/n.length,c=s+o*(a-s)/2,o=o*(a-s),d=2*Math.PI*c*l,l=2*Math.PI*c*(1-l),r=2*Math.PI*c*r;let t;t=e?this.subtasks[this.state.current_subtask].state.idd_id_front:this.subtasks[this.state.current_subtask].state.idd_id;var u=g()(`#${t}__circ_`+n[i]);u.attr("r",c),u.attr("stroke-dasharray",d+" "+l),u.attr("stroke-dashoffset",r),u.attr("stroke-width",o)}this.redraw_demo()}update_id_toolbox_display(){if(!this.config.allow_soft_id)for(var t="div#tb-id-app--"+this.state.current_subtask,e=this.subtasks[this.state.current_subtask].class_ids,s=0;s<e.length;s++){var a=e[s];.5<this.subtasks[this.state.current_subtask].state.id_payload[s].confidence&&(g()(t+" #"+this.config.toolbox_id+" a#toolbox_sel_"+a).hasClass("sel")||(g()(t+" #"+this.config.toolbox_id+" a.tbid-opt.sel").attr("href","#"),g()(t+" #"+this.config.toolbox_id+" a.tbid-opt.sel").removeClass("sel"),g()(t+" #"+this.config.toolbox_id+" a#toolbox_sel_"+a).addClass("sel"),g()(t+" #"+this.config.toolbox_id+" a#toolbox_sel_"+a).removeAttr("href")))}}handle_id_dialog_hover(t){let e=!1;"front"==this.subtasks[this.state.current_subtask].state.idd_which&&(e=!0);t=this.lookup_id_dialog_mouse_pos(t,e);null!=t&&(this.config.allow_soft_id||(t.dist_prop=1),this.set_id_dialog_payload_nopin(t.class_ind,t.dist_prop),this.update_id_dialog_display(e),this.update_id_toolbox_display())}assign_annotation_id(t=null,e=null){let s=null,a=null,n=!1;if(null==e?(null==t&&(t=this.subtasks[this.state.current_subtask].state.idd_associated_annotation),a=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].annotations.access[t].classification_payloads)),s=JSON.parse(JSON.stringify(this.subtasks[this.state.current_subtask].state.id_payload))):(n=!0,a=JSON.parse(JSON.stringify(e.old_id_payload)),s=JSON.parse(JSON.stringify(e.new_id_payload)),t=e.actid),this.subtasks[this.state.current_subtask].annotations.access[t].classification_payloads=JSON.parse(JSON.stringify(s)),n?this.suggest_edits():this.hide_id_dialog(),this.redraw_all_annotations(this.state.current_subtask),this.subtasks[this.state.current_subtask].state.first_explicit_assignment){for(var i=this.subtasks[this.state.current_subtask].actions.stream.length,o=0;o<i;o++)if("begin_annotation"==this.subtasks[this.state.current_subtask].actions.stream[i-o-1].act_type){this.subtasks[this.state.current_subtask].actions.stream[i-o-1].redo_payload.init_payload=JSON.parse(JSON.stringify(s));break}}else this.record_action({act_type:"assign_annotation_id",undo_payload:{actid:t,old_id_payload:JSON.parse(JSON.stringify(a))},redo_payload:{actid:t,old_id_payload:JSON.parse(JSON.stringify(a)),new_id_payload:JSON.parse(JSON.stringify(s))}},n)}assign_annotation_id__undo(t){var e=t.actid,t=JSON.parse(JSON.stringify(t.old_id_payload));this.subtasks[this.state.current_subtask].annotations.access[e].classification_payloads=JSON.parse(JSON.stringify(t)),this.redraw_all_annotations(this.state.current_subtask),this.suggest_edits()}handle_id_dialog_click(t){this.handle_id_dialog_hover(t),this.assign_annotation_id(),this.subtasks[this.state.current_subtask].state.first_explicit_assignment=!1,this.suggest_edits(this.state.last_move)}handle_mouse_down(t){var e=k.get_drag_key_start(t,this);null==e||this.subtasks[this.state.current_subtask].state.idd_visible&&!this.subtasks[this.state.current_subtask].state.idd_thumbnail||(t.preventDefault(),null==this.drag_state.active_key&&this.start_drag(e,t.button,t))}handle_mouse_move(t){if(this.state.last_move=t,null==this.drag_state.active_key)this.subtasks[this.state.current_subtask].state.idd_visible&&!this.subtasks[this.state.current_subtask].state.idd_thumbnail||(this.subtasks[this.state.current_subtask].state.is_in_progress?"polygon"!=this.subtasks[this.state.current_subtask].state.annotation_mode&&"polyline"!=this.subtasks[this.state.current_subtask].state.annotation_mode||this.continue_annotation(t):this.suggest_edits(t));else switch(this.drag_state.active_key){case"pan":this.drag_repan(t);break;case"zoom":this.drag_rezoom(t);break;case"annotation":this.subtasks[this.state.current_subtask].state.idd_visible&&!this.subtasks[this.state.current_subtask].state.idd_thumbnail||this.continue_annotation(t);break;case"edit":this.subtasks[this.state.current_subtask].state.idd_visible&&!this.subtasks[this.state.current_subtask].state.idd_thumbnail||this.edit_annotation(t);break;case"move":this.subtasks[this.state.current_subtask].state.idd_visible&&!this.subtasks[this.state.current_subtask].state.idd_thumbnail||this.move_annotation(t)}}handle_mouse_up(t){t.button==this.drag_state.release_button&&this.end_drag(t)}start_drag(t,e,s){var a,n=g()("#"+this.config.annbox_id);switch(this.drag_state.active_key=t,this.drag_state.release_button=e,this.drag_state[t].mouse_start=[s.clientX,s.clientY,this.state.current_frame],this.drag_state[t].zoom_val_start=this.state.zoom_val,this.drag_state[t].offset_start=[n.scrollLeft(),n.scrollTop()],g()("textarea").trigger("blur"),g()("div.permopen").removeClass("permopen"),t){case"annotation":"polygon"==(a=this.subtasks[this.state.current_subtask].state.annotation_mode)||"polyline"==a||m.includes(a)||this.begin_annotation(s);break;case"edit":this.begin_edit(s);break;case"move":this.begin_move(s)}}end_drag(t){switch(this.drag_state.active_key){case"annotation":null!=this.subtasks[this.state.current_subtask].state.active_id?"polygon"!=this.subtasks[this.state.current_subtask].state.annotation_mode&&"polyline"!=this.subtasks[this.state.current_subtask].state.annotation_mode||t.target.id=="ender_"+this.subtasks[this.state.current_subtask].state.active_id||t.target.id=="ender_"+this.subtasks[this.state.current_subtask].state.active_id+"_inner"?this.finish_annotation(t):this.continue_annotation(t,!0):"polygon"!=this.subtasks[this.state.current_subtask].state.annotation_mode&&"polyline"!=this.subtasks[this.state.current_subtask].state.annotation_mode||this.begin_annotation(t);break;case"right":null!=this.subtasks[this.state.current_subtask].state.active_id&&"polyline"==this.subtasks[this.state.current_subtask].state.annotation_mode&&this.finish_annotation(t);break;case"edit":this.finish_edit();break;case"move":this.finish_move(t)}this.drag_state.active_key=null,this.drag_state.release_button=null}drag_repan(t){var e=g()("#"+this.config.annbox_id),s=t.clientX,t=t.clientY;e.scrollLeft(this.drag_state.pan.offset_start[0]+(this.drag_state.pan.mouse_start[0]-s)),e.scrollTop(this.drag_state.pan.offset_start[1]+(this.drag_state.pan.mouse_start[1]-t))}drag_rezoom(t){t=t.clientY;this.state.zoom_val=this.drag_state.zoom.zoom_val_start*Math.pow(1.1,-(t-this.drag_state.zoom.mouse_start[1])/10),this.rezoom(this.drag_state.zoom.mouse_start[0],this.drag_state.zoom.mouse_start[1])}rezoom(t=null,e=null,s=!1){var a=g()("#"+this.config.imwrap_id),n=g()("#"+this.config.annbox_id);null==t&&(t=n.width()/2),null==e&&(e=n.height()/2);let i=a.width(),o=a.height();var a=n.scrollLeft(),r=n.scrollTop(),l=(s&&(i=this.config.image_width,o=this.config.image_height),n.width()),c=n.height(),d=Math.round(this.config.image_width*this.state.zoom_val),u=Math.round(this.config.image_height*this.state.zoom_val),p=g()("."+this.config.imgsz_class);p.css("width",d+"px"),p.css("height",u+"px");let h,f;f=s?(h=t*d/i-l/2,e*u/o-c/2):(h=(a+t)*d/i-t,(r+e)*u/o-e),n.scrollLeft(h),n.scrollTop(f),this.redraw_demo()}swap_frame_image(t,e=0){var s=g()(`img#${this.config.image_id_pfx}__`+e).attr("src");return g()(`img#${this.config.image_id_pfx}__`+e).attr("src",t),s}swap_anno_bg_color(t){var e=g()("#"+this.config.annbox_id),s=e.css("background-color");return e.css("background-color",t),s}reset_interaction_state(t=null){var e=[];if(null==t)for(var s in this.subtasks)e.push(s);else e.push(t);for(let t=0;t<e.length;t++)null!=this.subtasks[e[t]].state.active_id&&g()("#ender_"+this.subtasks[e[t]].state.active_id).remove(),this.subtasks[e[t]].state.is_in_edit=!1,this.subtasks[e[t]].state.is_in_move=!1,this.subtasks[e[t]].state.is_in_progress=!1,this.subtasks[e[t]].state.active_id=null,this.show;this.drag_state={active_key:null,release_button:null,annotation:{mouse_start:null,offset_start:null,zoom_val_start:null},edit:{mouse_start:null,offset_start:null,zoom_val_start:null},pan:{mouse_start:null,offset_start:null,zoom_val_start:null},zoom:{mouse_start:null,offset_start:null,zoom_val_start:null},move:{mouse_start:null,offset_start:null,zoom_val_start:null},right:{mouse_start:null,offset_start:null,zoom_val_start:null}}}get_annotations(e){var s=[];for(let t=0;t<this.subtasks[e].annotations.ordering.length;t++){var a=this.subtasks[e].annotations.ordering[t];a!=this.subtasks[this.state.current_subtask].state.active_id&&s.push(this.subtasks[e].annotations.access[a])}return JSON.parse(JSON.stringify(s))}set_annotations(t,e){this.reset_interaction_state(),this.subtasks[e].actions.stream=[],this.subtasks[e].actions.undo_stack=[];var s=JSON.parse(JSON.stringify(t)),a=[],n={};for(let t=0;t<s.length;t++)a.push(s[t].id),n[s[t].id]=s[t];this.subtasks[e].annotations.ordering=a,this.subtasks[e].annotations.access=n;for(let t=0;t<a.length;t++)this.rebuild_containing_box(a[t],!1,e);this.redraw_all_annotations(e)}update_frame(t=null,e=null){var s;1==this.config.image_data.frames.length||null!=(s=this.subtasks[this.state.current_subtask].state.active_id)&&!p.includes(this.subtasks[this.state.current_subtask].annotations.access[s].spatial_type)||(null==e?(e=parseInt(g()(`div#${this.config.toolbox_id} input.frame_input`).val()),null!=t&&(e=Math.min(Math.max(e+t,0),this.config.image_data.frames.length-1))):e=Math.min(Math.max(e,0),this.config.image_data.frames.length-1),g()(`div#${this.config.toolbox_id} input.frame_input`).val(e),t=this.state.current_frame,this.state.current_frame=e,g()(`img#${this.config.image_id_pfx}__`+t).css("display","none"),g()(`img#${this.config.image_id_pfx}__`+e).css("display","block"),s&&p.includes(this.subtasks[this.state.current_subtask].annotations.access[s].spatial_type)?this.subtasks[this.state.current_subtask].state.is_in_edit?this.edit_annotation(this.state.last_move):this.subtasks[this.state.current_subtask].state.is_in_move?this.move_annotation(this.state.last_move):this.subtasks[this.state.current_subtask].state.is_in_progress?this.continue_annotation(this.state.last_move):this.redraw_all_annotations():this.redraw_all_annotations(),null!=this.state.last_move&&this.suggest_edits(this.state.last_move))}on(t,e){var s=t.bind(this);this[t.name]=(...t)=>{s(...t),e()}}}const d=window.ULabel=k},345:(t,e,s)=>{"use strict";s.r(e),s.d(e,{ULABEL_VERSION:()=>a});const a="0.4.20"}},a={};function n(t){var e=a[t];return void 0!==e||(e=a[t]={exports:{}},s[t].call(e.exports,e,e.exports,n)),e.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var t=n(138);exports.ULabel=t.default})();